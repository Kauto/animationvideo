!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.AnimationVideo={})}(this,function(t){function e(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return"function"==typeof t?t.apply(null,e):t}var i=function(t){var e=this,i=t;if("object"!=typeof t)throw new Error("No canvas given for Engine constructor");if(t.getContext)i={canvas:t};else if(!t.canvas)throw new Error("No canvas given for Engine constructor");var n=Object.assign({},{scene:null,canvas:null,autoSize:!1,clickToPlayAudio:!1},i);if(this._output={canvas:null,context:null,width:0,height:0,ratio:1},this._scene=null,this._isSceneInitialized=!1,this._newScene=null,this._lastTimestamp=0,this._timePassed=0,this._recalculateCanvas=!1,this._referenceRequestAnimationFrame=null,this._output.canvas=n.canvas,"object"!=typeof n.canvas||null===n.canvas||!n.canvas.getContext)throw new Error("Countn't create contect for canvas in Engine");if(n.autoSize){var r={enabled:!0,scaleLimitMin:1,scaleLimitMax:8,scaleFactor:1.1,referenceWidth:function(){return e._output.canvas.clientWidth},referenceHeight:function(){return e._output.canvas.clientHeight},currentScale:1,waitTime:800,currentWaitedTime:0,currentOffsetTime:0,offsetTimeLimitUp:300,offsetTimeLimitDown:300,offsetTimeTarget:1e3/60,offsetTimeDelta:3,registerResizeEvents:!0,registerVisibilityEvents:!0,setCanvasStyle:!1};this._autoSize="object"==typeof n.autoSize?Object.assign({},r,n.autoSize):r,this._autoSize.registerResizeEvents&&(window.addEventListener("resize",this.recalculateCanvas.bind(this),!1),window.addEventListener("orientationchange",this.recalculateCanvas.bind(this),!1)),this._autoSize.registerVisibilityEvents&&document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this),!1),this.recalculateCanvas()}else this._output.width=this._output.canvas.width,this._output.height=this._output.canvas.height,this._output.ratio=this._output.width/this._output.height;this._output.context=n.canvas.getContext("2d"),n.clickToPlayAudio&&n.canvas.addEventListener("click",this.playAudioOfScene.bind(this),!1),this.switchScene(n.scene),this.normalizeContext(this._output.context)};i.prototype.handleVisibilityChange=function(){this._autoSize.enabled=!("hidden"==document.visibilityState)},i.prototype.playAudioOfScene=function(){this._isSceneInitialized&&this._scene&&this._scene.audioElement&&this._scene.audioElement.play()},i.prototype.normalizeContext=function(t){t.textBaseline="middle",t.textAlign="center",t.globalAlpha=1,t.globalCompositeOperation="source-over"},i.prototype.getWidth=function(){return this._output.width},i.prototype.getHeight=function(){return this._output.height},i.prototype.recalculateCanvas=function(){if(this._autoSize){var t=e(this._autoSize.referenceWidth),i=e(this._autoSize.referenceHeight);if(t<=0||i<=0)return;this._output.canvas.width=Math.round(t/this._autoSize.currentScale),this._output.canvas.height=Math.round(i/this._autoSize.currentScale),this._autoSize.setCanvasStyle&&(this._output.canvas.style.width=t+"px",this._output.canvas.style.height=i+"px"),this._autoSize.currentWaitedTime=0,this._autoSize.currentOffsetTime=0}return this._output.width=this._output.canvas.width,this._output.height=this._output.canvas.height,this._output.ratio=this._output.width/this._output.height,this.resize(),this},i.prototype.resize=function(){return this._scene&&this._scene.resize&&this._scene.resize(this._output),this},i.prototype.switchScene=function(t){return t&&(this._newScene=t),this},i.prototype.run=function(t){return t=t||{},this._referenceRequestAnimationFrame=window.requestAnimationFrame(function e(i){if(this._referenceRequestAnimationFrame=window.requestAnimationFrame(e.bind(this)),this._recalculateCanvas&&(this.recalculateCanvas(),this._recalculateCanvas=!1),this._realLastTimestamp||(this._realLastTimestamp=i),null!==this._newScene){var n=this._scene?this._scene.destroy(this._output):t;n&&(this._newScene.callInit(this._output,n,this),this._scene=this._newScene,this._newScene=null,this._isSceneInitialized=!1)}if(this._scene&&this._output.canvas.width){var r=this._scene.currentTime();this._timePassed=this._scene.clampTime(r-this._lastTimestamp);var a=this._scene.shiftTime(this._timePassed);if(this._timePassed=this._timePassed+a,this._lastTimestamp=r+a,this._isSceneInitialized){if(0!==this._timePassed&&(this._autoSize&&this._autoSize.enabled&&(r=window.performance?performance.now():Date.now()),this._scene.move(this._output,this._timePassed),this._timePassed<0&&(this._timePassed=this._scene.totalTimePassed),this._scene.draw(this._output),this._autoSize&&this._autoSize.enabled)){var o=(window.performance?performance.now():Date.now())-r-this._autoSize.offsetTimeTarget;this._autoSize.currentWaitedTime<this._autoSize.waitTime?this._autoSize.currentWaitedTime+=i-this._realLastTimestamp:Math.abs(o)<=this._autoSize.offsetTimeDelta?this._autoSize.currentOffsetTime=this._autoSize.currentOffsetTime>=0?Math.max(0,this._autoSize.currentOffsetTime-this._autoSize.offsetTimeDelta):Math.min(0,this._autoSize.currentOffsetTime+this._autoSize.offsetTimeDelta):o<0&&this._autoSize.currentScale>this._autoSize.scaleLimitMin?(this._autoSize.currentOffsetTime+=o,this._autoSize.currentOffsetTime<=this._autoSize.offsetTimeLimitDown&&(this._autoSize.currentScale=Math.max(this._autoSize.scaleLimitMin,this._autoSize.currentScale/this._autoSize.scaleFactor),this._recalculateCanvas=!0)):o>0&&this._autoSize.currentScale<this._autoSize.scaleLimitMax&&(this._autoSize.currentOffsetTime+=o,this._autoSize.currentOffsetTime>=this._autoSize.offsetTimeLimitUp&&(this._autoSize.currentScale=Math.min(this._autoSize.scaleLimitMax,this._autoSize.currentScale*this._autoSize.scaleFactor),this._recalculateCanvas=!0))}}else this._isSceneInitialized=this._scene.callLoading(this._output),this._isSceneInitialized&&(this._scene.reset(this._output),this._autoSize&&(this._autoSize.currentWaitedTime=0))}this._realLastTimestamp=i}.bind(this)),this},i.prototype.destroy=function(){return this._referenceRequestAnimationFrame&&window.cancelAnimationFrame(this._referenceRequestAnimationFrame),this._referenceRequestAnimationFrame=null,this._scene&&this._scene.destroy(this._output),window.removeEventListener("resize",this.recalculateCanvas.bind(this),!1),window.removeEventListener("orientationchange",this.recalculateCanvas.bind(this),!1),document.removeEventListener("visibilitychange",this.handleVisibilityChange.bind(this),!1),this._output.canvas.removeEventListener("click",this.playAudioOfScene.bind(this),!1),this};var n=function(){};n.add=function(t,e){var i=this||n,r=function(n){if(i.Images[n])e&&"function"==typeof e[n]&&e[n](n,i.Images[n]);else{if(i.Images[n]=new window.Image,i.Images[n].onload=function(){i.loaded++,e&&"function"==typeof e?i.isLoaded()&&e():e&&"function"==typeof e[n]&&e[n](n,i.Images[n]),i.resolve&&i.isLoaded()&&(i.resolve(),i.resolve=null)},"<svg"===t[n].substr(0,4)){var r=window.URL||window.webkitURL||window,a=new window.Blob([t[n]],{type:"image/svg+xml"});i.Images[n].src=r.createObjectURL(a)}else i.Images[n].src=t[n];i.count++}};for(var a in t)r(a);return e&&"function"==typeof e&&i.isLoaded()&&e(),i.resolve&&i.isLoaded()&&(i.resolve(),i.resolve=null),i},n.reset=function(){var t=this||n;return t.Images={},t.count=0,t.loaded=0,t},n.getLoaded=function(){return(this||n).loaded},n.getCount=function(){return(this||n).count},n.isLoaded=function(){var t=this||n;return t.loaded===t.count},n.getImage=function(t){return"object"==typeof t?t:(this||n).Images[t]},n.isLoadedPromise=function(){var t=this||n;return!!t.isLoaded()||new Promise(function(e,i){t.resolve=e})},n.Images={},n.count=0,n.loaded=0;var r=function(){this.layer=[],this.isFunction=[],this.start=0,this.nextFree=0};r.prototype.addElement=function(t){return this.addElementForId(t),t},r.prototype.addElements=function(t){return this.addElementsForIds(t),t},r.prototype.addElementForId=function(t){var e=this.layer.length,i=this.nextFree;this.layer[i]=t,this.isFunction[i]="function"==typeof t,e===i&&e++;for(var n=this.nextFree+1;n!==e&&layer[n];)n++;return this.nextFree=n,this.start>i&&(this.start=i),i},r.prototype.addElementsForIds=function(t){var e=this,i=this.layer.length;return i===this.nextFree?(this.layer=this.layer.concat(t),this.nextFree=this.layer.length,t.forEach(function(t,n){e.isFunction[i+n]="function"==typeof t}),Array.from({length:t.length},function(t,e){return e+i})):t.map(function(t){return e.addElement(t)})},r.prototype.getById=function(t){return this.layer[t]},r.prototype.getIdByElement=function(t){return this.layer.indexOf(t)},r.prototype.deleteByElement=function(t){var e=this.getIdByElement(t);e>=0&&this.deleteById(e)},r.prototype.deleteById=function(t){var e=this.layer.length-1;if(e>0&&t===e){for(this.layer[t]=null;e&&!this.layer[e-1];)e--;this.layer.length=e,this.isFunction.length=e,this.nextFree=Math.min(this.nextFree,e),this.start=Math.min(this.start,e)}else this.layer[t]=null,this.nextFree=Math.min(this.nextFree,t),this.start===t&&(this.start=t+1)},r.prototype.forEach=function(t){var e,i,n=this.layer.length;for(e=this.start;e<n;e++)(i=this.layer[e])&&t({index:e,element:i,isFunction:this.isFunction[e],layer:this})},r.prototype.count=function(){for(var t=0,e=this.layer.length,i=this.start;i<e;i++)this.layer[i]&&t++;return t},r.prototype.clear=function(){this.layer=[],this.isFunction=[],this.start=0,this.nextFree=0};var a=function(){this.layers=[]};function o(t,e){return null==t||""===t?e:t}a.prototype.addLayer=function(){return this.layers[this.layers.length]=new r,this.layers[this.layers.length-1]},a.prototype.addLayers=function(t){void 0===t&&(t=1);var e=Array.from({length:t},function(t){return new r});return this.layers=this.layers.concat(e),e},a.prototype.addLayerForId=function(){return this.layers[this.layers.length]=new r,this.layers.length-1},a.prototype.addLayersForIds=function(t){var e=this;void 0===t&&(t=1);var i=Array.from({length:t},function(t,i){return i+e.layers.length});return this.layers=this.layers.concat(Array.from({length:t},function(t){return new r})),i},a.prototype.getById=function(t){return this.layers[t]},a.prototype.forEach=function(t){var e,i=this.layers.length;for(e=0;e<i;e++)this.layers[e].forEach(t)},a.prototype.count=function(){return this.layers.length},a.prototype.clear=function(){this.layers=[]};var s=function(t){this.configuration="function"==typeof t?new t:t,this.layerManager=new a,this.totalTimePassed=0,this.engine=null,this.initDone=!1,this.additionalModifier=void 0,this.tickChunk=o(e(this.configuration.tickChunk),100/6),this.maxSkippedTickChunk=o(e(this.configuration.maxSkippedTickChunk),3),this.tickChunkTolerance=o(e(this.configuration.tickChunkTolerance),.1)};s.prototype.currentTime=function(){return window.performance?performance.now():Date.now()},s.prototype.clampTime=function(t){var e=2e3;return this.tickChunk&&(e=this.tickChunk*this.maxSkippedTickChunk),t>e?e:t},s.prototype.shiftTime=function(t){return this.configuration.fixedUpdate?-t%this.tickChunk:0},s.prototype.callInit=function(t,i,r){var a=this;this.engine=r,this.resize(t);var o=e(this.configuration.images);o&&n.add(o),Promise.resolve(this.configuration.init&&this.configuration.init({engine:r,output:t,scene:this,parameter:i,imageManager:n})).then(function(t){return a.initDone=!0})},s.prototype.resize=function(t){var e=this;this.additionalModifier={alpha:1,x:0,y:0,width:t.width,height:t.height,widthInPixel:t.width,heightInPixel:t.height,visibleScreen:{x:0,y:0,width:t.width,height:t.height}},this.layerManager.forEach(function(i){i.isFunction||i.element.resize(t,e.additionalModifier)})},s.prototype.destroy=function(t){var e=this.configuration.destroy&&this.configuration.destroy({engine:this.engine,scene:this,output:t});return this.initDone=!1,e},s.prototype.loadingScreen=function(t,e){if(this.configuration.loading)return this.configuration.loading({engine:this.engine,scene:this,output:t,progress:e});var i=t.context,n="number"==typeof e?Math.max(1,e*t.h):t.h;i.globalCompositeOperation="source-over",i.globalAlpha=1,i.clearRect(0,0,t.w,t.h),i.fillStyle="#aaa",i.fillRect(0,t.height/2-n/2,t.width,n),i.font="20px Georgia",i.fillStyle="#fff",i.textAlign="left",i.textBaseline="bottom";var r=e;isNaN(parseFloat(e))||isNaN(e-0)||(r="Loading "+Math.round(100*e)+"%"),i.fillText(r,10+3*Math.random(),t.height-10+3*Math.random()),this.engine&&this.engine.normalizeContext(i)},s.prototype.callLoading=function(t){if(n.isLoaded()&&this.initDone)return!0;var e=n.getCount()?n.getLoaded()/n.getCount():"Loading...";return this.loadingScreen(t,e),!1},s.prototype.move=function(t,e){if(this.totalTimePassed+=e,e<0?(this.reset(t),e=this.totalTimePassed):this.configuration.endTime&&this.configuration.endTime<=this.totalTimePassed&&(e-=this.totalTimePassed-this.configuration.endTime,this.totalTimePassed=this.configuration.endTime,this.configuration.end&&this.configuration.end({engine:this.engine,scene:this,output:t,timePassed:e,totalTimePassed:this.totalTimePassed})),this.configuration.fixedUpdate)if(this.tickChunk){if(e>=this.tickChunk-this.tickChunkTolerance)for(var i=0,n=Math.min(this.maxSkippedTickChunk,Math.floor(e/this.tickChunk));i<n;i++)this.configuration.fixedUpdate({engine:this.engine,scene:this,layerManager:this.layerManager,output:t,timePassed:e,totalTimePassed:this.totalTimePassed})}else this.configuration.fixedUpdate({engine:this.engine,scene:this,layerManager:this.layerManager,output:t,timePassed:e,totalTimePassed:this.totalTimePassed});this.configuration.update&&this.configuration.update({engine:this.engine,scene:this,layerManager:this.layerManager,output:t,timePassed:e,totalTimePassed:this.totalTimePassed}),this.layerManager.forEach(function(t){var i=t.layer,n=t.index;t.isFunction||t.element.animate(e)&&i.deleteById(n)})},s.prototype.draw=function(t){var e=this;this.layerManager.forEach(function(i){var n=i.layer,r=i.element,a=i.index;i.isFunction?r({engine:e.engine,scene:e,layerManager:e.layerManager,layer:n,output:t,totalTimePassed:e.totalTimePassed})&&n.deleteById(a):r.draw(t.context,e.additionalModifier)})},s.prototype.reset=function(t){var e=this.configuration.reset?this.configuration.reset({engine:this.engine,scene:this,layerManager:this.layerManager,output:t}):new a;if(Array.isArray(e)){var i=e;e=new a,i.forEach(function(t){e.addLayer().addElements(t)})}e&&(this.layerManager=e)};var h=function(t){function e(e){t.call(this,e),this.audioStartTime=null,this.audioPosition=null,this.enableAndroidHack=!1,this.audioElement=this.configuration.audioElement}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.currentTime=function(){var e=t.prototype.currentTime.call(this);if(this.audioElement){if(this.enableAndroidHack){if(null===this.audioStartTime)return this.audioStartTime=e,this.audioPosition=this.audioElement.currentTime,1e3*this.audioElement.currentTime;if("playing"===this.audioElement.controller.playbackState){if(this.audioElement.currentTime===this.audioPosition)return 1e3*this.audioPosition+Math.min(260,e-this.audioStartTime);if(this.audioElement.currentTime-this.audioPosition<.5&&this.audioElement.currentTime>this.audioPosition&&e-this.audioStartTime<350)return this.audioStartTime=this.audioStartTime+1e3*(this.audioElement.currentTime-this.audioPosition),this.audioPosition=this.audioElement.currentTime,1e3*this.audioPosition+e-this.audioStartTime}return this.audioStartTime=e,this.audioPosition=1e3*(this.audioElement.ended?this.audioElement.duration:this.audioElement.currentTime),1e3*this.audioPosition}return 1e3*(this.audioElement.ended?this.audioElement.duration:this.audioElement.currentTime)}return e},e.prototype.clampTime=function(t){return t},e.prototype.shiftTime=function(t){return 0},e.prototype.callInit=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return this.audioElement&&(this.audioElement.canPlayType("audio/mp3").match(/maybe|probably/i),"function"==typeof MediaController&&(this.audioElement.controller=new MediaController,this.enableAndroidHack=!0),this.audioElement.preload="auto",this.audioElement.load()),t.prototype.callInit.apply(this,e)},e.prototype.callLoading=function(e){var i=t.prototype.callLoading.call(this,e);if(i&&this.audioElement){if(!(this.audioElement.readyState>=this.audioElement.HAVE_ENOUGH_DATA))return this.loadingScreen(e,"Waiting for Audio"),!1;var n=this.audioElement.play();n&&n.catch(function(t){}),this.configuration.endTime||(this.configuration.endTime=1e3*this.audioElement.duration),this.loadingScreen(e,"Click to play")}return i},e}(s);function u(){this.reset()}u.prototype.reset=function(){return this.m=[1,0,0,1,0,0],this},u.prototype.multiply=function(t){var e=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],n=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=e,this.m[2]=i,this.m[3]=n,this.m[4]=r,this.m[5]=a,this},u.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=-this.m[1]*t,i=-this.m[2]*t,n=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=e,this.m[2]=i,this.m[3]=n,this.m[4]=r,this.m[5]=a,this},u.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[1]*e+this.m[3]*i,r=this.m[0]*-i+this.m[2]*e,a=this.m[1]*-i+this.m[3]*e;return this.m[0]=this.m[0]*e+this.m[2]*i,this.m[1]=n,this.m[2]=r,this.m[3]=a,this},u.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},u.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},u.prototype.transformPoint=function(t,e){var i=t;return[t=i*this.m[0]+e*this.m[2]+this.m[4],e=i*this.m[1]+e*this.m[3]+this.m[5]]},u.prototype.clone=function(){var t=new u;return t.m=this.m.slice(0),t};var c=function(t){function e(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.apply(this,e),this.transform=null,this.transformInvert=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._getViewport=function(){if(!this.engine)return new u;if(!this.transform){var t=this.engine._output.width/2,e=this.engine._output.height/2,i=this.engine._output.ratio>1?t:e;this.transform=(new u).translate(t,e).scale(i,i),this.transformInvert=null}return this.transform},e.prototype.resize=function(t){var e=this;this.transform=null,this.transformInvert=null,this.additionalModifier={alpha:1,x:-1,y:-1,width:2,height:2,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:t.width/t.canvas.clientWidth};var i=this.transformPoint(0,0,1),n=i[0],r=i[1],a=this.transformPoint(t.width,t.height,1);this.additionalModifier.visibleScreen={x:n,y:r,width:a[0]-n,height:a[1]-r},this.layerManager.forEach(function(i){i.isFunction||i.element.resize(t,e.additionalModifier)})},e.prototype.transformPoint=function(t,e,i){return void 0===i&&(i=this.additionalModifier.scaleCanvas),this.transformInvert||(this.transformInvert=this._getViewport().clone().invert()),this.transformInvert.transformPoint(t*i,e*i)},e.prototype.draw=function(e){var i;e.context.save(),(i=e.context).setTransform.apply(i,this._getViewport().m),t.prototype.draw.call(this,e),e.context.restore()},e}(s),l=function(t){function e(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.apply(this,e),this.transform=null,this.transformInvert=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._getViewport=function(){if(!this.engine)return new Transform;if(!this.transform){var t=this.engine._output.width/2,e=this.engine._output.height/2,i=this.engine._output.ratio>1?t:e;this.transform=(new Transform).translate(t,e).scale(i,i),this.transformInvert=null}return this.transform},e.prototype.resize=function(t){var e=this;this.transform=null,this.transformInvert=null,this.additionalModifier={alpha:1,x:-1,y:-1,width:2,height:2,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:t.width/t.canvas.clientWidth};var i=this.transformPoint(0,0,1),n=i[0],r=i[1],a=this.transformPoint(t.width,t.height,1);this.additionalModifier.visibleScreen={x:n,y:r,width:a[0]-n,height:a[1]-r},this.layerManager.forEach(function(i){i.isFunction||i.element.resize(t,e.additionalModifier)})},e.prototype.transformPoint=function(t,e,i){return void 0===i&&(i=this.additionalModifier.scaleCanvas),this.transformInvert||(this.transformInvert=this._getViewport().clone().invert()),this.transformInvert.transformPoint(t*i,e*i)},e.prototype.draw=function(e){var i;e.context.save(),(i=e.context).setTransform.apply(i,this._getViewport().m),t.prototype.draw.call(this,e),e.context.restore()},e}(h),p={Default:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(s,[null].concat(t)))},Audio:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(h,[null].concat(t)))},Norm:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(c,[null].concat(t)))},NormAudio:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(l,[null].concat(t)))}},f=function(t){this.duration=e(t)};f.prototype.run=function(t,e){return this.duration?e-this.duration:-1};var d=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=0;"number"==typeof t[0]&&(i=t.shift()),this.sequences=t.map(function(t){Array.isArray(t)||(t=[t]);var e=i;return"number"==typeof t[0]&&(e=t.shift()),{position:0,timelapsed:-e,sequence:t.map(function(t){return"function"!=typeof t.run?"number"==typeof t?new f(t):{run:t}:t}).filter(function(t){return"function"==typeof t.run}),label:t.reduce(function(t,e,i){return"string"==typeof e&&(t[e]=i-Object.keys(t).length),t},{}),enabled:!0}}),this.lastTimestamp=0,this.enabled=!0};d.prototype.reset=function(t){void 0===t&&(t=0),this.sequences.forEach(function(e){e.enabled=!0,e.position=0,e.timelapsed=t,e.sequence[0]&&e.sequence[0].reset&&e.sequence[0].reset(t)}),this.enabled=!0},d.prototype.play=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=0),t){var i=this.sequences.reduce(function(i,n){return n.label.hasOwnProperty(t)?(i=!0,n.position=n.label[t],n.enabled=!0,n.timelapsed=e,n.sequence[n.position]&&n.sequence[n.position].reset&&n.sequence[n.position].reset()):i|=n.sequence.find(function(i){return i.play&&i.play(t,e)})>=0,i},!1);return i&&(this.enabled=!0),i}return this.sequences.forEach(function(t){return t.enabled=!0}),this.enabled=!0,!0},d.prototype.runSequence=function(t,e,i){for(var n=i;e.sequence[e.position]&&n>=0;){if(e.timelapsed+=n,e.timelapsed<0)return-1;if(!0===(n=e.sequence[e.position].run(t,e.timelapsed)))n=0;else{if(!1===n)return-1;if(n===d.TIMELAPSE_TO_FORCE_DISABLE)return e.enabled=!1,this.enabled=!1,i;if(n===d.TIMELAPSE_TO_STOP)return e.enabled=!1,i;if(n===d.TIMELAPSE_TO_REMOVE)return!0}if(n>=0&&(e.position=(e.position+1)%e.sequence.length,e.sequence[e.position]&&e.sequence[e.position].reset&&e.sequence[e.position].reset(),e.timelapsed=0,0===e.position))return e.enabled=!1,n}return n},d.prototype.run=function(t,e,i){var n=e;if(i||(n=e-this.lastTimestamp,this.lastTimestamp=e),!this.enabled)return n;for(var r=this.sequences.length,a=0,o=Infinity,s=0;s<r;s++)if(this.sequences[s].enabled){var h=this.runSequence(t,this.sequences[s],n);if(!0===h)return!0;o=Math.min(o,h)}else a++;return a===r?(this.enabled=!1,n):o},d.TIMELAPSE_TO_FORCE_DISABLE="FORCE_DISABLE",d.TIMELAPSE_TO_STOP="STOP",d.TIMELAPSE_TO_REMOVE="REMOVE";var m=function(t){var i=this,n=this.getParameterList();Object.keys(n).forEach(function(r){var a=n[r];i[r]="function"==typeof a?a(t[r],t,i):o(e(t[r]),a)})};m.prototype.getBaseParameterList=function(){return{animation:function(t,i){var n=e(t);return Array.isArray(n)?new d(n):"object"==typeof n?n:void 0},enabled:!0}},m.prototype.getParameterList=function(){return Object.assign({},this.getBaseParameterList(),{x:0,y:0,rotation:function(t,e){return o(t,o(e.rotationInRadian,.017453292519943295*o(e.rotationInDegree,0)))},scaleX:1,scaleY:1,alpha:1,compositeOperation:"source-over",color:"#fff"})},m.prototype.animate=function(t){return!(!this.animation||!0!==this.animation.run(this,t,!0)||(this.enabled=!1,0))},m.prototype.play=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),this.animation&&this.animation.play&&this.animation.play(t,e)},m.prototype.resize=function(t,e){},m.prototype.draw=function(t,e){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*e.alpha,t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.beginPath(),t.fillStyle=this.color,t.arc(0,0,1,Math.PI/2+this.rotation,2.5*Math.PI-this.rotation,!1),t.fill(),t.closePath(),t.restore())};var g=function(t){function e(e){"function"==typeof e&&(e={callback:e}),t.call(this,e),this.timePassed=0,this.deltaTime=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},this.getBaseParameterList(),{callback:function(t){return void 0===typeof t?function(){}:t}})},e.prototype.animate=function(e){return this.enabled&&(this.timePassed+=e,this.deltaTime+=e),t.prototype.animate.call(this,e)},e.prototype.draw=function(t,e){this.enabled&&this.callback(t,this.timePassed,e,this),this.deltaTime=0},e}(m),v=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{sprite:[]})},e.prototype.animate=function(e){var i=t.prototype.animate.call(this,e),n=!1;if(this.enabled)for(var r in this.sprite)n=n||!0===this.sprite[r].animate(e);return this.animation?i:(n&&(this.enabled=!1),n)},e.prototype.play=function(t,e){for(var i in void 0===t&&(t=""),void 0===e&&(e=0),this.animation&&this.animation.play&&this.animation.play(t,e),this.sprite)this.sprite[i].play&&this.sprite[i].play(t,e)},e.prototype.draw=function(t,e){if(this.enabled){for(var i in this.alpha<1&&((e=Object.assign({},e)).alpha*=this.alpha),t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.sprite)this.sprite[i].draw(t,e);t.restore()}},e}(m),y=function(t){function i(e){t.call(this,e),this.currentGridSize=!1}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{x:void 0,y:void 0,width:void 0,height:void 0,gridSize:void 0,norm:function(t,i,n){return o(e(t),void 0===n.x&&void 0===n.y&&void 0===n.width&&void 0===n.height)}})},i.prototype.generateTempCanvas=function(t,e){var i=e.widthInPixel||t.canvas.width,n=e.heightInPixel||t.canvas.height;this.temp_canvas=document.createElement("canvas"),this.gridSize?(this.currentGridSize=this.gridSize,this.temp_canvas.width=Math.round(this.currentGridSize),this.temp_canvas.height=Math.round(this.currentGridSize)):(this.temp_canvas.width=Math.round(i/this.scaleX),this.temp_canvas.height=Math.round(n/this.scaleY)),this.tctx=this.temp_canvas.getContext("2d"),this.tctx.globalCompositeOperation="source-over",this.tctx.globalAlpha=1},i.prototype.normalizeFullScreen=function(t){(void 0===this.x||this.norm)&&(this.x=t.visibleScreen.x),(void 0===this.y||this.norm)&&(this.y=t.visibleScreen.y),(void 0===this.width||this.norm)&&(this.width=t.visibleScreen.width),(void 0===this.height||this.norm)&&(this.height=t.visibleScreen.height)},i.prototype.resize=function(t,e){if(this.temp_canvas&&this.currentGridSize!==this.gridSize){var i=this.temp_canvas;this.generateTempCanvas(t,e),this.tctx.globalCompositeOperation="copy",this.tctx.drawImage(i,0,0,i.width,i.height,0,0,this.temp_canvas.width,this.temp_canvas.height),this.tctx.globalCompositeOperation="source-over"}this.normalizeFullScreen(e)},i.prototype.draw=function(t,e){if(this.enabled){this.temp_canvas||(this.generateTempCanvas(t,e),this.normalizeFullScreen(e)),this.gridSize&&this.currentGridSize!==this.gridSize&&this.resize(t,e);var i=this.width,n=this.height,r=i/2,a=n/2,o=this.temp_canvas.width,s=this.temp_canvas.height;for(var h in this.sprite)this.sprite[h].draw(this.tctx,{alpha:1,x:0,y:0,width:o,height:s,widthInPixel:o,heightInPixel:s,visibleScreen:{x:0,y:0,width:o,height:s}});this.additionalBlur&&this.additionalBlur(o,s,e),t.save(),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*e.alpha,t.translate(this.x+r,this.y+a),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),t.drawImage(this.temp_canvas,0,0,this.temp_canvas.width,this.temp_canvas.height,-r,-a,i,n),t.restore()}},i}(v),b=function(t){function i(i){t.call(this,i.self||{});var n={},r={};for(var a in i)["self","class","count"].includes(a)||("function"==typeof i[a]?r[a]=i[a]:n[a]=i[a]);var s=o(e(i.count),1);this.sprite=[];for(var h=0;h<s;h++){var u=i.class,c={};for(var l in n)c[l]=n[l];for(var p in r)c[p]=r[p].call(null,h);this.sprite[h]=new u(c)}}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i}(v),w=function(t){function i(e){t.call(this,e),this.currentGridSize=!1}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{x:void 0,y:void 0,width:void 0,height:void 0,gridSize:void 0,darker:0,pixel:!1,clear:!1,norm:function(t,i,n){return o(e(t),void 0===n.x&&void 0===n.y&&void 0===n.width&&void 0===n.height)}})},i.prototype.generateTempCanvas=function(t,e){var i=e.widthInPixel||t.canvas.width,n=e.heightInPixel||t.canvas.height;this.temp_canvas=document.createElement("canvas"),this.gridSize?(this.currentGridSize=this.gridSize,this.temp_canvas.width=Math.round(this.currentGridSize),this.temp_canvas.height=Math.round(this.currentGridSize)):(this.temp_canvas.width=Math.ceil(i/this.scaleX),this.temp_canvas.height=Math.ceil(n/this.scaleY)),this.tctx=this.temp_canvas.getContext("2d"),this.tctx.globalCompositeOperation="source-over",this.tctx.globalAlpha=1},i.prototype.normalizeFullScreen=function(t){(void 0===this.x||this.norm)&&(this.x=t.visibleScreen.x),(void 0===this.y||this.norm)&&(this.y=t.visibleScreen.y),(void 0===this.width||this.norm)&&(this.width=t.visibleScreen.width),(void 0===this.height||this.norm)&&(this.height=t.visibleScreen.height)},i.prototype.resize=function(t,e){if(this.temp_canvas&&this.currentGridSize!==this.gridSize){var i=this.temp_canvas;this.generateTempCanvas(t,e),this.tctx.globalCompositeOperation="copy",this.tctx.drawImage(i,0,0,i.width,i.height,0,0,this.temp_canvas.width,this.temp_canvas.height),this.tctx.globalCompositeOperation="source-over"}this.normalizeFullScreen(e)},i.prototype.draw=function(t,e){if(this.enabled){this.temp_canvas||(this.generateTempCanvas(t,e),this.normalizeFullScreen(e)),this.gridSize&&this.currentGridSize!==this.gridSize&&this.resize(t,e);var i=this.alpha*e.alpha,n=this.width,r=this.height,a=this.temp_canvas.width,o=this.temp_canvas.height;i>0&&a&&o&&(this.tctx.globalCompositeOperation="copy",this.tctx.globalAlpha=1,this.tctx.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height,0,0,a,o),this.darker>0&&(this.tctx.globalCompositeOperation=this.clear?"source-atop":"source-over",this.tctx.fillStyle="rgba(0,0,0,"+this.darker+")",this.tctx.fillRect(0,0,a,o)),this.additionalBlur&&this.additionalBlur(a,o,e),this.clear&&t.clearRect(this.x,this.y,n,r),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=i,t.imageSmoothingEnabled=!this.pixel,t.drawImage(this.temp_canvas,0,0,a,o,this.x,this.y,n,r),t.imageSmoothingEnabled=!0)}else this.clear&&(this.x||(this.x=e.x),this.y||(this.y=e.y),this.width||(this.width=e.width),this.height||(this.height=e.height),t.clearRect(this.x,this.y,this.width,this.height))},i}(m),_=function(t){function i(e){t.call(this,e)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{image:function(t){return n.getImage(e(t))},position:i.CENTER,frameX:0,frameY:0,frameWidth:0,frameHeight:0,norm:!1})},i.prototype.resize=function(){this.normScale=void 0},i.prototype.draw=function(t,e){if(this.enabled&&this.image){var n=this.frameWidth||this.image.width,r=this.frameHeight||this.image.height;this.normScale||(this.normScale=this.norm?Math.min(e.width/n,e.height/r):1);var a=n*this.normScale*this.scaleX,o=r*this.normScale*this.scaleY;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*e.alpha,0==this.rotation?this.position===i.LEFT_TOP?t.drawImage(this.image,this.frameX,this.frameY,n,r,this.x,this.y,a,o):t.drawImage(this.image,this.frameX,this.frameY,n,r,this.x-a/2,this.y-o/2,a,o):(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.drawImage(this.image,this.frameX,this.frameY,n,r,-a/2,-o/2,a,o),t.restore())}},i}(m);_.LEFT_TOP=0,_.CENTER=1;var M=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{text:void 0,font:"26px monospace",position:e.CENTER,color:void 0,borderColor:void 0,lineWidth:1})},e.prototype.draw=function(t,i){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.save(),e.LEFT_TOP&&(t.textAlign="left",t.textBaseline="top"),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),t.font=this.font,this.color&&(t.fillStyle=this.color,t.fillText(this.text,0,0)),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.strokeText(this.text,0,0)),t.restore())},e}(m);function x(t,e){return t(e={exports:{}},e.exports),e.exports}M.LEFT_TOP=0,M.CENTER=1,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},T=x(function(t){var e=Array.prototype.concat,i=Array.prototype.slice,n=t.exports=function(t){for(var n,r=[],a=0,o=t.length;a<o;a++){var s=t[a];(n=s)&&"string"!=typeof n&&(n instanceof Array||Array.isArray(n)||n.length>=0&&(n.splice instanceof Function||Object.getOwnPropertyDescriptor(n,n.length-1)&&"String"!==n.constructor.name))?r=e.call(r,i.call(s)):r.push(s)}return r};n.wrap=function(t){return function(){return t(n(arguments))}}}),E=x(function(t){var e={};for(var i in S)S.hasOwnProperty(i)&&(e[S[i]]=i);var n=t.exports={to:{},get:{}};function r(t,e,i){return Math.min(Math.max(e,t),i)}function a(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}n.get=function(t){var e,i;switch(t.substring(0,3).toLowerCase()){case"hsl":e=n.get.hsl(t),i="hsl";break;case"hwb":e=n.get.hwb(t),i="hwb";break;default:e=n.get.rgb(t),i="rgb"}return e?{model:i,value:e}:null},n.get.rgb=function(t){if(!t)return null;var e,i,n,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=e[2],e=e[1],i=0;i<3;i++){var o=2*i;a[i]=parseInt(e.slice(o,o+2),16)}n&&(a[3]=Math.round(parseInt(n,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(n=(e=e[1])[3],i=0;i<3;i++)a[i]=parseInt(e[i]+e[i],16);n&&(a[3]=Math.round(parseInt(n+n,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<3;i++)a[i]=parseInt(e[i+1],0);e[4]&&(a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(a=S[e[1]])?(a[3]=1,a):null:null;for(i=0;i<3;i++)a[i]=Math.round(2.55*parseFloat(e[i+1]));e[4]&&(a[3]=parseFloat(e[4]))}for(i=0;i<3;i++)a[i]=r(a[i],0,255);return a[3]=r(a[3],0,1),a},n.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,r(parseFloat(e[2]),0,100),r(parseFloat(e[3]),0,100),r(isNaN(i)?1:i,0,1)]}return null},n.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,r(parseFloat(e[2]),0,100),r(parseFloat(e[3]),0,100),r(isNaN(i)?1:i,0,1)]}return null},n.to.hex=function(){var t=T(arguments);return"#"+a(t[0])+a(t[1])+a(t[2])+(t[3]<1?a(Math.round(255*t[3])):"")},n.to.rgb=function(){var t=T(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},n.to.rgb.percent=function(){var t=T(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+i+"%, "+n+"%)":"rgba("+e+"%, "+i+"%, "+n+"%, "+t[3]+")"},n.to.hsl=function(){var t=T(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},n.to.hwb=function(){var t=T(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},n.to.keyword=function(t){return e[t.slice(0,3)]}}),P=x(function(t){var e={};for(var i in S)S.hasOwnProperty(i)&&(e[S[i]]=i);var n=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in n)if(n.hasOwnProperty(r)){if(!("channels"in n[r]))throw new Error("missing channels property: "+r);if(!("labels"in n[r]))throw new Error("missing channel labels property: "+r);if(n[r].labels.length!==n[r].channels)throw new Error("channel and label counts mismatch: "+r);var a=n[r].channels,o=n[r].labels;delete n[r].channels,delete n[r].labels,Object.defineProperty(n[r],"channels",{value:a}),Object.defineProperty(n[r],"labels",{value:o})}n.rgb.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,a=t[2]/255,o=Math.min(n,r,a),s=Math.max(n,r,a),h=s-o;return s===o?e=0:n===s?e=(r-a)/h:r===s?e=2+(a-n)/h:a===s&&(e=4+(n-r)/h),(e=Math.min(60*e,360))<0&&(e+=360),i=(o+s)/2,[e,100*(s===o?0:i<=.5?h/(s+o):h/(2-s-o)),100*i]},n.rgb.hsv=function(t){var e,i,n,r,a,o=t[0]/255,s=t[1]/255,h=t[2]/255,u=Math.max(o,s,h),c=u-Math.min(o,s,h),l=function(t){return(u-t)/6/c+.5};return 0===c?r=a=0:(a=c/u,e=l(o),i=l(s),n=l(h),o===u?r=n-i:s===u?r=1/3+e-n:h===u&&(r=2/3+i-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*a,100*u]},n.rgb.hwb=function(t){var e=t[0],i=t[1],r=t[2];return[n.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(i,r))*100,100*(r=1-1/255*Math.max(e,Math.max(i,r)))]},n.rgb.cmyk=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-r)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},n.rgb.keyword=function(t){var i=e[t];if(i)return i;var n,r,a,o=Infinity;for(var s in S)if(S.hasOwnProperty(s)){var h=(r=t,a=S[s],Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)+Math.pow(r[2]-a[2],2));h<o&&(o=h,n=s)}return n},n.keyword.rgb=function(t){return S[t]},n.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]},n.rgb.lab=function(t){var e=n.rgb.xyz(t),i=e[0],r=e[1],a=e[2];return r/=100,a/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(i-r),200*(r-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},n.hsl.rgb=function(t){var e,i,n,r,a,o=t[0]/360,s=t[1]/100,h=t[2]/100;if(0===s)return[a=255*h,a,a];e=2*h-(i=h<.5?h*(1+s):h+s-h*s),r=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0&&n++,n>1&&n--,r[u]=255*(a=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e);return r},n.hsl.hsv=function(t){var e=t[0],i=t[1]/100,n=t[2]/100,r=i,a=Math.max(n,.01);return i*=(n*=2)<=1?n:2-n,r*=a<=1?a:2-a,[e,100*(0===n?2*r/(a+r):2*i/(n+i)),(n+i)/2*100]},n.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,r=Math.floor(e)%6,a=e-Math.floor(e),o=255*n*(1-i),s=255*n*(1-i*a),h=255*n*(1-i*(1-a));switch(n*=255,r){case 0:return[n,h,o];case 1:return[s,n,o];case 2:return[o,n,h];case 3:return[o,s,n];case 4:return[h,o,n];case 5:return[n,o,s]}},n.hsv.hsl=function(t){var e,i,n,r=t[0],a=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return n=(2-a)*o,i=a*s,[r,100*(i=(i/=(e=(2-a)*s)<=1?e:2-e)||0),100*(n/=2)]},n.hwb.rgb=function(t){var e,i,n,r,a,o,s,h=t[0]/360,u=t[1]/100,c=t[2]/100,l=u+c;switch(l>1&&(u/=l,c/=l),n=6*h-(e=Math.floor(6*h)),0!=(1&e)&&(n=1-n),r=u+n*((i=1-c)-u),e){default:case 6:case 0:a=i,o=r,s=u;break;case 1:a=r,o=i,s=u;break;case 2:a=u,o=i,s=r;break;case 3:a=u,o=r,s=i;break;case 4:a=r,o=u,s=i;break;case 5:a=i,o=u,s=r}return[255*a,255*o,255*s]},n.cmyk.rgb=function(t){var e=t[1]/100,i=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-n)+n)),255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n))]},n.xyz.rgb=function(t){var e,i,n,r=t[0]/100,a=t[1]/100,o=t[2]/100;return i=-.9689*r+1.8758*a+.0415*o,n=.0557*r+-.204*a+1.057*o,e=(e=3.2406*r+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},n.xyz.lab=function(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},n.lab.xyz=function(t){var e,i,n;e=t[1]/500+(i=(t[0]+16)/116),n=i-t[2]/200;var r=Math.pow(i,3),a=Math.pow(e,3),o=Math.pow(n,3);return i=r>.008856?r:(i-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=o>.008856?o:(n-16/116)/7.787,[e*=95.047,i*=100,n*=108.883]},n.lab.lch=function(t){var e,i=t[0],n=t[1],r=t[2];return(e=360*Math.atan2(r,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+r*r),e]},n.lch.lab=function(t){var e,i=t[1];return e=t[2]/360*2*Math.PI,[t[0],i*Math.cos(e),i*Math.sin(e)]},n.rgb.ansi16=function(t){var e=t[0],i=t[1],r=t[2],a=1 in arguments?arguments[1]:n.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},n.hsv.ansi16=function(t){return n.rgb.ansi16(n.hsv.rgb(t),t[2])},n.rgb.ansi256=function(t){var e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},n.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},n.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},n.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},n.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map(function(t){return t+t}).join(""));var n=parseInt(i,16);return[n>>16&255,n>>8&255,255&n]},n.rgb.hcg=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255,a=Math.max(Math.max(i,n),r),o=Math.min(Math.min(i,n),r),s=a-o;return e=s<=0?0:a===i?(n-r)/s%6:a===n?2+(r-i)/s:4+(i-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},n.hsl.hcg=function(t){var e,i=t[1]/100,n=t[2]/100,r=0;return(e=n<.5?2*i*n:2*i*(1-n))<1&&(r=(n-.5*e)/(1-e)),[t[0],100*e,100*r]},n.hsv.hcg=function(t){var e=t[2]/100,i=t[1]/100*e,n=0;return i<1&&(n=(e-i)/(1-i)),[t[0],100*i,100*n]},n.hcg.rgb=function(t){var e=t[1]/100,i=t[2]/100;if(0===e)return[255*i,255*i,255*i];var n,r=[0,0,0],a=t[0]/360%1*6,o=a%1,s=1-o;switch(Math.floor(a)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=s,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=s,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=s}return[255*(e*r[0]+(n=(1-e)*i)),255*(e*r[1]+n),255*(e*r[2]+n)]},n.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),n=0;return i>0&&(n=e/i),[t[0],100*n,100*i]},n.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],100*n,100*i]},n.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},n.hwb.hcg=function(t){var e=1-t[2]/100,i=e-t[1]/100,n=0;return i<1&&(n=(e-i)/(1-i)),[t[0],100*i,100*n]},n.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},n.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},n.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},n.gray.hsl=n.gray.hsv=function(t){return[0,0,t[0]]},n.gray.hwb=function(t){return[0,100,t[0]]},n.gray.cmyk=function(t){return[0,0,0,t[0]]},n.gray.lab=function(t){return[t[0],0,0]},n.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},n.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});function O(t,e){return function(i){return e(t(i))}}function k(t,e){for(var i=[e[t].parent,t],n=P[e[t].parent][t],r=e[t].parent;e[r].parent;)i.unshift(e[r].parent),n=O(P[e[r].parent][r],n),r=e[r].parent;return n.conversion=i,n}var I={};Object.keys(P).forEach(function(t){I[t]={},Object.defineProperty(I[t],"channels",{value:P[t].channels}),Object.defineProperty(I[t],"labels",{value:P[t].labels});var e=function(t){for(var e=function(t){var e=function(){for(var t={},e=Object.keys(P),i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var n=i.pop(),r=Object.keys(P[n]),a=r.length,o=0;o<a;o++){var s=r[o],h=e[s];-1===h.distance&&(h.distance=e[n].distance+1,h.parent=n,i.unshift(s))}return e}(t),i={},n=Object.keys(e),r=n.length,a=0;a<r;a++){var o=n[a];null!==e[o].parent&&(i[o]=k(o,e))}return i}(t);Object.keys(e).forEach(function(i){var n=e[i];I[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var n=i.length,r=0;r<n;r++)i[r]=Math.round(i[r]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(n),I[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)})});var z=I,C=[].slice,F=["keyword","gray","hex"],A={};Object.keys(z).forEach(function(t){A[C.call(z[t].labels).sort().join("")]=t});var L={};function j(t,e){if(!(this instanceof j))return new j(t,e);if(e&&e in F&&(e=null),e&&!(e in z))throw new Error("Unknown model: "+e);var i,n;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof j)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var r=E.get(t);if(null===r)throw new Error("Unable to parse color from string: "+t);this.model=r.model,this.color=r.value.slice(0,n=z[this.model].channels),this.valpha="number"==typeof r.value[n]?r.value[n]:1}else if(t.length){this.model=e||"rgb";var a=C.call(t,0,n=z[this.model].channels);this.color=D(a,n),this.valpha="number"==typeof t[n]?t[n]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var s=o.sort().join("");if(!(s in A))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=A[s];var h=z[this.model].labels,u=[];for(i=0;i<h.length;i++)u.push(t[h[i]]);this.color=D(u)}if(L[this.model])for(n=z[this.model].channels,i=0;i<n;i++){var c=L[this.model][i];c&&(this.color[i]=c(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function q(t,e,i){return(t=Array.isArray(t)?t:[t]).forEach(function(t){(L[t]||(L[t]=[]))[e]=i}),t=t[0],function(n){var r;return arguments.length?(i&&(n=i(n)),(r=this[t]()).color[e]=n,r):(r=this[t]().color[e],i&&(r=i(r)),r)}}function N(t){return function(e){return Math.max(0,Math.min(t,e))}}function D(t,e){for(var i=0;i<e;i++)"number"!=typeof t[i]&&(t[i]=0);return t}j.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in E.to?this:this.rgb(),i=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return E.to[e.model](i)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),i=1===e.valpha?e.color:e.color.concat(this.valpha);return E.to.rgb.percent(i)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=z[this.model].channels,i=z[this.model].labels,n=0;n<e;n++)t[i[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new j(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new j(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:q("rgb",0,N(255)),green:q("rgb",1,N(255)),blue:q("rgb",2,N(255)),hue:q(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:q("hsl",1,N(100)),lightness:q("hsl",2,N(100)),saturationv:q("hsv",1,N(100)),value:q("hsv",2,N(100)),chroma:q("hcg",1,N(100)),gray:q("hcg",2,N(100)),white:q("hwb",1,N(100)),wblack:q("hwb",2,N(100)),cyan:q("cmyk",0,N(100)),magenta:q("cmyk",1,N(100)),yellow:q("cmyk",2,N(100)),black:q("cmyk",3,N(100)),x:q("xyz",0,N(100)),y:q("xyz",1,N(100)),z:q("xyz",2,N(100)),l:q("lab",0,N(100)),a:q("lab",1),b:q("lab",2),keyword:function(t){return arguments.length?new j(t):z[this.model].keyword(this.color)},hex:function(t){return arguments.length?new j(t):E.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return j.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),i=e.color[0];return e.color[0]=i=(i=(i+t)%360)<0?360+i:i,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var i=t.rgb(),n=this.rgb(),r=void 0===e?.5:e,a=2*r-1,o=i.alpha()-n.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,h=1-s;return j.rgb(s*i.red()+h*n.red(),s*i.green()+h*n.green(),s*i.blue()+h*n.blue(),i.alpha()*r+n.alpha()*(1-r))}},Object.keys(z).forEach(function(t){if(-1===F.indexOf(t)){var e=z[t].channels;j.prototype[t]=function(){if(this.model===t)return new j(this);if(arguments.length)return new j(arguments,t);var i,n="number"==typeof arguments[e]?e:this.valpha;return new j((i=z[this.model][t].raw(this.color),Array.isArray(i)?i:[i]).concat(n),t)},j[t]=function(i){return"number"==typeof i&&(i=D(C.call(arguments),e)),new j(i,t)}}});var R=j,W=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.getGradientImage=function(t,i,n){var r,a,o=t>>4,s=i>>4,h=n>>4;if(!e.Gradient)for(e.Gradient=new Array(16),r=0;r<e.Gradient.length;r++)for(e.Gradient[r]=new Array(16),a=0;a<e.Gradient[r].length;a++)e.Gradient[r][a]=new Array(16);return e.Gradient[o][s][h]||(e.Gradient[o][s][h]=e.generateGradientImage(o,s,h)),e.Gradient[o][s][h]},e.generateGradientImage=function(t,e,i){var n=document.createElement("canvas");n.width=n.height=64;var r=n.getContext("2d");r.globalAlpha=1,r.globalCompositeOperation="source-over",r.clearRect(0,0,64,64);var a=r.createRadialGradient(32,32,0,32,32,32);return a.addColorStop(0,"rgba("+(16+(t<<4)-1)+","+(16+(e<<4)-1)+","+(16+(i<<4)-1)+",1)"),a.addColorStop(.3,"rgba("+(16+(t<<4)-1)+","+(16+(e<<4)-1)+","+(16+(i<<4)-1)+",0.4)"),a.addColorStop(1,"rgba("+(16+(t<<4)-1)+","+(16+(e<<4)-1)+","+(16+(i<<4)-1)+",0)"),r.fillStyle=a,r.fillRect(0,0,64,64),n},e.prototype.draw=function(t,i){if(this.enabled){this.color&&this.color.color||(this.color=R(this.color).rgb());var n=this.color.color;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.imageSmoothingEnabled=this.scaleX*i.widthInPixel/i.width>64,t.drawImage(e.getGradientImage(n[0],n[1],n[2]),0,0,64,64,this.x-this.scaleX/2,this.y-this.scaleY/2,this.scaleX,this.scaleY),t.imageSmoothingEnabled=!0}},e}(m);W.Gradient=null;var X=x(function(t,e){t.exports=function(){var t=2*Math.PI,e=function(t,e,i,n,r,a,o){var s=t.x,h=t.y;return{x:n*(s*=e)-r*(h*=i)+a,y:r*s+n*h+o}},i=function(t,e){var i=4/3*Math.tan(e/4),n=Math.cos(t),r=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:n-r*i,y:r+n*i},{x:a+o*i,y:o-a*i},{x:a,y:o}]},n=function(t,e,i,n){var r=t*n-e*i<0?-1:1,a=(t*i+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return a>1&&(a=1),a<-1&&(a=-1),r*Math.acos(a)},r=function(r){var a=r.px,o=r.py,s=r.cx,h=r.cy,u=r.rx,c=r.ry,l=r.xAxisRotation,p=void 0===l?0:l,f=r.largeArcFlag,d=void 0===f?0:f,m=r.sweepFlag,g=void 0===m?0:m,v=[];if(0===u||0===c)return[];var y=Math.sin(p*t/360),b=Math.cos(p*t/360),w=b*(a-s)/2+y*(o-h)/2,_=-y*(a-s)/2+b*(o-h)/2;if(0===w&&0===_)return[];u=Math.abs(u),c=Math.abs(c);var M=Math.pow(w,2)/Math.pow(u,2)+Math.pow(_,2)/Math.pow(c,2);M>1&&(u*=Math.sqrt(M),c*=Math.sqrt(M));var x=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),4!==i.length);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(e,i,r,a,o,s,h,u,c,l,p,f){var d=Math.pow(o,2),m=Math.pow(s,2),g=Math.pow(p,2),v=Math.pow(f,2),y=d*m-d*v-m*g;y<0&&(y=0),y/=d*v+m*g;var b=(y=Math.sqrt(y)*(h===u?-1:1))*o/s*f,w=y*-s/o*p,_=l*b-c*w+(e+r)/2,M=c*b+l*w+(i+a)/2,x=(p-b)/o,S=(f-w)/s,T=(-p-b)/o,E=(-f-w)/s,P=n(1,0,x,S),O=n(x,S,T,E);return 0===u&&O>0&&(O-=t),1===u&&O<0&&(O+=t),[_,M,P,O]}(a,o,s,h,u,c,d,g,y,b,w,_)),S=x[0],T=x[1],E=x[2],P=x[3],O=Math.max(Math.ceil(Math.abs(P)/(t/4)),1);P/=O;for(var k=0;k<O;k++)v.push(i(E,P)),E+=P;return v.map(function(t){var i=e(t[0],u,c,b,y,S,T),n=i.x,r=i.y,a=e(t[1],u,c,b,y,S,T),o=a.x,s=a.y,h=e(t[2],u,c,b,y,S,T);return{x1:n,y1:r,x2:o,y2:s,x:h.x,y:h.y}})},a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function h(t){var e=t[0][0],i=t[0][1],n=e,r=i;return t.forEach(function(t){var a=t[0],o=t[2],s=t[4],h=t[6],u=t[1],c=t[3],l=t[5],p=t[7];e=Math.min(e,a,o,s,h),i=Math.min(i,u,c,l,p),n=Math.max(n,a,o,s,h),r=Math.max(r,u,c,l,p)}),[e,i,n,r]}var u={};function c(t,e,i,n,r,a,o,s,h,u){var c=(i-t)*h+t,l=(n-e)*h+e,p=(r-i)*h+i,f=(a-n)*h+n,d=(p-c)*h+c,m=(f-l)*h+l,g=(((o-r)*h+r-p)*h+p-d)*h+d,v=(((s-a)*h+a-f)*h+f-m)*h+m;return u?[g,v,d,m,c,l,t,e]:[t,e,c,l,d,m,g,v]}return u.parser=function(t){var e=[];return t.replace(o,function(t,i,n){var r=i.toLowerCase();for(n=function(t){var e=t.match(s);return e?e.map(Number):[]}(n),"m"==r&&n.length>2&&(e.push([i].concat(n.splice(0,2))),r="l",i="m"==i?"l":"L");;){if(n.length==a[r])return n.unshift(i),e.push(n);if(n.length<a[r])throw new Error("malformed path data");e.push([i].concat(n.splice(0,a[r])))}}),e},u.lerpCurve=function(t,e,i){return u.lerpPoints(t[0],t[1],e[0],e[1],i).concat(u.lerpPoints(t[2],t[3],e[2],e[3],i)).concat(u.lerpPoints(t[4],t[5],e[4],e[5],i)).concat(u.lerpPoints(t[6],t[7],e[6],e[7],i))},u.lerpPoints=function(t,e,i,n,r){return[t+(i-t)*r,e+(n-e)*r]},u.q2b=function(t,e,i,n,r,a){return[t,e,(t+2*i)/3,(e+2*n)/3,(r+2*i)/3,(a+2*n)/3,r,a]},u.path2shapes=function(t){for(var e=u.parser(t),i=0,n=0,a=0,o=e.length,s=[],h=null,c=void 0,l=void 0,p=void 0,f=void 0,d=void 0,m=void 0,g=void 0;a<o;a++){var v=e[a],y=e[a-1];switch(v[0]){case"m":s[d=s.length]=[],h=s[d],i+=v[1],n+=v[2];break;case"M":s[d=s.length]=[],h=s[d],i=v[1],n=v[2];break;case"l":h.push([i,n,i,n,i,n,i+v[1],n+v[2]]),i+=v[1],n+=v[2];break;case"L":h.push([i,n,v[1],v[2],v[1],v[2],v[1],v[2]]),i=v[1],n=v[2];break;case"h":h.push([i,n,i,n,i,n,i+v[1],n]),i+=v[1];break;case"H":h.push([i,n,v[1],n,v[1],n,v[1],n]),i=v[1];break;case"v":h.push([i,n,i,n,i,n,i,n+v[1]]),n+=v[1];break;case"V":h.push([i,n,i,v[1],i,v[1],i,v[1]]),n=v[1];break;case"C":h.push([i,n,v[1],v[2],v[3],v[4],v[5],v[6]]),i=v[5],n=v[6];break;case"S":"C"===y[0]||"c"===y[0]?h.push([i,n,i+y[5]-y[3],n+y[6]-y[4],v[1],v[2],v[3],v[4]]):"S"!==y[0]&&"s"!==y[0]||h.push([i,n,i+y[3]-y[1],n+y[4]-y[2],v[1],v[2],v[3],v[4]]),i=v[3],n=v[4];break;case"c":h.push([i,n,i+v[1],n+v[2],i+v[3],n+v[4],i+v[5],n+v[6]]),i+=v[5],n+=v[6];break;case"s":"C"===y[0]||"c"===y[0]?h.push([i,n,i+y[5]-y[3],n+y[6]-y[4],i+v[1],n+v[2],i+v[3],n+v[4]]):"S"!==y[0]&&"s"!==y[0]||h.push([i,n,i+y[3]-y[1],n+y[4]-y[2],i+v[1],n+v[2],i+v[3],n+v[4]]),i+=v[3],n+=v[4];break;case"a":g=(m=r({rx:v[1],ry:v[2],px:i,py:n,xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5],cx:i+v[6],cy:i+v[7]}))[m.length-1],m.forEach(function(t,e){h.push(0===e?[i,n,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[m[e-1].x,m[e-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),i=g.x,n=g.y;break;case"A":g=(m=r({rx:v[1],ry:v[2],px:i,py:n,xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5],cx:v[6],cy:v[7]}))[m.length-1],m.forEach(function(t,e){h.push(0===e?[i,n,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[m[e-1].x,m[e-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),i=g.x,n=g.y;break;case"Q":h.push(u.q2b(i,n,v[1],v[2],v[3],v[4])),i=v[3],n=v[4];break;case"q":h.push(u.q2b(i,n,i+v[1],n+v[2],v[3]+i,v[4]+n)),i+=v[3],n+=v[4];break;case"T":"Q"===y[0]||"q"===y[0]?h.push(u.q2b(i,n,p=i+y[3]-y[1],f=n+y[4]-y[2],v[1],v[2])):"T"!==y[0]&&"t"!==y[0]||(h.push(u.q2b(i,n,i+i-p,n+n-f,v[1],v[2])),p=i+i-p,f=n+n-f),i=v[1],n=v[2];break;case"t":"Q"===y[0]||"q"===y[0]?h.push(u.q2b(i,n,p=i+y[3]-y[1],f=n+y[4]-y[2],i+v[1],n+v[2])):"T"!==y[0]&&"t"!==y[0]||(h.push(u.q2b(i,n,i+i-p,n+n-f,i+v[1],n+v[2])),p=i+i-p,f=n+n-f),i+=v[1],n+=v[2];break;case"Z":case"z":h.push([i,n,c=h[0][0],l=h[0][1],c,l,c,l])}}return s},u._upCurves=function(t,e){for(var i=0,n=0,r=t.length;i<e;i++)t.push(t[n].slice(0)),++n>r-1&&(n-=r)},u._splitCurves=function(t,e){for(var i,n,r,a,o,s,h,u,l=0,p=0;l<e;l++){var f=t[p],d={left:c(i=f[0],n=f[1],r=f[2],a=f[3],o=f[4],s=f[5],h=f[6],u=f[7],.5),right:c(h,u,o,s,r,a,i,n,.5,!0)};t.splice(p,1),t.splice(p,0,d.left,d.right),(p+=2)>=t.length-1&&(p=0)}},u._upShapes=function(t,e){for(var i=function(e){var i=[];t[t.length-1].forEach(function(t){i.push(t.slice(0))}),t.push(i)},n=0;n<e;n++)i()},u._subShapes=function(t,e,i){for(var n=function(t){var i=e[e.length-1],n=[],r=i[0][0],a=i[0][1];i.forEach(function(){n.push([r,a,r,a,r,a,r,a])}),e.push(n)},r=0;r<i;r++)n()},u.lerp=function(t,e,i){return u._lerp(u.path2shapes(t),u.path2shapes(e),i)},u.MIM_CURVES_COUNT=100,u._preprocessing=function(t,e){var i=t.length,n=e.length,r=JSON.parse(JSON.stringify(t)),a=JSON.parse(JSON.stringify(e));return i>n?u._subShapes(r,a,i-n):i<n&&u._upShapes(r,n-i),(r=function(t,e){var i=function(t){for(var e=[],i=0;i<t;i++)e.push(i);return n=[],r=[],function t(e){var i,a;for(i=0;i<e.length;i++)a=e.splice(i,1)[0],r.push(a),0==e.length&&n.push(r.slice()),t(e),e.splice(i,0,a),r.pop();return n}(e);var n,r}(t.length),n=[];i.forEach(function(i){var r=0;i.forEach(function(i){var n,a;r+=(n=h(t[i]),a=h(e[i]),Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2))+Math.sqrt(Math.pow(n[2]-a[2],2)+Math.pow(n[3]-a[3],2)))}),n.push({index:i,distance:r})}),n.sort(function(t,e){return t.distance-e.distance});var r=[];return n[0].index.forEach(function(e){r.push(t[e])}),r}(r,a)).forEach(function(t,e){var i=t.length,n=a[e].length;i>n?i<u.MIM_CURVES_COUNT?(u._splitCurves(t,u.MIM_CURVES_COUNT-i),u._splitCurves(a[e],u.MIM_CURVES_COUNT-n)):u._splitCurves(a[e],i-n):i<n&&(n<u.MIM_CURVES_COUNT?(u._splitCurves(t,u.MIM_CURVES_COUNT-i),u._splitCurves(a[e],u.MIM_CURVES_COUNT-n)):u._splitCurves(t,n-i))}),r.forEach(function(t,e){r[e]=function(t,e){var i=function(t){for(var e=[],i=0;i<t;i++){for(var n=[],r=0;r<t;r++){var a=r+i;a>t-1&&(a-=t),n[a]=r}e.push(n)}return e}(t.length),n=[];i.forEach(function(i){var r=0,a=0;i.forEach(function(i){var n,o,s,h,u,c,l,p,f,d,m,g,v,y,b,w;r+=(o=e[a++],s=(n=t[i])[2],h=n[4],u=n[6],c=n[1],l=n[3],p=n[5],f=n[7],d=o[2],m=o[4],g=o[6],v=o[1],y=o[3],b=o[5],w=o[7],Math.sqrt(Math.pow(o[0]-n[0],2)+Math.pow(v-c,2))+Math.sqrt(Math.pow(d-s,2)+Math.pow(y-l,2))+Math.sqrt(Math.pow(m-h,2)+Math.pow(b-p,2))+Math.sqrt(Math.pow(g-u,2)+Math.pow(w-f,2)))}),n.push({index:i,distance:r})}),n.sort(function(t,e){return t.distance-e.distance});var r=[];return n[0].index.forEach(function(e){r.push(t[e])}),r}(t,a[e])}),[r,a]},u._lerp=function(t,e,i){var n=[];return t.forEach(function(t,r){var a=[];t.forEach(function(t,n){a.push(u.lerpCurve(t,e[r][n],i))}),n.push(a)}),n},u.animate=function(t){var e=u.path2shapes(t.from),i=u.path2shapes(t.to),n=u._preprocessing(e,i),r=new Date,a=t.end||function(){},o=t.progress||function(){},s=t.easing||function(t){return t},h=null,c=null,l=t.time;(t.begin||function(){})(e),function t(){var e=new Date-r;if(e>=l)return o(c=i,1),a(c),void cancelAnimationFrame(h);var p=s(e/l);c=u._lerp(n[0],n[1],p),o(c,p),h=requestAnimationFrame(t)}()},u}()}),B=function(t){function e(e){if(t.call(this,e),this.oldPath=void 0,this.path2D=new Path2D,this.polyfill)if("function"!=typeof Path2D){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src="https://cdn.jsdelivr.net/npm/canvas-5-polyfill@0.1.5/canvas.min.js",i.appendChild(n)}else{var r=document.createElement("canvas").getContext("2d");r.stroke(new Path2D("M0,0H1")),r.getImageData(0,0,1,1).data[3]&&(this.polyfill=!1)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{path:void 0,color:void 0,borderColor:void 0,lineWidth:1,clip:!1,fixed:!1,polyfill:!0})},e.prototype.changeToPathInit=function(t,e){return X._preprocessing(X.path2shapes(t),X.path2shapes(e))},e.prototype.changeToPath=function(t,e,i){return X._lerp(e.pathFrom,e.pathTo,t)},e.prototype.draw=function(t,e){var i=this;if(this.enabled){var n=this.alpha*e.alpha;this.oldPath!==this.path&&(this.polyfill&&"string"==typeof this.path&&(this.path=X.path2shapes(this.path)),Array.isArray(this.path)?(this.path2D=new Path2D,this.path.forEach(function(t){i.path2D.moveTo(t[0][0],t[0][1]),t.forEach(function(t){i.path2D.bezierCurveTo(t[2],t[3],t[4],t[5],t[6],t[7])}),i.path2D.closePath()})):this.path2D=new Path2D(this.path),this.oldPath=this.path);var r=this.scaleX,a=this.scaleY;for(var o in this.fixed&&(0==r&&(r=1e-10),0==a&&(a=1e-10)),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=n,t.save(),t.translate(this.x,this.y),t.scale(r,a),t.rotate(this.rotation),this.color&&(t.fillStyle=this.color,t.fill(this.path2D)),t.save(),this.clip&&(t.clip(this.path2D),this.fixed&&(t.rotate(-this.rotation),t.scale(1/r,1/a),t.translate(-this.x,-this.y))),this.sprite)this.sprite[o].draw(t,e);t.restore(),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.stroke(this.path2D)),t.restore()}},e}(v),V=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{x:void 0,y:void 0,width:void 0,height:void 0,borderColor:void 0,lineWidth:1,clear:!1})},e.prototype.draw=function(t,e){if(this.enabled)if(this.width||(this.width=e.width),this.height||(this.height=e.height),void 0===this.x&&(this.x=e.x),void 0===this.y&&(this.y=e.y),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*e.alpha,0===this.rotation)this.clear?t.clearRect(this.x,this.y,this.width,this.height):(t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(this.x,this.y,this.width,this.height),t.stroke());else{var i=this.width/2,n=this.height/2;t.save(),t.translate(this.x+i,this.y+n),t.rotate(this.rotation),this.clear?t.clearRect(-i,-n,this.width,this.height):(t.fillStyle=this.color,t.fillRect(-i,-n,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(-i,-n,this.width,this.height),t.stroke()),t.restore()}},e}(m),Y=function(t){function i(i){var n=e(i.text),r=Array.isArray(n)?n:[].concat(n);t.call(this,Object.assign({},i,{class:M,count:r.length,text:function(t){return r[t]},enabled:function(t){return" "!==r[t]&&e(i.enabled,t)}}))}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i}(b),G=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],U=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],H=function t(){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Z=function(t,e,i,n,r,a){var o,s,h,u,c,l,p,f,d,m,g,v,y,b,w,_,M,x,S,T,E,P,O,k,I,z=t.data,C=2*a+1,F=n-1,A=r-1,L=a+1,j=L*(L+1)/2,q=new H,N=q;for(h=1;h<C;h++)N=N.next=new H,h===L&&(I=N);N.next=q;var D=null,R=null;p=l=0;var W=G[a],X=U[a];for(s=0;s<r;s++){for(_=M=x=S=f=d=m=g=0,v=L*(T=z[l]),y=L*(E=z[l+1]),b=L*(P=z[l+2]),w=L*(O=z[l+3]),f+=j*T,d+=j*E,m+=j*P,g+=j*O,N=q,h=0;h<L;h++)N.r=T,N.g=E,N.b=P,N.a=O,N=N.next;for(h=1;h<L;h++)f+=(N.r=T=z[u=l+((F<h?F:h)<<2)])*(k=L-h),d+=(N.g=E=z[u+1])*k,m+=(N.b=P=z[u+2])*k,g+=(N.a=O=z[u+3])*k,_+=T,M+=E,x+=P,S+=O,N=N.next;for(D=q,R=I,o=0;o<n;o++)z[l+3]=O=g*W>>X,0!==O?(z[l]=(f*W>>X)*(O=255/O),z[l+1]=(d*W>>X)*O,z[l+2]=(m*W>>X)*O):z[l]=z[l+1]=z[l+2]=0,f-=v,d-=y,m-=b,g-=w,v-=D.r,y-=D.g,b-=D.b,w-=D.a,u=p+((u=o+a+1)<F?u:F)<<2,f+=_+=D.r=z[u],d+=M+=D.g=z[u+1],m+=x+=D.b=z[u+2],g+=S+=D.a=z[u+3],D=D.next,v+=T=R.r,y+=E=R.g,b+=P=R.b,w+=O=R.a,_-=T,M-=E,x-=P,S-=O,R=R.next,l+=4;p+=n}for(o=0;o<n;o++){for(M=x=S=_=d=m=g=f=0,v=L*(T=z[l=o<<2]),y=L*(E=z[l+1]),b=L*(P=z[l+2]),w=L*(O=z[l+3]),f+=j*T,d+=j*E,m+=j*P,g+=j*O,N=q,h=0;h<L;h++)N.r=T,N.g=E,N.b=P,N.a=O,N=N.next;for(c=n,h=1;h<=a;h++)f+=(N.r=T=z[l=c+o<<2])*(k=L-h),d+=(N.g=E=z[l+1])*k,m+=(N.b=P=z[l+2])*k,g+=(N.a=O=z[l+3])*k,_+=T,M+=E,x+=P,S+=O,N=N.next,h<A&&(c+=n);for(l=o,D=q,R=I,s=0;s<r;s++)z[3+(u=l<<2)]=O=g*W>>X,O>0?(z[u]=(f*W>>X)*(O=255/O),z[u+1]=(d*W>>X)*O,z[u+2]=(m*W>>X)*O):z[u]=z[u+1]=z[u+2]=0,f-=v,d-=y,m-=b,g-=w,v-=D.r,y-=D.g,b-=D.b,w-=D.a,u=o+((u=s+L)<A?u:A)*n<<2,f+=_+=D.r=z[u],d+=M+=D.g=z[u+1],m+=x+=D.b=z[u+2],g+=S+=D.a=z[u+3],D=D.next,v+=T=R.r,y+=E=R.g,b+=P=R.b,w+=O=R.a,_-=T,M-=E,x-=P,S-=O,R=R.next,l+=n}return t},J=Z,$=function(t){function e(e){t.call(this,e),this.currentGridSize=!1,this.currentRadiusPart=void 0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{onCanvas:!1,radius:void 0,radiusPart:void 0})},e.prototype.normalizeFullScreen=function(e){this.norm&&this.onCanvas?(this.x=0,this.y=0,this.width=e.widthInPixel,this.height=e.heightInPixel):t.prototype.normalizeFullScreen.call(this,e)},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.radiusPart&&(this.radius=void 0)},e.prototype.additionalBlur=function(t,e,i){this.imageData=this.tctx.getImageData(0,0,t,e),J(this.imageData,0,0,t,e,i.radius),this.tctx.putImageData(this.imageData,0,0)},e.prototype.draw=function(e,i){if(this.enabled){void 0!==this.radius&&this.currentRadiusPart===this.radiusPart||(this.radius=Math.round((i.widthInPixel+i.heightInPixel)/2/this.radiusPart),this.currentRadiusPart=this.radiusPart);var n=Math.round(this.radius);if(n)if(this.onCanvas){void 0!==this.width&&void 0!==this.height||this.normalizeFullScreen(i);var r=Math.round(this.x),a=Math.round(this.y),o=Math.round(this.width),s=Math.round(this.height);this.imageData=e.getImageData(r,a,o,s),J(this.imageData,0,0,o-r,s-a,n),e.putImageData(this.imageData,r,a,0,0,o,s)}else i.radius=n,t.prototype.draw.call(this,e,i)}else t.prototype.draw.call(this,e,i)},e}(w),Q=Z,K=function(t){function e(e){t.call(this,e),this.currentGridSize=!1,this.currentRadiusPart=void 0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{radius:void 0,radiusPart:void 0})},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.radiusPart&&(this.radius=void 0)},e.prototype.additionalBlur=function(t,e,i){i.radius&&(this.imageData=this.tctx.getImageData(0,0,t,e),Q(this.imageData,0,0,t,e,i.radius),this.tctx.putImageData(this.imageData,0,0))},e.prototype.draw=function(e,i){this.enabled&&(void 0!==this.radius&&this.currentRadiusPart===this.radiusPart||(this.radius=Math.round((i.widthInPixel+i.heightInPixel)/2/this.radiusPart),this.currentRadiusPart=this.radiusPart),i.radius=Math.round(this.radius),t.prototype.draw.call(this,e,i))},e}(y),tt=function(t){function e(e){t.call(this,e),void 0!==this.x&&void 0!==this.y&&this.width&&this.height&&this.lineWidth?this.init():this.centerX=void 0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getParameterList=function(){return Object.assign({},t.prototype.getParameterList.call(this),{count:40,moveX:0,moveY:0,moveZ:0,lineWidth:void 0,highScale:!0})},e.prototype.init=function(){this.centerX=this.width/2+this.x,this.centerY=this.height/2+this.y,this.scaleZ=Math.max(this.width,this.height)/2,this.starsX=[],this.starsY=[],this.starsZ=[],this.starsOldX=[],this.starsOldY=[],this.starsNewX=[],this.starsNewY=[],this.starsEnabled=[],this.starsLineWidth=[];for(var t=0;t<this.count;t++)this.starsX[t]=Math.random()*this.width-this.width/2,this.starsY[t]=Math.random()*this.height-this.height/2,this.starsZ[t]=Math.random()*this.scaleZ},e.prototype.moveStar=function(t,e,i){i&&(this.starsEnabled[t]=!0);for(var n=this.width/2,r=this.height/2,a=this.starsX[t]+this.moveX*e,o=this.starsY[t]+this.moveY*e,s=this.starsZ[t]+this.moveZ*e;a<-n;)a+=this.width,o=Math.random()*this.height-r,this.starsEnabled[t]=!1;for(;a>n;)a-=this.width,o=Math.random()*this.height-r,this.starsEnabled[t]=!1;for(;o<-r;)o+=this.height,a=Math.random()*this.width-n,this.starsEnabled[t]=!1;for(;o>r;)o-=this.height,a=Math.random()*this.width-n,this.starsEnabled[t]=!1;for(;s<=0;)s+=this.scaleZ,a=Math.random()*this.width-n,o=Math.random()*this.height-r,this.starsEnabled[t]=!1;for(;s>this.scaleZ;)s-=this.scaleZ,a=Math.random()*this.width-n,o=Math.random()*this.height-r,this.starsEnabled[t]=!1;var h=this.centerX+a/s*n,u=this.centerY+o/s*r;if(this.starsEnabled[t]=this.starsEnabled[t]&&h>=this.x&&u>=this.y&&h<this.x+this.width&&u<this.y+this.height,i)this.starsX[t]=a,this.starsY[t]=o,this.starsZ[t]=s,this.starsNewX[t]=h,this.starsNewY[t]=u;else{this.starsOldX[t]=h,this.starsOldY[t]=u;var c=4*(1-this.starsZ[t]/this.scaleZ);this.highScale||(c=Math.ceil(c)),this.starsLineWidth[t]=c}},e.prototype.animate=function(e){var i=t.prototype.animate.call(this,e);if(this.enabled&&void 0!==this.centerX)for(var n=this.count;n--;)this.moveStar(n,e/16,!0),this.starsEnabled[n]&&this.moveStar(n,-5,!1);return i},e.prototype.draw=function(t,e){if(this.enabled){if(void 0===this.centerX)return this.width=this.width||e.width,this.height=this.height||e.height,this.x=void 0===this.x?e.x:this.x,this.y=void 0===this.y?e.y:this.y,this.lineWidth=this.lineWidth||Math.min(e.height/e.heightInPixel,e.width/e.widthInPixel)/2,void this.init();if(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*e.alpha,0==this.moveY&&0==this.moveZ&&this.moveX<0){t.fillStyle=this.color;for(var i=this.count;i--;)this.starsEnabled[i]&&t.fillRect(this.starsNewX[i],this.starsNewY[i]-this.starsLineWidth[i]*this.lineWidth/2,this.starsOldX[i]-this.starsNewX[i],this.starsLineWidth[i]*this.lineWidth)}else if(t.strokeStyle=this.color,this.highScale)for(var n=this.count;n--;)this.starsEnabled[n]&&(t.beginPath(),t.lineWidth=this.starsLineWidth[n]*this.lineWidth,t.moveTo(this.starsOldX[n],this.starsOldY[n]),t.lineTo(this.starsNewX[n],this.starsNewY[n]),t.stroke(),t.closePath());else for(var r,a=5;--a;){for(t.beginPath(),t.lineWidth=a*this.lineWidth,r=this.count;r--;)this.starsEnabled[r]&&this.starsLineWidth[r]===a&&(t.moveTo(this.starsOldX[r],this.starsOldY[r]),t.lineTo(this.starsNewX[r],this.starsNewY[r]));t.stroke(),t.closePath()}}},e}(V),et=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(_,[null].concat(t)))},it=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(M,[null].concat(t)))};StackBlurCanvas=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(K,[null].concat(t)))},StarField=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(tt,[null].concat(t)))},et.LEFT_TOP=_.LEFT_TOP,et.CENTER=_.CENTER,it.LEFT_TOP=M.LEFT_TOP,it.CENTER=M.CENTER;var nt={Callback:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(g,[null].concat(t)))},Canvas:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(y,[null].concat(t)))},Circle:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(m,[null].concat(t)))},Emitter:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(b,[null].concat(t)))},FastBlur:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(w,[null].concat(t)))},Group:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(v,[null].concat(t)))},Image:et,Text:it,Particle:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(W,[null].concat(t)))},Path:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(B,[null].concat(t)))},Rect:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(V,[null].concat(t)))},Scroller:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Y,[null].concat(t)))},StackBlur:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply($,[null].concat(t)))},StackBlurCanvas:StackBlurCanvas,StarField:StarField},rt=function(t,i){this.callback=t,this.duration=o(e(i),void 0),this.initialized=!1};function at(t,e){return e.from+t*e.delta}function ot(t,e){for(var i,n=[].concat(e.values),r=n.length;r>1;)for(r--,i=0;i<r;i++)n[i]=n[i]+t*(n[i+1]-n[i]);return n[0]}function st(t,e,i){return e.colorFrom.mix(e.colorTo,t).string()}function ht(t,e,i){return i.changeToPath(t,e,i)}rt.prototype.reset=function(){this.initialized=!1},rt.prototype.run=function(t,e){var i;return void 0!==this.duration?(this.callback(t,Math.min(e,this.duration),!this.initialized),this.initialized=!0,e-this.duration):(i=this.callback(t,e,!this.initialized),this.initialized=!0,i)};var ut=function(t,i,n){for(var r in this.initialized=!1,this.changeValues=[],t){var a=t[r],s="rotationInDegree"===r?.017453292519943295*a:a,h="rotationInRadian"===r||"rotationInDegree"===r?"rotation":r,u="color"===r,c="path"===r,l="function"==typeof s,p=!u&&Array.isArray(s);this.changeValues.push({name:h,to:p?s[s.length-1]:e(s,1,{}),bezier:!!p&&s,isColor:u,isPath:c,isFunction:!!l&&s,moveAlgorithm:u?st:c?ht:p?ot:at})}this.duration=o(e(i),0),this.ease=o(n,function(t){return t})};ut.prototype.reset=function(){this.initialized=!1},ut.prototype.init=function(t,e){for(var i,n,r,a=this.changeValues.length;a--;)(r=this.changeValues[a]).isFunction?(r.from=t[r.name],r.to=r.isFunction(r.from),r.isColor?(r.colorFrom=R(r.from),r.colorTo=R(r.to),r.moveAlgorithm=st):r.isPath?(i=t.changeToPathInit(r.from,r.to),r.pathFrom=i[0],r.pathTo=i[1],r.moveAlgorithm=ht):Array.isArray(r.to)?(r.values=[t[r.name]].concat(r.to),r.moveAlgorithm=ot):(r.delta=r.to-r.from,r.moveAlgorithm=at)):r.isColor?(r.colorFrom=R(t[r.name]),r.colorTo=R(r.to)):r.isPath?(n=t.changeToPathInit(t[r.name],r.to),r.pathFrom=n[0],r.pathTo=n[1]):r.bezier?r.values=[t[r.name]].concat(r.bezier):(r.from=t[r.name],r.delta=r.to-r.from)},ut.prototype.run=function(t,e){if(this.initialized||(this.initialized=!0,this.init(t,e)),this.duration<=e)for(var i,n=this.changeValues.length;n--;)t[(i=this.changeValues[n]).name]=i.to;else for(var r,a=this.changeValues.length,o=this.ease(e/this.duration);a--;)t[(r=this.changeValues[a]).name]=r.moveAlgorithm(o,r,t);return e-this.duration};var ct=function(){};ct.prototype.run=function(t,e){return d.TIMELAPSE_TO_FORCE_DISABLE};var lt=function(){};lt.prototype.run=function(t,e){return t.enabled=!1,d.TIMELAPSE_TO_FORCE_DISABLE};var pt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.Aniobject=t[0]instanceof d?t[0]:new(Function.prototype.bind.apply(d,[null].concat(t)))};pt.prototype.reset=function(t){void 0===t&&(t=0),this.Aniobject.reset&&this.Aniobject.reset(t)},pt.prototype.play=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),this.Aniobject.play&&this.Aniobject.play(t,e)},pt.prototype.run=function(t,e,i){for(var n=e;n>=0;){if(n=this.Aniobject.run(t,n,i),i=!0,!0===n)return!0;n>=0&&this.Aniobject.reset&&this.Aniobject.reset()}return n};var ft=function(t,e,i){this.ifCallback=t,this.Aniobject=e,this.AniobjectElse=o(i,function(){return 0})};ft.prototype.run=function(t,i){var n=e(this.ifCallback)?this.Aniobject:this.AniobjectElse;return n.run?n.run(t,i):n(t,i)};var dt=function(t,i){this.initialized=!1,this.image=e(t),this.durationBetweenFrames=o(e(i),0),Array.isArray(this.image)?this.count=this.image.length:(this.image=[this.image],this.count=1),this.duration=this.count*this.durationBetweenFrames};dt.prototype.reset=function(){this.initialized=!1},dt.prototype.run=function(t,e){if(this.initialized||(this.initialized=!0,this.current=-1),e>=this.duration)t.image=n.getImage(this.image[this.image.length-1]);else{var i=Math.floor(e/this.durationBetweenFrames);i!==this.current&&(this.current=i,t.image=n.getImage(this.image[this.current]))}return e-this.duration};var mt=function(t,i,n){this.initialized=!1,this.frameNumber=e(t),this.framesToRight=o(e(i),!0),this.durationBetweenFrames=o(e(n),0),Array.isArray(this.frameNumber)||(this.frameNumber=[this.frameNumber]),this.duration=this.frameNumber.length*this.durationBetweenFrames};mt.prototype.run=function(t,e){var i;return i=e>=this.duration?this.frameNumber[this.frameNumber.length-1]:this.frameNumber[Math.floor(e/this.durationBetweenFrames)],this.framesToRight?t.frameX=t.frameWidth*i:t.frameY=t.frameHeight*i,e-this.duration};var gt=function(t){for(var i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];this.Aniobject=i[0]instanceof d?i[0]:new(Function.prototype.bind.apply(d,[null].concat(i))),this.times=this.timesOrg=o(e(t),1)};gt.prototype.reset=function(t){void 0===t&&(t=0),this.times=this.timesOrg,this.Aniobject.reset&&this.Aniobject.reset(t)},gt.prototype.play=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),this.times=this.timesOrg,this.Aniobject.play&&this.Aniobject.play(t,e)},gt.prototype.run=function(t,e,i){for(var n=e;n>=0&&this.times>0;){if(n=this.Aniobject.run(t,n,i),i=!0,!0===n)return!0;n>=0&&(this.times--,this.Aniobject.reset&&this.Aniobject.reset())}return n};var vt=function(t){function i(i,n,r,a){t.call(this,{x:i,y:n},0,a),this.speed=e(r)||1}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.init=function(e,i){if(0==this.speed||this.targetX===e.x&&this.targetY===e.y)this.duration=0;else{var n=this.changeValues[0],r=this.changeValues[1];n.from=e.x,r.from=e.y,n.delta=n.to-n.from,r.delta=r.to-r.from;var a=Math.sqrt(n.delta*n.delta+r.delta*r.delta);this.duration=10*a/this.speed}t.prototype.init.call(this,e,i)},i}(ut),yt=function(){};yt.prototype.run=function(t,e){return d.TIMELAPSE_TO_REMOVE};var bt=function(t,i){this.Aniobject=t,this.times=o(e(i),1)};bt.prototype.run=function(t,e){if(this.times<=0)return e;var i=this.Aniobject.run(t,e);return i>=0&&this.times--,i};var wt=function(t,i){this.initialized=!1,this.duration=e(i),this.shakeDiff=e(t),this.shakeDiffHalf=this.shakeDiff/2};wt.prototype.reset=function(){this.initialized=!1},wt.prototype.run=function(t,e){return this.initialized||(this.initialized=!0,this.x=t.x,this.y=t.y),e>=this.duration?(t.x=this.x,t.y=this.y):(t.x=this.x+Math.random()*this.shakeDiff-this.shakeDiffHalf,t.y=this.y+Math.random()*this.shakeDiff-this.shakeDiffHalf),e-this.duration};var _t=function(){this.showOnce=!0};_t.prototype.run=function(t,e){return t.enabled=t.enabled&&this.showOnce,this.showOnce=!1,0};var Mt=function(t){var e=this;void 0===t&&(t={});var i=t.states;void 0===i&&(i={});var n=t.transitions;void 0===n&&(n={});var r=t.default;void 0===r&&(r=void 0);var a=t.delegateTo;void 0===a&&(a=void 0),this.states=i,Object.keys(this.states).forEach(function(t){Array.isArray(e.states[t])&&(e.states[t]=new d(e.states[t]))}),this.transitions=n,this.delegateTo=a,this.currentStateName=r,this.currentState=this.states[r],this.isTransitioningToStateName=void 0};Mt.prototype.setState=function(t,e){var i=this;if(t!==this.currentStateName){this.isTransitioningToStateName=t;var n=""+t.charAt(0).toUpperCase()+t.slice(1),r=[this.currentStateName+"To"+n,this.currentStateName+"To","to"+n].find(function(t){return i.transitions[t]});r?(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.transitions[r],this.currentState&&this.currentState.reset&&this.currentState.reset()):(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0)}},Mt.prototype.play=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),this.currentState.play&&this.currentState.play(t,e)},Mt.prototype.run=function(t,e,i){var n=e,r=i;if(this.currentState){if(!0===(n=this.currentState.run(t,n,r)))return!0;r=!0}if(n>=0||!this.currentState)if(this.isTransitioningToStateName){if(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0,!0===(n=this.currentState.run(t,n,r)))return!0}else this.currentState=void 0;return-1};var xt=function(){};xt.prototype.run=function(t,e){return d.TIMELAPSE_TO_STOP};var St=function(){};St.prototype.run=function(t,e){return t.enabled=!1,d.TIMELAPSE_TO_STOP};var Tt=function(t){this.duration=e(t)};Tt.prototype.run=function(t,e){return t.enabled=e>=this.duration,e-this.duration};var Et={Callback:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(rt,[null].concat(t)))},ChangeTo:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ut,[null].concat(t)))},End:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ct,[null].concat(t)))},EndDisabled:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(lt,[null].concat(t)))},Forever:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(pt,[null].concat(t)))},If:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ft,[null].concat(t)))},Image:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(dt,[null].concat(t)))},ImageFrame:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(mt,[null].concat(t)))},Loop:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(gt,[null].concat(t)))},Move:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(vt,[null].concat(t)))},Once:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(bt,[null].concat(t)))},Remove:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(yt,[null].concat(t)))},Sequence:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t)))},Shake:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(wt,[null].concat(t)))},ShowOnce:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(_t,[null].concat(t)))},State:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Mt,[null].concat(t)))},Stop:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(xt,[null].concat(t)))},StopDisabled:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(St,[null].concat(t)))},Wait:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t)))},WaitDisabled:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Tt,[null].concat(t)))}},Pt=function(t){var e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},Ot={backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},bounceInOut:function(t){return t<.5?.5*(1-Pt(1-2*t)):.5*Pt(2*t-1)+.5},bounceIn:function(t){return 1-Pt(1-t)},bounceOut:Pt,circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},circIn:function(t){return 1-Math.sqrt(1-t*t)},circOut:function(t){return Math.sqrt(1- --t*t)},cubicInOut:function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},cubicIn:function(t){return t*t*t},cubicOut:function(t){var e=t-1;return e*e*e+1},elasticInOut:function(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1},elasticIn:function(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))},elasticOut:function(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1},expoInOut:function(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1},expoIn:function(t){return 0===t?t:Math.pow(2,10*(t-1))},expoOut:function(t){return 1===t?t:1-Math.pow(2,-10*t)},linear:function(t){return t},quadInOut:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},quadIn:function(t){return t*t},quadOut:function(t){return-t*(t-2)},quartInOut:function(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1},quartIn:function(t){return Math.pow(t,4)},quartOut:function(t){return Math.pow(t-1,3)*(1-t)+1},quintInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},quintIn:function(t){return t*t*t*t*t},quintOut:function(t){return--t*t*t*t*t+1},sineInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},sineIn:function(t){var e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e},sineOut:function(t){return Math.sin(t*Math.PI/2)}};t.Engine=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(i,[null].concat(t)))},t.Scenes=p,t.ImageManager=n,t.Sprites=nt,t.Animations=Et,t.Easing=Ot});
//# sourceMappingURL=animationvideo.umd.js.map
