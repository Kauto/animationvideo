function t(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return"function"==typeof t?t.apply(null,s):t}class i{constructor(t){var i=t;if("object"!=typeof t)throw new Error("No canvas given for Engine constructor");if(t.getContext)i={canvas:t};else if(!t.canvas)throw new Error("No canvas given for Engine constructor");var s=Object.assign({},{scene:null,canvas:null,autoSize:!1,clickToPlayAudio:!1},i);if(this.i={canvas:null,context:null,width:0,height:0,ratio:1},this.o=null,this.u=!1,this.p=null,this.M=0,this.k=0,this.A=!1,this.O=null,this.i.canvas=s.canvas,"object"!=typeof s.canvas||null===s.canvas||!s.canvas.getContext)throw new Error("Countn't create contect for canvas in Engine");if(s.autoSize){var r={enabled:!0,scaleLimitMin:1,scaleLimitMax:8,scaleFactor:1.1,referenceWidth:()=>this.i.canvas.clientWidth,referenceHeight:()=>this.i.canvas.clientHeight,currentScale:1,waitTime:800,currentWaitedTime:0,currentOffsetTime:0,offsetTimeLimitUp:300,offsetTimeLimitDown:300,offsetTimeTarget:1e3/60,offsetTimeDelta:3,registerResizeEvents:!0,registerVisibilityEvents:!0,setCanvasStyle:!1};this.I="object"==typeof s.autoSize?Object.assign({},r,s.autoSize):r,this.I.registerResizeEvents&&(window.addEventListener("resize",this.recalculateCanvas.bind(this),!1),window.addEventListener("orientationchange",this.recalculateCanvas.bind(this),!1)),this.I.registerVisibilityEvents&&document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this),!1),this.recalculateCanvas()}else this.i.width=this.i.canvas.width,this.i.height=this.i.canvas.height,this.i.ratio=this.i.width/this.i.height;this.i.context=s.canvas.getContext("2d"),s.clickToPlayAudio&&s.canvas.addEventListener("click",this.playAudioOfScene.bind(this),!1),this.switchScene(s.scene)}handleVisibilityChange(){this.I.enabled=!("hidden"==document.visibilityState)}playAudioOfScene(){this.u&&this.o&&this.o.audioElement&&this.o.audioElement.play()}S(t){t.textBaseline="middle",t.textAlign="center",t.globalAlpha=1,t.globalCompositeOperation="source-over"}getWidth(){return this.i.width}getHeight(){return this.i.height}getRatio(){return this.i.ratio}recalculateCanvas(){if(this.I){var i=t(this.I.referenceWidth),s=t(this.I.referenceHeight);if(i<=0||s<=0)return;this.i.canvas.width=Math.round(i/this.I.currentScale),this.i.canvas.height=Math.round(s/this.I.currentScale),this.I.setCanvasStyle&&(this.i.canvas.style.width=i+"px",this.i.canvas.style.height=s+"px"),this.I.currentWaitedTime=0,this.I.currentOffsetTime=0}return this.i.width=this.i.canvas.width,this.i.height=this.i.canvas.height,this.i.ratio=this.i.width/this.i.height,this.resize(),this}resize(){return this.o&&this.o.resize&&this.o.resize(this.i),this}switchScene(t){return t&&(this.p=t),this}run(t){return t=t||{},this.O=window.requestAnimationFrame(function i(s){if(this.O=window.requestAnimationFrame(i.bind(this)),this.A&&(this.recalculateCanvas(),this.A=!1),this.j||(this.j=s),null!==this.p){var r=this.o?this.o.destroy(this.i):t;r&&(this.p.callInit(this.i,r,this),this.o=this.p,this.p=null,this.u=!1)}if(this.o&&this.i.canvas.width){var h=this.o.currentTime();this.k=this.o.clampTime(h-this.M);var n=this.o.shiftTime(this.k);if(this.k=this.k+n,this.M=h+n,this.S(this.i.context),this.u){if(0!==this.k&&(this.I&&this.I.enabled&&(h=window.performance?performance.now():Date.now()),this.o.move(this.i,this.k),this.k<0&&(this.k=this.o.totalTimePassed),this.o.draw(this.i),this.I&&this.I.enabled)){var e=(window.performance?performance.now():Date.now())-h-this.I.offsetTimeTarget;this.I.currentWaitedTime<this.I.waitTime?this.I.currentWaitedTime+=s-this.j:Math.abs(e)<=this.I.offsetTimeDelta?this.I.currentOffsetTime=this.I.currentOffsetTime>=0?Math.max(0,this.I.currentOffsetTime-this.I.offsetTimeDelta):Math.min(0,this.I.currentOffsetTime+this.I.offsetTimeDelta):e<0&&this.I.currentScale>this.I.scaleLimitMin?(this.I.currentOffsetTime+=e,this.I.currentOffsetTime<=this.I.offsetTimeLimitDown&&(this.I.currentScale=Math.max(this.I.scaleLimitMin,this.I.currentScale/this.I.scaleFactor),this.A=!0)):e>0&&this.I.currentScale<this.I.scaleLimitMax&&(this.I.currentOffsetTime+=e,this.I.currentOffsetTime>=this.I.offsetTimeLimitUp&&(this.I.currentScale=Math.min(this.I.scaleLimitMax,this.I.currentScale*this.I.scaleFactor),this.A=!0))}}else this.u=this.o.callLoading(this.i),this.u&&(this.o.reset(this.i),this.I&&(this.I.currentWaitedTime=0))}this.j=s}.bind(this)),this}destroy(){return this.O&&window.cancelAnimationFrame(this.O),this.O=null,this.o&&this.o.destroy(this.i),window.removeEventListener("resize",this.recalculateCanvas.bind(this),!1),window.removeEventListener("orientationchange",this.recalculateCanvas.bind(this),!1),document.removeEventListener("visibilitychange",this.handleVisibilityChange.bind(this),!1),this.i.canvas.removeEventListener("click",this.playAudioOfScene.bind(this),!1),this}}class s{static add(t,i){var r=this||s,h=function(s){if(r.Images[s])i&&"function"==typeof i[s]&&i[s](s,r.Images[s]);else{if(r.Images[s]=new window.Image,r.Images[s].onload=function(){r.loaded++,i&&"function"==typeof i?r.isLoaded()&&i():i&&"function"==typeof i[s]&&i[s](s,r.Images[s]),r.resolve&&r.isLoaded()&&(r.resolve(),r.resolve=null)},"<svg"===t[s].substr(0,4)){var h=window.URL||window.webkitURL||window,n=new window.Blob([t[s]],{type:"image/svg+xml"});r.Images[s].src=h.createObjectURL(n)}else r.Images[s].src=t[s];r.count++}};for(var n in t)h(n);return i&&"function"==typeof i&&r.isLoaded()&&i(),r.resolve&&r.isLoaded()&&(r.resolve(),r.resolve=null),r}static reset(){var t=this||s;return t.Images={},t.count=0,t.loaded=0,t}static getLoaded(){return(this||s).loaded}static getCount(){return(this||s).count}static isLoaded(){var t=this||s;return t.loaded===t.count}static getImage(t){return"object"==typeof t?t:(this||s).Images[t]}static isLoadedPromise(){var t=this||s;return!!t.isLoaded()||new Promise((i,s)=>{t.resolve=i})}}s.Images={},s.count=0,s.loaded=0;class r{constructor(){this.layer=[],this.isFunction=[],this.start=0,this.nextFree=0}addElement(t){return this.addElementForId(t),t}addElements(t){return this.addElementsForIds(t),t}addElementForId(t){var i=this.layer.length,s=this.nextFree;this.layer[s]=t,this.isFunction[s]="function"==typeof t,i===s&&i++;for(var r=this.nextFree+1;r!==i&&layer[r];)r++;return this.nextFree=r,this.start>s&&(this.start=s),s}addElementsForIds(t){var i=this.layer.length;return i===this.nextFree?(this.layer=this.layer.concat(t),this.nextFree=this.layer.length,t.forEach((t,s)=>{this.isFunction[i+s]="function"==typeof t}),Array.from({length:t.length},(t,s)=>s+i)):t.map(t=>this.addElement(t))}getById(t){return this.layer[t]}getIdByElement(t){return this.layer.indexOf(t)}deleteByElement(t){var i=this.getIdByElement(t);i>=0&&this.deleteById(i)}deleteById(t){var i=this.layer.length-1;if(i>0&&t===i){for(this.layer[t]=null;i&&!this.layer[i-1];)i--;this.layer.length=i,this.isFunction.length=i,this.nextFree=Math.min(this.nextFree,i),this.start=Math.min(this.start,i)}else this.layer[t]=null,this.nextFree=Math.min(this.nextFree,t),this.start===t&&(this.start=t+1)}forEach(t){var i,s,r=this.layer.length;for(i=this.start;i<r;i++)(s=this.layer[i])&&t({index:i,element:s,isFunction:this.isFunction[i],layer:this})}count(){for(var t=0,i=this.layer.length,s=this.start;s<i;s++)this.layer[s]&&t++;return t}clear(){this.layer=[],this.isFunction=[],this.start=0,this.nextFree=0}}class h{constructor(){this.layers=[]}addLayer(){return this.layers[this.layers.length]=new r,this.layers[this.layers.length-1]}addLayers(t){void 0===t&&(t=1);var i=Array.from({length:t},t=>new r);return this.layers=this.layers.concat(i),i}addLayerForId(){return this.layers[this.layers.length]=new r,this.layers.length-1}addLayersForIds(t){void 0===t&&(t=1);var i=Array.from({length:t},(t,i)=>i+this.layers.length);return this.layers=this.layers.concat(Array.from({length:t},t=>new r)),i}getById(t){return this.layers[t]}forEach(t){var i,s=this.layers.length;for(i=0;i<s;i++)this.layers[i].forEach(t)}count(){return this.layers.length}clear(){this.layers=[]}}function n(t,i){return null==t||""===t?i:t}class e{constructor(i){this.P="function"==typeof i?new i:i,this.layerManager=new h,this.totalTimePassed=0,this.engine=null,this.initDone=!1,this.additionalModifier=void 0,this.tickChunk=n(t(this.P.tickChunk),100/6),this.maxSkippedTickChunk=n(t(this.P.maxSkippedTickChunk),3),this.tickChunkTolerance=n(t(this.P.tickChunkTolerance),.1)}currentTime(){return window.performance?performance.now():Date.now()}clampTime(t){var i=2e3;return this.tickChunk&&(i=this.tickChunk*this.maxSkippedTickChunk),t>i?i:t}shiftTime(t){return this.P.fixedUpdate?-t%this.tickChunk:0}callInit(i,r,h){this.engine=h,this.resize(i);var n=t(this.P.images);n&&s.add(n),Promise.resolve(this.P.init&&this.P.init({engine:h,output:i,scene:this,parameter:r,imageManager:s})).then(t=>this.initDone=!0)}resize(t){this.additionalModifier={alpha:1,x:0,y:0,width:t.width,height:t.height,widthInPixel:t.width,heightInPixel:t.height,visibleScreen:{x:0,y:0,width:t.width,height:t.height}},this.layerManager.forEach(i=>{var{element:s,isFunction:r}=i;r||s.resize(t,this.additionalModifier)})}destroy(t){var i=this.P.destroy&&this.P.destroy({engine:this.engine,scene:this,output:t});return this.initDone=!1,i}loadingScreen(t,i){if(this.P.loading)return this.P.loading({engine:this.engine,scene:this,output:t,progress:i});var s=t.context,r="number"==typeof i?Math.max(1,i*t.h):t.h;s.globalCompositeOperation="source-over",s.globalAlpha=1,s.clearRect(0,0,t.w,t.h),s.fillStyle="#aaa",s.fillRect(0,t.height/2-r/2,t.width,r),s.font="20px Georgia",s.fillStyle="#fff",s.textAlign="left",s.textBaseline="bottom";var h=i;isNaN(parseFloat(i))||isNaN(i-0)||(h="Loading "+Math.round(100*i)+"%"),s.fillText(h,10+3*Math.random(),t.height-10+3*Math.random())}callLoading(t){if(s.isLoaded()&&this.initDone)return!0;var i=s.getCount()?s.getLoaded()/s.getCount():"Loading...";return this.loadingScreen(t,i),!1}fixedUpdate(t,i){this.P.fixedUpdate&&this.P.fixedUpdate({engine:this.engine,scene:this,layerManager:this.layerManager,output:t,timePassed:i,totalTimePassed:this.totalTimePassed})}move(t,i){if(this.totalTimePassed+=i,i<0?(this.reset(t),i=this.totalTimePassed):this.P.endTime&&this.P.endTime<=this.totalTimePassed&&(i-=this.totalTimePassed-this.P.endTime,this.totalTimePassed=this.P.endTime,this.P.end&&this.P.end({engine:this.engine,scene:this,output:t,timePassed:i,totalTimePassed:this.totalTimePassed})),this.tickChunk){if(i>=this.tickChunk-this.tickChunkTolerance)for(var s=0,r=Math.min(this.maxSkippedTickChunk,Math.floor(i/this.tickChunk));s<r;s++)this.fixedUpdate(t,this.tickChunk,s===r-1)}else this.fixedUpdate(t,i,!0);this.P.update&&this.P.update({engine:this.engine,scene:this,layerManager:this.layerManager,output:t,timePassed:i,totalTimePassed:this.totalTimePassed}),this.layerManager.forEach(t=>{var{element:s,isFunction:r,layer:h,index:n}=t;r||s.animate(i)&&h.deleteById(n)})}draw(t){this.layerManager.forEach(i=>{var{layer:s,element:r,isFunction:h,index:n}=i;h?r({engine:this.engine,scene:this,layerManager:this.layerManager,layer:s,output:t,totalTimePassed:this.totalTimePassed})&&s.deleteById(n):r.draw(t.context,this.additionalModifier)})}reset(t){var i=this.P.reset?this.P.reset({engine:this.engine,scene:this,layerManager:this.layerManager,output:t}):new h;if(Array.isArray(i)){var s=i;i=new h,s.forEach(t=>{i.addLayer().addElements(t)})}i&&(this.layerManager=i)}}class a extends e{constructor(t){super(t),this.audioStartTime=null,this.audioPosition=null,this.enableAndroidHack=!1,this.audioElement=this.P.audioElement}currentTime(){var t=super.currentTime();if(this.audioElement){if(this.enableAndroidHack){if(null===this.audioStartTime)return this.audioStartTime=t,this.audioPosition=this.audioElement.currentTime,1e3*this.audioElement.currentTime;if("playing"===this.audioElement.controller.playbackState){if(this.audioElement.currentTime===this.audioPosition)return 1e3*this.audioPosition+Math.min(260,t-this.audioStartTime);if(this.audioElement.currentTime-this.audioPosition<.5&&this.audioElement.currentTime>this.audioPosition&&t-this.audioStartTime<350)return this.audioStartTime=this.audioStartTime+1e3*(this.audioElement.currentTime-this.audioPosition),this.audioPosition=this.audioElement.currentTime,1e3*this.audioPosition+t-this.audioStartTime}return this.audioStartTime=t,this.audioPosition=1e3*(this.audioElement.ended?this.audioElement.duration:this.audioElement.currentTime),1e3*this.audioPosition}return 1e3*(this.audioElement.ended?this.audioElement.duration:this.audioElement.currentTime)}return t}clampTime(t){return t}shiftTime(t){return 0}callInit(){return this.audioElement&&(this.audioElement.canPlayType("audio/mp3").match(/maybe|probably/i),"function"==typeof MediaController&&(this.audioElement.controller=new MediaController,this.enableAndroidHack=!0),this.audioElement.preload="auto",this.audioElement.load()),super.callInit(...arguments)}callLoading(t){var i=super.callLoading(t);if(i&&this.audioElement){if(!(this.audioElement.readyState>=this.audioElement.HAVE_ENOUGH_DATA))return this.loadingScreen(t,"Waiting for Audio"),!1;var s=this.audioElement.play();s&&s.catch(t=>{}),this.P.endTime||(this.P.endTime=1e3*this.audioElement.duration),this.loadingScreen(t,"Click to play")}return i}}function o(){this.reset()}o.prototype.reset=function(){return this.m=[1,0,0,1,0,0],this},o.prototype.multiply=function(t){var i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],h=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],n=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=i,this.m[2]=s,this.m[3]=r,this.m[4]=h,this.m[5]=n,this},o.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=-this.m[1]*t,s=-this.m[2]*t,r=this.m[0]*t,h=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),n=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=i,this.m[2]=s,this.m[3]=r,this.m[4]=h,this.m[5]=n,this},o.prototype.rotate=function(t){var i=Math.cos(t),s=Math.sin(t),r=this.m[1]*i+this.m[3]*s,h=this.m[0]*-s+this.m[2]*i,n=this.m[1]*-s+this.m[3]*i;return this.m[0]=this.m[0]*i+this.m[2]*s,this.m[1]=r,this.m[2]=h,this.m[3]=n,this},o.prototype.translate=function(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this},o.prototype.scale=function(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this},o.prototype.transformPoint=function(t,i){var s=t;return[t=s*this.m[0]+i*this.m[2]+this.m[4],i=s*this.m[1]+i*this.m[3]+this.m[5]]},o.prototype.clone=function(){var t=new o;return t.m=this.m.slice(0),t};class u extends e{constructor(){super(...arguments),this.transform=null,this.transformInvert=null,this.cam={zoom:1,x:0,y:0}}C(){return this.engine?(this.transform||(this.transform=this.F(this.cam),this.transformInvert=null),this.transform):new o}F(t){var i=this.engine.getWidth()/2,s=this.engine.getHeight()/2,r=this.engine.getRatio()>1?i:s;return(new o).translate(i,s).scale(r,r).scale(t.zoom,t.zoom).translate(-t.x,-t.y)}resize(t){this.transform=null,this.transformInvert=null,this.additionalModifier={alpha:1,x:-1,y:-1,width:2,height:2,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:t.width/t.canvas.clientWidth};var[i,s]=this.transformPoint(0,0,1),[r,h]=this.transformPoint(t.width,t.height,1);this.additionalModifier.visibleScreen={x:i,y:s,width:r-i,height:h-s},this.layerManager.forEach(i=>{var{element:s,isFunction:r}=i;r||s.resize(t,this.additionalModifier)})}transformPoint(t,i,s){return void 0===s&&(s=this.additionalModifier.scaleCanvas),this.transformInvert||(this.transformInvert=this.C().clone().invert()),this.transformInvert.transformPoint(t*s,i*s)}draw(t){t.context.save(),t.context.setTransform(...this.C().m),super.draw(t),t.context.restore()}}class c extends a{constructor(){super(...arguments),this.transform=null,this.transformInvert=null}C(){if(!this.engine)return new Transform;if(!this.transform){var t=this.engine.getWidth()/2,i=this.engine.getHeight()/2,s=this.engine.getRatio()>1?t:i;this.transform=(new Transform).translate(t,i).scale(s,s),this.transformInvert=null}return this.transform}resize(t){this.transform=null,this.transformInvert=null,this.additionalModifier={alpha:1,x:-1,y:-1,width:2,height:2,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:t.width/t.canvas.clientWidth};var[i,s]=this.transformPoint(0,0,1),[r,h]=this.transformPoint(t.width,t.height,1);this.additionalModifier.visibleScreen={x:i,y:s,width:r-i,height:h-s},this.layerManager.forEach(i=>{var{element:s,isFunction:r}=i;r||s.resize(t,this.additionalModifier)})}transformPoint(t,i,s){return void 0===s&&(s=this.additionalModifier.scaleCanvas),this.transformInvert||(this.transformInvert=this.C().clone().invert()),this.transformInvert.transformPoint(t*s,i*s)}draw(t){t.context.save(),t.context.setTransform(...this.C().m),super.draw(t),t.context.restore()}}class f extends u{constructor(){super(...arguments),this.clampView=function(){var t=this.F(this.toCam).invert(),[i,s]=t.transformPoint(0,0),[r,h]=t.transformPoint(this.engine.getWidth(),this.engine.getHeight());r-i<=2?i<-1?r<=1&&(this.toCam.x+=-1-i):r>1&&(this.toCam.x+=1-r):i>-1?this.toCam.x+=-1-i:r<1&&(this.toCam.x+=1-r),h-s<=2?s<-1?h<=1&&(this.toCam.y+=-1-s):h>1&&(this.toCam.y+=1-h):s>-1?this.toCam.y+=-1-s:h<1&&(this.toCam.y+=1-h)},this.camConfig=Object.assign({},{zoomMax:10,zoomMin:.5,zoomFactor:1.2,tween:4,registerEvents:!0,enabled:!0,callResize:!0,doubleClickDetectInterval:350},t(this.P.cam)||{}),this.P.click||(this.P.click=()=>{}),this.toCam={x:0,y:0,zoom:1},this.T={L:!1,D:0}}camEnable(){this.camConfig.enabled=!0}camDisable(){this.camConfig.enabled=!1}camReset(){this.toCam={x:0,y:0,zoom:1}}callInit(t,i,s){return this.camConfig.registerEvents&&this.registerCamEvents(t.canvas),super.callInit(t,i,s)}destroy(t){return this.camConfig.registerEvents&&this.destroyCamEvents(t.canvas),super.destroy(t)}N(){return this.toCam.x!==this.cam.x||this.toCam.y!==this.cam.y||this.toCam.zoom!==this.cam.zoom}fixedUpdate(t,i,s){var r=super.fixedUpdate(t,i);return this.camConfig.tween&&this.N()&&(this.cam.x+=(this.toCam.x-this.cam.x)/this.camConfig.tween,this.cam.y+=(this.toCam.y-this.cam.y)/this.camConfig.tween,this.cam.zoom+=(this.toCam.zoom-this.cam.zoom)/this.camConfig.tween,s&&(this.camConfig.callResize?this.resize(t):(this.transform=null,this.transformInvert=null))),r}move(t,i){var s=super.move(t,i);return!this.camConfig.tween&&this.N()&&(this.cam=Object.assign({},this.toCam),this.camConfig.callResize?this.resize(t):(this.transform=null,this.transformInvert=null)),s}registerCamEvents(t){for(var i of["touchstart","mousedown"])t.addEventListener(i,this.B.bind(this),!0);for(var s of["touchend","mouseup"])t.addEventListener(s,this.R.bind(this),!0);for(var r of["touchendoutside","mouseout"])t.addEventListener(r,this._.bind(this),!0);for(var h of["touchmove","mousemove"])t.addEventListener(h,this.W.bind(this),!0);t.addEventListener("mousewheel",this.G.bind(this),!0)}destroyCamEvents(t){for(var i of["touchstart","mousedown"])t.removeEventListener(i,this.B,!0);for(var s of["touchend","mouseup"])t.removeEventListener(s,this.R,!0);for(var r of["touchendoutside","mouseout"])t.removeEventListener(r,this._,!0);for(var h of["touchmove","mousemove"])t.removeEventListener(h,this.W,!0);t.removeEventListener("mousewheel",this.G,!0)}U(t){if(t&&t.touches&&t.touches.length>0){var i=t.target.getBoundingClientRect();return[t.targetTouches[0].pageX-i.left,t.targetTouches[0].pageY-i.top]}return[t.offsetX,t.offsetY]}B(t){var[i,s]=this.U(t);this.T.x=i,this.T.y=s,this.T.V=this.toCam.x,this.T.J=this.toCam.y,this.T.L=!0,this.T.$=void 0,this.T.D=Date.now()}R(t){this.T.L=!1;var[i,s]=this.U(t);if(Date.now()-this.T.D<150&&Math.abs(this.T.x-i)<5&&Math.abs(this.T.y-s)<5){var[r,h]=this.transformPoint(i,s);this.P.doubleClick?this.T.doubleClickTimer?(clearTimeout(this.T.doubleClickTimer),this.T.doubleClickTimer=void 0,this.P.doubleClick(t,r,h)):this.T.doubleClickTimer=setTimeout(()=>{this.T.doubleClickTimer=void 0,this.P.click(t,r,h)},this.P.doubleClickDetectInterval):this.P.click(t,r,h)}}_(t){this.T.L=!1}W(t){if(t&&this.camConfig.enabled&&this.T.L)if(t.touches&&t.touches.length>=2){var i=t.touches,s=Math.sqrt((i[0].pageX-i[1].pageX)*(i[0].pageX-i[1].pageX)+(i[0].pageY-i[1].pageY)*(i[0].pageY-i[1].pageY));void 0!==this.T.$&&(s>this.T.$?this.zoomIn():s<this.T.$&&this.zoomOut()),this.T.$=s}else{this.T.$=void 0;var[r,h]=this.U(t),n=this.F(this.toCam).invert(),[e,a]=n.transformPoint(this.T.x,this.T.y),[o,u]=n.transformPoint(r,h);this.toCam.x=this.T.V+e-o,this.toCam.y=this.T.J+a-u,this.clampView()}}G(t){if(t&&this.camConfig.enabled){t.preventDefault();var[i,s]=this.U(t),[r,h]=this.F(this.toCam).invert().transformPoint(i,s);if((t.wheelDelta||-1*t.deltaY)/120>0){this.zoomIn();var[n,e]=this.F(this.toCam).invert().transformPoint(i,s);this.toCam.x-=n-r,this.toCam.y-=e-h,this.clampView()}else this.zoomOut()}}zoomIn(){this.toCam.zoom=Math.min(this.camConfig.zoomMax,this.toCam.zoom*this.camConfig.zoomFactor)}zoomOut(){this.toCam.zoom=Math.max(this.camConfig.zoomMin,this.toCam.zoom/this.camConfig.zoomFactor),this.clampView()}}NormCamera=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new f(...i)};var l={Default:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new e(...i)},Audio:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new a(...i)},Norm:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new u(...i)},NormAudio:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new c(...i)},NormCamera};class v{constructor(i){this.duration=t(i)}run(t,i){return this.duration?i-this.duration:-1}}class d{constructor(){for(var t=0,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];"number"==typeof s[0]&&(t=s.shift()),this.sequences=s.map(i=>{Array.isArray(i)||(i=[i]);var s=t;return"number"==typeof i[0]&&(s=i.shift()),{position:0,timelapsed:-s,sequence:i.map(t=>"function"!=typeof t.run?"number"==typeof t?new v(t):{run:t}:t).filter(t=>"function"==typeof t.run),label:i.reduce((t,i,s)=>("string"==typeof i&&(t[i]=s-Object.keys(t).length),t),{}),enabled:!0}}),this.lastTimestamp=0,this.enabled=!0}reset(t){void 0===t&&(t=0),this.sequences.forEach(i=>{i.enabled=!0,i.position=0,i.timelapsed=t,i.sequence[0]&&i.sequence[0].reset&&i.sequence[0].reset(t)}),this.enabled=!0}play(t,i){if(void 0===t&&(t=""),void 0===i&&(i=0),t){var s=this.sequences.reduce((s,r)=>(r.label.hasOwnProperty(t)?(s=!0,r.position=r.label[t],r.enabled=!0,r.timelapsed=i,r.sequence[r.position]&&r.sequence[r.position].reset&&r.sequence[r.position].reset()):s|=r.sequence.find(s=>s.play&&s.play(t,i))>=0,s),!1);return s&&(this.enabled=!0),s}return this.sequences.forEach(t=>t.enabled=!0),this.enabled=!0,!0}runSequence(t,i,s){for(var r=s;i.sequence[i.position]&&r>=0;){if(i.timelapsed+=r,i.timelapsed<0)return-1;if(!0===(r=i.sequence[i.position].run(t,i.timelapsed)))r=0;else{if(!1===r)return-1;if(r===d.TIMELAPSE_TO_FORCE_DISABLE)return i.enabled=!1,this.enabled=!1,s;if(r===d.TIMELAPSE_TO_STOP)return i.enabled=!1,s;if(r===d.TIMELAPSE_TO_REMOVE)return!0}if(r>=0&&(i.position=(i.position+1)%i.sequence.length,i.sequence[i.position]&&i.sequence[i.position].reset&&i.sequence[i.position].reset(),i.timelapsed=0,0===i.position))return i.enabled=!1,r}return r}run(t,i,s){var r=i;if(s||(r=i-this.lastTimestamp,this.lastTimestamp=i),!this.enabled)return r;for(var h=this.sequences.length,n=0,e=Infinity,a=0;a<h;a++)if(this.sequences[a].enabled){var o=this.runSequence(t,this.sequences[a],r);if(!0===o)return!0;e=Math.min(e,o)}else n++;return n===h?(this.enabled=!1,r):e}}d.TIMELAPSE_TO_FORCE_DISABLE="FORCE_DISABLE",d.TIMELAPSE_TO_STOP="STOP",d.TIMELAPSE_TO_REMOVE="REMOVE";var w=.017453292519943295;class y{constructor(i){var s=this.getParameterList();Object.keys(s).forEach(r=>{var h=s[r];this[r]="function"==typeof h?h(i[r],i,this):n(t(i[r]),h)})}getBaseParameterList(){return{animation:(i,s)=>{var r=t(i);return Array.isArray(r)?new d(r):"object"==typeof r?r:void 0},enabled:!0}}getParameterList(){return Object.assign({},this.getBaseParameterList(),{x:0,y:0,rotation:(t,i)=>n(t,n(i.rotationInRadian,n(i.rotationInDegree,0)*w)),scaleX:1,scaleY:1,alpha:1,compositeOperation:"source-over",color:"#fff"})}animate(t){return!(!this.animation||!0!==this.animation.run(this,t,!0)||(this.enabled=!1,0))}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.animation&&this.animation.play&&this.animation.play(t,i)}resize(t,i){}draw(t,i){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.beginPath(),t.fillStyle=this.color,t.arc(0,0,1,Math.PI/2+this.rotation,2.5*Math.PI-this.rotation,!1),t.fill(),t.closePath(),t.restore())}}class m extends y{constructor(t){"function"==typeof t&&(t={callback:t}),super(t),this.timePassed=0,this.deltaTime=0}getParameterList(){return Object.assign({},this.getBaseParameterList(),{callback:t=>void 0===typeof t?()=>{}:t})}animate(t){return this.enabled&&(this.timePassed+=t,this.deltaTime+=t),super.animate(t)}draw(t,i){this.enabled&&this.callback(t,this.timePassed,i,this),this.deltaTime=0}}class g extends y{constructor(t){super(t)}getParameterList(){return Object.assign({},super.getParameterList(),{sprite:[]})}animate(t){var i=super.animate(t),s=!1;if(this.enabled)for(var r in this.sprite)s=s||!0===this.sprite[r].animate(t);return this.animation?i:(s&&(this.enabled=!1),s)}play(t,i){for(var s in void 0===t&&(t=""),void 0===i&&(i=0),this.animation&&this.animation.play&&this.animation.play(t,i),this.sprite)this.sprite[s].play&&this.sprite[s].play(t,i)}draw(t,i){if(this.enabled){for(var s in this.alpha<1&&((i=Object.assign({},i)).alpha*=this.alpha),t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.sprite)this.sprite[s].draw(t,i);t.restore()}}}class p extends g{constructor(t){super(t),this.currentGridSize=!1}getParameterList(){return Object.assign({},super.getParameterList(),{x:void 0,y:void 0,width:void 0,height:void 0,gridSize:void 0,norm:(i,s,r)=>n(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height)})}generateTempCanvas(t,i){var s=i.widthInPixel||t.canvas.width,r=i.heightInPixel||t.canvas.height;this.temp_canvas=document.createElement("canvas"),this.gridSize?(this.currentGridSize=this.gridSize,this.temp_canvas.width=Math.round(this.currentGridSize),this.temp_canvas.height=Math.round(this.currentGridSize)):(this.temp_canvas.width=Math.round(s/this.scaleX),this.temp_canvas.height=Math.round(r/this.scaleY)),this.tctx=this.temp_canvas.getContext("2d"),this.tctx.globalCompositeOperation="source-over",this.tctx.globalAlpha=1}normalizeFullScreen(t){(void 0===this.x||this.norm)&&(this.x=t.visibleScreen.x),(void 0===this.y||this.norm)&&(this.y=t.visibleScreen.y),(void 0===this.width||this.norm)&&(this.width=t.visibleScreen.width),(void 0===this.height||this.norm)&&(this.height=t.visibleScreen.height)}resize(t,i){if(this.temp_canvas&&this.currentGridSize!==this.gridSize){var s=this.temp_canvas;this.generateTempCanvas(t,i),this.tctx.globalCompositeOperation="copy",this.tctx.drawImage(s,0,0,s.width,s.height,0,0,this.temp_canvas.width,this.temp_canvas.height),this.tctx.globalCompositeOperation="source-over"}this.normalizeFullScreen(i)}draw(t,i){if(this.enabled){this.temp_canvas||(this.generateTempCanvas(t,i),this.normalizeFullScreen(i)),this.gridSize&&this.currentGridSize!==this.gridSize&&this.resize(t,i);var s=this.width,r=this.height,h=s/2,n=r/2,e=this.temp_canvas.width,a=this.temp_canvas.height;for(var o in this.sprite)this.sprite[o].draw(this.tctx,{alpha:1,x:0,y:0,width:e,height:a,widthInPixel:e,heightInPixel:a,visibleScreen:{x:0,y:0,width:e,height:a}});this.additionalBlur&&this.additionalBlur(e,a,i),t.save(),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.translate(this.x+h,this.y+n),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),t.drawImage(this.temp_canvas,0,0,this.temp_canvas.width,this.temp_canvas.height,-h,-n,s,r),t.restore()}}}class M extends g{constructor(i){super(i.self||{});var s={},r={};for(var h in i)["self","class","count"].includes(h)||("function"==typeof i[h]?r[h]=i[h]:s[h]=i[h]);var e=n(t(i.count),1);this.sprite=[];for(var a=0;a<e;a++){var o=i.class,u={};for(var c in s)u[c]=s[c];for(var f in r)u[f]=r[f].call(null,a);this.sprite[a]=new o(u)}}}class b extends y{constructor(t){super(t),this.currentGridSize=!1}getParameterList(){return Object.assign({},super.getParameterList(),{x:void 0,y:void 0,width:void 0,height:void 0,gridSize:void 0,darker:0,pixel:!1,clear:!1,norm:(i,s,r)=>n(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height)})}generateTempCanvas(t,i){var s=i.widthInPixel||t.canvas.width,r=i.heightInPixel||t.canvas.height;this.temp_canvas=document.createElement("canvas"),this.gridSize?(this.currentGridSize=this.gridSize,this.temp_canvas.width=Math.round(this.currentGridSize),this.temp_canvas.height=Math.round(this.currentGridSize)):(this.temp_canvas.width=Math.ceil(s/this.scaleX),this.temp_canvas.height=Math.ceil(r/this.scaleY)),this.tctx=this.temp_canvas.getContext("2d"),this.tctx.globalCompositeOperation="source-over",this.tctx.globalAlpha=1}normalizeFullScreen(t){(void 0===this.x||this.norm)&&(this.x=t.visibleScreen.x),(void 0===this.y||this.norm)&&(this.y=t.visibleScreen.y),(void 0===this.width||this.norm)&&(this.width=t.visibleScreen.width),(void 0===this.height||this.norm)&&(this.height=t.visibleScreen.height)}resize(t,i){if(this.temp_canvas&&this.currentGridSize!==this.gridSize){var s=this.temp_canvas;this.generateTempCanvas(t,i),this.tctx.globalCompositeOperation="copy",this.tctx.drawImage(s,0,0,s.width,s.height,0,0,this.temp_canvas.width,this.temp_canvas.height),this.tctx.globalCompositeOperation="source-over"}this.normalizeFullScreen(i)}draw(t,i){if(this.enabled){this.temp_canvas||(this.generateTempCanvas(t,i),this.normalizeFullScreen(i)),this.gridSize&&this.currentGridSize!==this.gridSize&&this.resize(t,i);var s=this.alpha*i.alpha,r=this.width,h=this.height,n=this.temp_canvas.width,e=this.temp_canvas.height;s>0&&n&&e&&(this.tctx.globalCompositeOperation="copy",this.tctx.globalAlpha=1,this.tctx.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height,0,0,n,e),this.darker>0&&(this.tctx.globalCompositeOperation=this.clear?"source-atop":"source-over",this.tctx.fillStyle="rgba(0,0,0,"+this.darker+")",this.tctx.fillRect(0,0,n,e)),this.additionalBlur&&this.additionalBlur(n,e,i),this.clear&&t.clearRect(this.x,this.y,r,h),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=s,t.imageSmoothingEnabled=!this.pixel,t.drawImage(this.temp_canvas,0,0,n,e,this.x,this.y,r,h),t.imageSmoothingEnabled=!0)}else this.clear&&(this.x||(this.x=i.x),this.y||(this.y=i.y),this.width||(this.width=i.width),this.height||(this.height=i.height),t.clearRect(this.x,this.y,this.width,this.height))}}class x extends y{constructor(t){super(t)}getParameterList(){return Object.assign({},super.getParameterList(),{image:i=>s.getImage(t(i)),position:x.CENTER,frameX:0,frameY:0,frameWidth:0,frameHeight:0,norm:!1,normCover:!1})}resize(){this.normScale=void 0}draw(t,i){if(this.enabled&&this.image){var s=this.frameWidth||this.image.width,r=this.frameHeight||this.image.height;this.normScale||(this.normScale=this.normCover?Math.max(i.width/s,i.height/r):this.norm?Math.min(i.width/s,i.height/r):1);var h=s*this.normScale*this.scaleX,n=r*this.normScale*this.scaleY;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0==this.rotation?this.position===x.LEFT_TOP?t.drawImage(this.image,this.frameX,this.frameY,s,r,this.x,this.y,h,n):t.drawImage(this.image,this.frameX,this.frameY,s,r,this.x-h/2,this.y-n/2,h,n):(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.drawImage(this.image,this.frameX,this.frameY,s,r,-h/2,-n/2,h,n),t.restore())}}}x.LEFT_TOP=0,x.CENTER=1;class k extends y{constructor(t){super(t)}getParameterList(){return Object.assign({},super.getParameterList(),{text:void 0,font:"1em monospace",position:k.CENTER,color:void 0,borderColor:void 0,lineWidth:1})}draw(t,i){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.save(),this.position||(t.textAlign="left",t.textBaseline="top"),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),t.font=this.font,this.color&&(t.fillStyle=this.color,t.fillText(this.text,0,0)),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.strokeText(this.text,0,0)),t.restore())}}function A(t,i){return t(i={exports:{}},i.exports),i.exports}k.LEFT_TOP=0,k.CENTER=1,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var O={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},I=A(function(t){var i=Array.prototype.concat,s=Array.prototype.slice,r=t.exports=function(t){for(var r,h=[],n=0,e=t.length;n<e;n++){var a=t[n];(r=a)&&"string"!=typeof r&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name))?h=i.call(h,s.call(a)):h.push(a)}return h};r.wrap=function(t){return function(){return t(r(arguments))}}}),S=A(function(t){var i={};for(var s in O)O.hasOwnProperty(s)&&(i[O[s]]=s);var r=t.exports={to:{},get:{}};function h(t,i,s){return Math.min(Math.max(i,t),s)}function n(t){var i=t.toString(16).toUpperCase();return i.length<2?"0"+i:i}r.get=function(t){var i,s;switch(t.substring(0,3).toLowerCase()){case"hsl":i=r.get.hsl(t),s="hsl";break;case"hwb":i=r.get.hwb(t),s="hwb";break;default:i=r.get.rgb(t),s="rgb"}return i?{model:s,value:i}:null},r.get.rgb=function(t){if(!t)return null;var i,s,r,n=[0,0,0,1];if(i=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=i[2],i=i[1],s=0;s<3;s++){var e=2*s;n[s]=parseInt(i.slice(e,e+2),16)}r&&(n[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(i=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(i=i[1])[3],s=0;s<3;s++)n[s]=parseInt(i[s]+i[s],16);r&&(n[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)n[s]=parseInt(i[s+1],0);i[4]&&(n[3]=parseFloat(i[4]))}else{if(!(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(i=t.match(/(\D+)/))?"transparent"===i[1]?[0,0,0,0]:(n=O[i[1]])?(n[3]=1,n):null:null;for(s=0;s<3;s++)n[s]=Math.round(2.55*parseFloat(i[s+1]));i[4]&&(n[3]=parseFloat(i[4]))}for(s=0;s<3;s++)n[s]=h(n[s],0,255);return n[3]=h(n[3],0,1),n},r.get.hsl=function(t){if(!t)return null;var i=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(i){var s=parseFloat(i[4]);return[(parseFloat(i[1])+360)%360,h(parseFloat(i[2]),0,100),h(parseFloat(i[3]),0,100),h(isNaN(s)?1:s,0,1)]}return null},r.get.hwb=function(t){if(!t)return null;var i=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(i){var s=parseFloat(i[4]);return[(parseFloat(i[1])%360+360)%360,h(parseFloat(i[2]),0,100),h(parseFloat(i[3]),0,100),h(isNaN(s)?1:s,0,1)]}return null},r.to.hex=function(){var t=I(arguments);return"#"+n(t[0])+n(t[1])+n(t[2])+(t[3]<1?n(Math.round(255*t[3])):"")},r.to.rgb=function(){var t=I(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},r.to.rgb.percent=function(){var t=I(arguments),i=Math.round(t[0]/255*100),s=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+i+"%, "+s+"%, "+r+"%)":"rgba("+i+"%, "+s+"%, "+r+"%, "+t[3]+")"},r.to.hsl=function(){var t=I(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},r.to.hwb=function(){var t=I(arguments),i="";return t.length>=4&&1!==t[3]&&(i=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+i+")"},r.to.keyword=function(t){return i[t.slice(0,3)]}}),j=A(function(t){var i={};for(var s in O)O.hasOwnProperty(s)&&(i[O[s]]=s);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var h in r)if(r.hasOwnProperty(h)){if(!("channels"in r[h]))throw new Error("missing channels property: "+h);if(!("labels"in r[h]))throw new Error("missing channel labels property: "+h);if(r[h].labels.length!==r[h].channels)throw new Error("channel and label counts mismatch: "+h);var n=r[h].channels,e=r[h].labels;delete r[h].channels,delete r[h].labels,Object.defineProperty(r[h],"channels",{value:n}),Object.defineProperty(r[h],"labels",{value:e})}r.rgb.hsl=function(t){var i,s,r=t[0]/255,h=t[1]/255,n=t[2]/255,e=Math.min(r,h,n),a=Math.max(r,h,n),o=a-e;return a===e?i=0:r===a?i=(h-n)/o:h===a?i=2+(n-r)/o:n===a&&(i=4+(r-h)/o),(i=Math.min(60*i,360))<0&&(i+=360),s=(e+a)/2,[i,100*(a===e?0:s<=.5?o/(a+e):o/(2-a-e)),100*s]},r.rgb.hsv=function(t){var i,s,r,h,n,e=t[0]/255,a=t[1]/255,o=t[2]/255,u=Math.max(e,a,o),c=u-Math.min(e,a,o),f=function(t){return(u-t)/6/c+.5};return 0===c?h=n=0:(n=c/u,i=f(e),s=f(a),r=f(o),e===u?h=r-s:a===u?h=1/3+i-r:o===u&&(h=2/3+s-i),h<0?h+=1:h>1&&(h-=1)),[360*h,100*n,100*u]},r.rgb.hwb=function(t){var i=t[0],s=t[1],h=t[2];return[r.rgb.hsl(t)[0],1/255*Math.min(i,Math.min(s,h))*100,100*(h=1-1/255*Math.max(i,Math.max(s,h)))]},r.rgb.cmyk=function(t){var i,s=t[0]/255,r=t[1]/255,h=t[2]/255;return[100*((1-s-(i=Math.min(1-s,1-r,1-h)))/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-h-i)/(1-i)||0),100*i]},r.rgb.keyword=function(t){var s=i[t];if(s)return s;var r,h,n,e=Infinity;for(var a in O)if(O.hasOwnProperty(a)){var o=(h=t,n=O[a],Math.pow(h[0]-n[0],2)+Math.pow(h[1]-n[1],2)+Math.pow(h[2]-n[2],2));o<e&&(e=o,r=a)}return r},r.keyword.rgb=function(t){return O[t]},r.rgb.xyz=function(t){var i=t[0]/255,s=t[1]/255,r=t[2]/255;return[100*(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*i+.7152*s+.0722*r),100*(.0193*i+.1192*s+.9505*r)]},r.rgb.lab=function(t){var i=r.rgb.xyz(t),s=i[0],h=i[1],n=i[2];return h/=100,n/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116)-16,500*(s-h),200*(h-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},r.hsl.rgb=function(t){var i,s,r,h,n,e=t[0]/360,a=t[1]/100,o=t[2]/100;if(0===a)return[n=255*o,n,n];i=2*o-(s=o<.5?o*(1+a):o+a-o*a),h=[0,0,0];for(var u=0;u<3;u++)(r=e+1/3*-(u-1))<0&&r++,r>1&&r--,h[u]=255*(n=6*r<1?i+6*(s-i)*r:2*r<1?s:3*r<2?i+(s-i)*(2/3-r)*6:i);return h},r.hsl.hsv=function(t){var i=t[0],s=t[1]/100,r=t[2]/100,h=s,n=Math.max(r,.01);return s*=(r*=2)<=1?r:2-r,h*=n<=1?n:2-n,[i,100*(0===r?2*h/(n+h):2*s/(r+s)),(r+s)/2*100]},r.hsv.rgb=function(t){var i=t[0]/60,s=t[1]/100,r=t[2]/100,h=Math.floor(i)%6,n=i-Math.floor(i),e=255*r*(1-s),a=255*r*(1-s*n),o=255*r*(1-s*(1-n));switch(r*=255,h){case 0:return[r,o,e];case 1:return[a,r,e];case 2:return[e,r,o];case 3:return[e,a,r];case 4:return[o,e,r];case 5:return[r,e,a]}},r.hsv.hsl=function(t){var i,s,r,h=t[0],n=t[1]/100,e=t[2]/100,a=Math.max(e,.01);return r=(2-n)*e,s=n*a,[h,100*(s=(s/=(i=(2-n)*a)<=1?i:2-i)||0),100*(r/=2)]},r.hwb.rgb=function(t){var i,s,r,h,n,e,a,o=t[0]/360,u=t[1]/100,c=t[2]/100,f=u+c;switch(f>1&&(u/=f,c/=f),r=6*o-(i=Math.floor(6*o)),0!=(1&i)&&(r=1-r),h=u+r*((s=1-c)-u),i){default:case 6:case 0:n=s,e=h,a=u;break;case 1:n=h,e=s,a=u;break;case 2:n=u,e=s,a=h;break;case 3:n=u,e=h,a=s;break;case 4:n=h,e=u,a=s;break;case 5:n=s,e=u,a=h}return[255*n,255*e,255*a]},r.cmyk.rgb=function(t){var i=t[1]/100,s=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,s*(1-r)+r))]},r.xyz.rgb=function(t){var i,s,r,h=t[0]/100,n=t[1]/100,e=t[2]/100;return s=-.9689*h+1.8758*n+.0415*e,r=.0557*h+-.204*n+1.057*e,i=(i=3.2406*h+-1.5372*n+-.4986*e)>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(i=Math.min(Math.max(0,i),1)),255*(s=Math.min(Math.max(0,s),1)),255*(r=Math.min(Math.max(0,r),1))]},r.xyz.lab=function(t){var i=t[0],s=t[1],r=t[2];return s/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(i-s),200*(s-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},r.lab.xyz=function(t){var i,s,r;i=t[1]/500+(s=(t[0]+16)/116),r=s-t[2]/200;var h=Math.pow(s,3),n=Math.pow(i,3),e=Math.pow(r,3);return s=h>.008856?h:(s-16/116)/7.787,i=n>.008856?n:(i-16/116)/7.787,r=e>.008856?e:(r-16/116)/7.787,[i*=95.047,s*=100,r*=108.883]},r.lab.lch=function(t){var i,s=t[0],r=t[1],h=t[2];return(i=360*Math.atan2(h,r)/2/Math.PI)<0&&(i+=360),[s,Math.sqrt(r*r+h*h),i]},r.lch.lab=function(t){var i,s=t[1];return i=t[2]/360*2*Math.PI,[t[0],s*Math.cos(i),s*Math.sin(i)]},r.rgb.ansi16=function(t){var i=t[0],s=t[1],h=t[2],n=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(n=Math.round(n/50)))return 30;var e=30+(Math.round(h/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return 2===n&&(e+=60),e},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var i=t[0],s=t[1],r=t[2];return i===s&&s===r?i<8?16:i>248?231:Math.round((i-8)/247*24)+232:16+36*Math.round(i/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5)},r.ansi16.rgb=function(t){var i=t%10;if(0===i||7===i)return t>50&&(i+=3.5),[i=i/10.5*255,i,i];var s=.5*(1+~~(t>50));return[(1&i)*s*255,(i>>1&1)*s*255,(i>>2&1)*s*255]},r.ansi256.rgb=function(t){if(t>=232){var i=10*(t-232)+8;return[i,i,i]}var s;return t-=16,[Math.floor(t/36)/5*255,Math.floor((s=t%36)/6)/5*255,s%6/5*255]},r.rgb.hex=function(t){var i=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(i.length)+i},r.hex.rgb=function(t){var i=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!i)return[0,0,0];var s=i[0];3===i[0].length&&(s=s.split("").map(function(t){return t+t}).join(""));var r=parseInt(s,16);return[r>>16&255,r>>8&255,255&r]},r.rgb.hcg=function(t){var i,s=t[0]/255,r=t[1]/255,h=t[2]/255,n=Math.max(Math.max(s,r),h),e=Math.min(Math.min(s,r),h),a=n-e;return i=a<=0?0:n===s?(r-h)/a%6:n===r?2+(h-s)/a:4+(s-r)/a+4,i/=6,[360*(i%=1),100*a,100*(a<1?e/(1-a):0)]},r.hsl.hcg=function(t){var i,s=t[1]/100,r=t[2]/100,h=0;return(i=r<.5?2*s*r:2*s*(1-r))<1&&(h=(r-.5*i)/(1-i)),[t[0],100*i,100*h]},r.hsv.hcg=function(t){var i=t[2]/100,s=t[1]/100*i,r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},r.hcg.rgb=function(t){var i=t[1]/100,s=t[2]/100;if(0===i)return[255*s,255*s,255*s];var r,h=[0,0,0],n=t[0]/360%1*6,e=n%1,a=1-e;switch(Math.floor(n)){case 0:h[0]=1,h[1]=e,h[2]=0;break;case 1:h[0]=a,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=e;break;case 3:h[0]=0,h[1]=a,h[2]=1;break;case 4:h[0]=e,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=a}return[255*(i*h[0]+(r=(1-i)*s)),255*(i*h[1]+r),255*(i*h[2]+r)]},r.hcg.hsv=function(t){var i=t[1]/100,s=i+t[2]/100*(1-i),r=0;return s>0&&(r=i/s),[t[0],100*r,100*s]},r.hcg.hsl=function(t){var i=t[1]/100,s=t[2]/100*(1-i)+.5*i,r=0;return s>0&&s<.5?r=i/(2*s):s>=.5&&s<1&&(r=i/(2*(1-s))),[t[0],100*r,100*s]},r.hcg.hwb=function(t){var i=t[1]/100,s=i+t[2]/100*(1-i);return[t[0],100*(s-i),100*(1-s)]},r.hwb.hcg=function(t){var i=1-t[2]/100,s=i-t[1]/100,r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var i=255&Math.round(t[0]/100*255),s=((i<<16)+(i<<8)+i).toString(16).toUpperCase();return"000000".substring(s.length)+s},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});function P(t,i){return function(s){return i(t(s))}}function C(t,i){for(var s=[i[t].parent,t],r=j[i[t].parent][t],h=i[t].parent;i[h].parent;)s.unshift(i[h].parent),r=P(j[i[h].parent][h],r),h=i[h].parent;return r.conversion=s,r}var z={};Object.keys(j).forEach(function(t){z[t]={},Object.defineProperty(z[t],"channels",{value:j[t].channels}),Object.defineProperty(z[t],"labels",{value:j[t].labels});var i=function(t){for(var i=function(t){var i=function(){for(var t={},i=Object.keys(j),s=i.length,r=0;r<s;r++)t[i[r]]={distance:-1,parent:null};return t}(),s=[t];for(i[t].distance=0;s.length;)for(var r=s.pop(),h=Object.keys(j[r]),n=h.length,e=0;e<n;e++){var a=h[e],o=i[a];-1===o.distance&&(o.distance=i[r].distance+1,o.parent=r,s.unshift(a))}return i}(t),s={},r=Object.keys(i),h=r.length,n=0;n<h;n++){var e=r[n];null!==i[e].parent&&(s[e]=C(e,i))}return s}(t);Object.keys(i).forEach(function(s){var r=i[s];z[t][s]=function(t){var i=function(i){if(null==i)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var s=t(i);if("object"==typeof s)for(var r=s.length,h=0;h<r;h++)s[h]=Math.round(s[h]);return s};return"conversion"in t&&(i.conversion=t.conversion),i}(r),z[t][s].raw=function(t){var i=function(i){return null==i?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(i.conversion=t.conversion),i}(r)})});var F=z,E=[].slice,T=["keyword","gray","hex"],L={};Object.keys(F).forEach(function(t){L[E.call(F[t].labels).sort().join("")]=t});var D={};function N(t,i){if(!(this instanceof N))return new N(t,i);if(i&&i in T&&(i=null),i&&!(i in F))throw new Error("Unknown model: "+i);var s,r;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof N)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=S.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,this.color=h.value.slice(0,r=F[this.model].channels),this.valpha="number"==typeof h.value[r]?h.value[r]:1}else if(t.length){this.model=i||"rgb";var n=E.call(t,0,r=F[this.model].channels);this.color=_(n,r),this.valpha="number"==typeof t[r]?t[r]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var e=Object.keys(t);"alpha"in t&&(e.splice(e.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var a=e.sort().join("");if(!(a in L))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=L[a];var o=F[this.model].labels,u=[];for(s=0;s<o.length;s++)u.push(t[o[s]]);this.color=_(u)}if(D[this.model])for(r=F[this.model].channels,s=0;s<r;s++){var c=D[this.model][s];c&&(this.color[s]=c(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function q(t,i,s){return(t=Array.isArray(t)?t:[t]).forEach(function(t){(D[t]||(D[t]=[]))[i]=s}),t=t[0],function(r){var h;return arguments.length?(s&&(r=s(r)),(h=this[t]()).color[i]=r,h):(h=this[t]().color[i],s&&(h=s(h)),h)}}function B(t){return function(i){return Math.max(0,Math.min(t,i))}}function R(t){return Array.isArray(t)?t:[t]}function _(t,i){for(var s=0;s<i;s++)"number"!=typeof t[s]&&(t[s]=0);return t}N.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var i=this.model in S.to?this:this.rgb(),s=1===(i=i.round("number"==typeof t?t:1)).valpha?i.color:i.color.concat(this.valpha);return S.to[i.model](s)},percentString:function(t){var i=this.rgb().round("number"==typeof t?t:1),s=1===i.valpha?i.color:i.color.concat(this.valpha);return S.to.rgb.percent(s)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},i=F[this.model].channels,s=F[this.model].labels,r=0;r<i;r++)t[s[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new N(this.color.map(function(t){return function(i){return function(t,i){return Number(t.toFixed(i))}(i,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new N(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:q("rgb",0,B(255)),green:q("rgb",1,B(255)),blue:q("rgb",2,B(255)),hue:q(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:q("hsl",1,B(100)),lightness:q("hsl",2,B(100)),saturationv:q("hsv",1,B(100)),value:q("hsv",2,B(100)),chroma:q("hcg",1,B(100)),gray:q("hcg",2,B(100)),white:q("hwb",1,B(100)),wblack:q("hwb",2,B(100)),cyan:q("cmyk",0,B(100)),magenta:q("cmyk",1,B(100)),yellow:q("cmyk",2,B(100)),black:q("cmyk",3,B(100)),x:q("xyz",0,B(100)),y:q("xyz",1,B(100)),z:q("xyz",2,B(100)),l:q("lab",0,B(100)),a:q("lab",1),b:q("lab",2),keyword:function(t){return arguments.length?new N(t):F[this.model].keyword(this.color)},hex:function(t){return arguments.length?new N(t):S.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,i=[],s=0;s<t.length;s++){var r=t[s]/255;i[s]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*i[0]+.7152*i[1]+.0722*i[2]},contrast:function(t){var i=this.luminosity(),s=t.luminosity();return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)},level:function(t){var i=this.contrast(t);return i>=7.1?"AAA":i>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),i=0;i<3;i++)t.color[i]=255-t.color[i];return t},lighten:function(t){var i=this.hsl();return i.color[2]+=i.color[2]*t,i},darken:function(t){var i=this.hsl();return i.color[2]-=i.color[2]*t,i},saturate:function(t){var i=this.hsl();return i.color[1]+=i.color[1]*t,i},desaturate:function(t){var i=this.hsl();return i.color[1]-=i.color[1]*t,i},whiten:function(t){var i=this.hwb();return i.color[1]+=i.color[1]*t,i},blacken:function(t){var i=this.hwb();return i.color[2]+=i.color[2]*t,i},grayscale:function(){var t=this.rgb().color,i=.3*t[0]+.59*t[1]+.11*t[2];return N.rgb(i,i,i)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var i=this.hsl(),s=i.color[0];return i.color[0]=s=(s=(s+t)%360)<0?360+s:s,i},mix:function(t,i){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var s=t.rgb(),r=this.rgb(),h=void 0===i?.5:i,n=2*h-1,e=s.alpha()-r.alpha(),a=((n*e==-1?n:(n+e)/(1+n*e))+1)/2,o=1-a;return N.rgb(a*s.red()+o*r.red(),a*s.green()+o*r.green(),a*s.blue()+o*r.blue(),s.alpha()*h+r.alpha()*(1-h))}},Object.keys(F).forEach(function(t){if(-1===T.indexOf(t)){var i=F[t].channels;N.prototype[t]=function(){if(this.model===t)return new N(this);if(arguments.length)return new N(arguments,t);var s="number"==typeof arguments[i]?i:this.valpha;return new N(R(F[this.model][t].raw(this.color)).concat(s),t)},N[t]=function(s){return"number"==typeof s&&(s=_(E.call(arguments),i)),new N(s,t)}}});var W=N,G=64,U=4,V=G>>1;class J extends y{constructor(t){super(t)}static getGradientImage(t,i,s){var r,h,n=t>>U,e=i>>U,a=s>>U;if(!J.Gradient)for(J.Gradient=new Array(256>>U),r=0;r<J.Gradient.length;r++)for(J.Gradient[r]=new Array(256>>U),h=0;h<J.Gradient[r].length;h++)J.Gradient[r][h]=new Array(256>>U);return J.Gradient[n][e][a]||(J.Gradient[n][e][a]=J.generateGradientImage(n,e,a)),J.Gradient[n][e][a]}static generateGradientImage(t,i,s){var r=document.createElement("canvas");r.width=r.height=G;var h=r.getContext("2d");h.globalAlpha=1,h.globalCompositeOperation="source-over",h.clearRect(0,0,G,G);var n=h.createRadialGradient(V,V,0,V,V,V);return n.addColorStop(0,"rgba("+((t<<U)+(1<<U)-1)+","+((i<<U)+(1<<U)-1)+","+((s<<U)+(1<<U)-1)+",1)"),n.addColorStop(.3,"rgba("+((t<<U)+(1<<U)-1)+","+((i<<U)+(1<<U)-1)+","+((s<<U)+(1<<U)-1)+",0.4)"),n.addColorStop(1,"rgba("+((t<<U)+(1<<U)-1)+","+((i<<U)+(1<<U)-1)+","+((s<<U)+(1<<U)-1)+",0)"),h.fillStyle=n,h.fillRect(0,0,G,G),r}draw(t,i){if(this.enabled){this.color&&this.color.color||(this.color=W(this.color).rgb());var s=this.color.color;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.imageSmoothingEnabled=this.scaleX*i.widthInPixel/i.width>G,t.drawImage(J.getGradientImage(s[0],s[1],s[2]),0,0,G,G,this.x-this.scaleX/2,this.y-this.scaleY/2,this.scaleX,this.scaleY),t.imageSmoothingEnabled=!0}}}J.Gradient=null;var $=A(function(t,i){t.exports=function(){var t=2*Math.PI,i=function(t,i,s,r,h,n,e){var a=t.x,o=t.y;return{x:r*(a*=i)-h*(o*=s)+n,y:h*a+r*o+e}},s=function(t,i){var s=4/3*Math.tan(i/4),r=Math.cos(t),h=Math.sin(t),n=Math.cos(t+i),e=Math.sin(t+i);return[{x:r-h*s,y:h+r*s},{x:n+e*s,y:e-n*s},{x:n,y:e}]},r=function(t,i,s,r){var h=t*r-i*s<0?-1:1,n=(t*s+i*r)/(Math.sqrt(t*t+i*i)*Math.sqrt(t*t+i*i));return n>1&&(n=1),n<-1&&(n=-1),h*Math.acos(n)},h=function(h){var n=h.px,e=h.py,a=h.cx,o=h.cy,u=h.rx,c=h.ry,f=h.xAxisRotation,l=void 0===f?0:f,v=h.largeArcFlag,d=void 0===v?0:v,w=h.sweepFlag,y=void 0===w?0:w,m=[];if(0===u||0===c)return[];var g=Math.sin(l*t/360),p=Math.cos(l*t/360),M=p*(n-a)/2+g*(e-o)/2,b=-g*(n-a)/2+p*(e-o)/2;if(0===M&&0===b)return[];u=Math.abs(u),c=Math.abs(c);var x=Math.pow(M,2)/Math.pow(u,2)+Math.pow(b,2)/Math.pow(c,2);x>1&&(u*=Math.sqrt(x),c*=Math.sqrt(x));var k=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var s=[],r=!0,h=!1,n=void 0;try{for(var e,a=t[Symbol.iterator]();!(r=(e=a.next()).done)&&(s.push(e.value),4!==s.length);r=!0);}catch(t){h=!0,n=t}finally{try{!r&&a.return&&a.return()}finally{if(h)throw n}}return s}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(i,s,h,n,e,a,o,u,c,f,l,v){var d=Math.pow(e,2),w=Math.pow(a,2),y=Math.pow(l,2),m=Math.pow(v,2),g=d*w-d*m-w*y;g<0&&(g=0),g/=d*m+w*y;var p=(g=Math.sqrt(g)*(o===u?-1:1))*e/a*v,M=g*-a/e*l,b=f*p-c*M+(i+h)/2,x=c*p+f*M+(s+n)/2,k=(l-p)/e,A=(v-M)/a,O=(-l-p)/e,I=(-v-M)/a,S=r(1,0,k,A),j=r(k,A,O,I);return 0===u&&j>0&&(j-=t),1===u&&j<0&&(j+=t),[b,x,S,j]}(n,e,a,o,u,c,d,y,g,p,M,b)),A=k[0],O=k[1],I=k[2],S=k[3],j=Math.max(Math.ceil(Math.abs(S)/(t/4)),1);S/=j;for(var P=0;P<j;P++)m.push(s(I,S)),I+=S;return m.map(function(t){var s=i(t[0],u,c,p,g,A,O),r=s.x,h=s.y,n=i(t[1],u,c,p,g,A,O),e=n.x,a=n.y,o=i(t[2],u,c,p,g,A,O);return{x1:r,y1:h,x2:e,y2:a,x:o.x,y:o.y}})},n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var i=t[0][0],s=t[0][1],r=i,h=s;return t.forEach(function(t){var n=t[0],e=t[2],a=t[4],o=t[6],u=t[1],c=t[3],f=t[5],l=t[7];i=Math.min(i,n,e,a,o),s=Math.min(s,u,c,f,l),r=Math.max(r,n,e,a,o),h=Math.max(h,u,c,f,l)}),[i,s,r,h]}var u={};function c(t,i,s,r,h,n,e,a,o,u){var c=(s-t)*o+t,f=(r-i)*o+i,l=(h-s)*o+s,v=(n-r)*o+r,d=(l-c)*o+c,w=(v-f)*o+f,y=(((e-h)*o+h-l)*o+l-d)*o+d,m=(((a-n)*o+n-v)*o+v-w)*o+w;return u?[y,m,d,w,c,f,t,i]:[t,i,c,f,d,w,y,m]}return u.parser=function(t){var i=[];return t.replace(e,function(t,s,r){var h=s.toLowerCase();for(r=function(t){var i=t.match(a);return i?i.map(Number):[]}(r),"m"==h&&r.length>2&&(i.push([s].concat(r.splice(0,2))),h="l",s="m"==s?"l":"L");;){if(r.length==n[h])return r.unshift(s),i.push(r);if(r.length<n[h])throw new Error("malformed path data");i.push([s].concat(r.splice(0,n[h])))}}),i},u.lerpCurve=function(t,i,s){return u.lerpPoints(t[0],t[1],i[0],i[1],s).concat(u.lerpPoints(t[2],t[3],i[2],i[3],s)).concat(u.lerpPoints(t[4],t[5],i[4],i[5],s)).concat(u.lerpPoints(t[6],t[7],i[6],i[7],s))},u.lerpPoints=function(t,i,s,r,h){return[t+(s-t)*h,i+(r-i)*h]},u.q2b=function(t,i,s,r,h,n){return[t,i,(t+2*s)/3,(i+2*r)/3,(h+2*s)/3,(n+2*r)/3,h,n]},u.path2shapes=function(t){for(var i=u.parser(t),s=0,r=0,n=0,e=i.length,a=[],o=null,c=void 0,f=void 0,l=void 0,v=void 0,d=void 0,w=void 0,y=void 0;n<e;n++){var m=i[n],g=i[n-1];switch(m[0]){case"m":a[d=a.length]=[],o=a[d],s+=m[1],r+=m[2];break;case"M":a[d=a.length]=[],o=a[d],s=m[1],r=m[2];break;case"l":o.push([s,r,s,r,s,r,s+m[1],r+m[2]]),s+=m[1],r+=m[2];break;case"L":o.push([s,r,m[1],m[2],m[1],m[2],m[1],m[2]]),s=m[1],r=m[2];break;case"h":o.push([s,r,s,r,s,r,s+m[1],r]),s+=m[1];break;case"H":o.push([s,r,m[1],r,m[1],r,m[1],r]),s=m[1];break;case"v":o.push([s,r,s,r,s,r,s,r+m[1]]),r+=m[1];break;case"V":o.push([s,r,s,m[1],s,m[1],s,m[1]]),r=m[1];break;case"C":o.push([s,r,m[1],m[2],m[3],m[4],m[5],m[6]]),s=m[5],r=m[6];break;case"S":"C"===g[0]||"c"===g[0]?o.push([s,r,s+g[5]-g[3],r+g[6]-g[4],m[1],m[2],m[3],m[4]]):"S"!==g[0]&&"s"!==g[0]||o.push([s,r,s+g[3]-g[1],r+g[4]-g[2],m[1],m[2],m[3],m[4]]),s=m[3],r=m[4];break;case"c":o.push([s,r,s+m[1],r+m[2],s+m[3],r+m[4],s+m[5],r+m[6]]),s+=m[5],r+=m[6];break;case"s":"C"===g[0]||"c"===g[0]?o.push([s,r,s+g[5]-g[3],r+g[6]-g[4],s+m[1],r+m[2],s+m[3],r+m[4]]):"S"!==g[0]&&"s"!==g[0]||o.push([s,r,s+g[3]-g[1],r+g[4]-g[2],s+m[1],r+m[2],s+m[3],r+m[4]]),s+=m[3],r+=m[4];break;case"a":y=(w=h({rx:m[1],ry:m[2],px:s,py:r,xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5],cx:s+m[6],cy:r+m[7]}))[w.length-1],w.forEach(function(t,i){o.push(0===i?[s,r,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[w[i-1].x,w[i-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),s=y.x,r=y.y;break;case"A":y=(w=h({rx:m[1],ry:m[2],px:s,py:r,xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5],cx:m[6],cy:m[7]}))[w.length-1],w.forEach(function(t,i){o.push(0===i?[s,r,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[w[i-1].x,w[i-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),s=y.x,r=y.y;break;case"Q":o.push(u.q2b(s,r,m[1],m[2],m[3],m[4])),s=m[3],r=m[4];break;case"q":o.push(u.q2b(s,r,s+m[1],r+m[2],m[3]+s,m[4]+r)),s+=m[3],r+=m[4];break;case"T":"Q"===g[0]||"q"===g[0]?o.push(u.q2b(s,r,l=s+g[3]-g[1],v=r+g[4]-g[2],m[1],m[2])):"T"!==g[0]&&"t"!==g[0]||(o.push(u.q2b(s,r,s+s-l,r+r-v,m[1],m[2])),l=s+s-l,v=r+r-v),s=m[1],r=m[2];break;case"t":"Q"===g[0]||"q"===g[0]?o.push(u.q2b(s,r,l=s+g[3]-g[1],v=r+g[4]-g[2],s+m[1],r+m[2])):"T"!==g[0]&&"t"!==g[0]||(o.push(u.q2b(s,r,s+s-l,r+r-v,s+m[1],r+m[2])),l=s+s-l,v=r+r-v),s+=m[1],r+=m[2];break;case"Z":case"z":o.push([s,r,c=o[0][0],f=o[0][1],c,f,c,f])}}return a},u.H=function(t,i){for(var s=0,r=0,h=t.length;s<i;s++)t.push(t[r].slice(0)),++r>h-1&&(r-=h)},u.X=function(t,i){for(var s,r,h,n,e,a,o,u,f=0,l=0;f<i;f++){var v=t[l],d={left:c(s=v[0],r=v[1],h=v[2],n=v[3],e=v[4],a=v[5],o=v[6],u=v[7],.5),right:c(o,u,e,a,h,n,s,r,.5,!0)};t.splice(l,1),t.splice(l,0,d.left,d.right),(l+=2)>=t.length-1&&(l=0)}},u.Y=function(t,i){for(var s=function(i){var s=[];t[t.length-1].forEach(function(t){s.push(t.slice(0))}),t.push(s)},r=0;r<i;r++)s()},u.Z=function(t,i){for(var s=function(i){var s=t[t.length-1],r=[],h=s[0][0],n=s[0][1];s.forEach(function(){r.push([h,n,h,n,h,n,h,n])}),t.push(r)},r=0;r<i;r++)s()},u.lerp=function(t,i,s){return u.K(u.path2shapes(t),u.path2shapes(i),s)},u.MIM_CURVES_COUNT=100,u.tt=function(t,i){var s=t.length,r=i.length,h=JSON.parse(JSON.stringify(t)),n=JSON.parse(JSON.stringify(i));return s>r?u.Z(n,s-r):s<r&&u.Y(h,r-s),(h=function(t,i){var s=function(t){for(var i=[],s=0;s<t;s++)i.push(s);return r=[],h=[],function t(i){var s,n;for(s=0;s<i.length;s++)n=i.splice(s,1)[0],h.push(n),0==i.length&&r.push(h.slice()),t(i),i.splice(s,0,n),h.pop();return r}(i);var r,h}(t.length),r=[];s.forEach(function(s){var h=0;s.forEach(function(s){var r,n;h+=(r=o(t[s]),n=o(i[s]),Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2))+Math.sqrt(Math.pow(r[2]-n[2],2)+Math.pow(r[3]-n[3],2)))}),r.push({index:s,distance:h})}),r.sort(function(t,i){return t.distance-i.distance});var h=[];return r[0].index.forEach(function(i){h.push(t[i])}),h}(h,n)).forEach(function(t,i){var s=t.length,r=n[i].length;s>r?s<u.MIM_CURVES_COUNT?(u.X(t,u.MIM_CURVES_COUNT-s),u.X(n[i],u.MIM_CURVES_COUNT-r)):u.X(n[i],s-r):s<r&&(r<u.MIM_CURVES_COUNT?(u.X(t,u.MIM_CURVES_COUNT-s),u.X(n[i],u.MIM_CURVES_COUNT-r)):u.X(t,r-s))}),h.forEach(function(t,i){h[i]=function(t,i){var s=function(t){for(var i=[],s=0;s<t;s++){for(var r=[],h=0;h<t;h++){var n=h+s;n>t-1&&(n-=t),r[n]=h}i.push(r)}return i}(t.length),r=[];s.forEach(function(s){var h=0,n=0;s.forEach(function(s){var r,e,a,o,u,c,f,l,v,d,w,y,m,g,p,M;h+=(e=i[n++],a=(r=t[s])[2],o=r[4],u=r[6],c=r[1],f=r[3],l=r[5],v=r[7],d=e[2],w=e[4],y=e[6],m=e[1],g=e[3],p=e[5],M=e[7],Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(m-c,2))+Math.sqrt(Math.pow(d-a,2)+Math.pow(g-f,2))+Math.sqrt(Math.pow(w-o,2)+Math.pow(p-l,2))+Math.sqrt(Math.pow(y-u,2)+Math.pow(M-v,2)))}),r.push({index:s,distance:h})}),r.sort(function(t,i){return t.distance-i.distance});var h=[];return r[0].index.forEach(function(i){h.push(t[i])}),h}(t,n[i])}),[h,n]},u.K=function(t,i,s){var r=[];return t.forEach(function(t,h){var n=[];t.forEach(function(t,r){n.push(u.lerpCurve(t,i[h][r],s))}),r.push(n)}),r},u.animate=function(t){var i=u.path2shapes(t.from),s=u.path2shapes(t.to),r=u.tt(i,s),h=new Date,n=t.end||function(){},e=t.progress||function(){},a=t.easing||function(t){return t},o=null,c=null,f=t.time;(t.begin||function(){})(i),function t(){var i=new Date-h;if(i>=f)return e(c=s,1),n(c),void cancelAnimationFrame(o);var l=a(i/f);c=u.K(r[0],r[1],l),e(c,l),o=requestAnimationFrame(t)}()},u}()});class H extends g{constructor(t){if(super(t),this.oldPath=void 0,this.path2D=new Path2D,this.polyfill)if("function"!=typeof Path2D){var i=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.src="https://cdn.jsdelivr.net/npm/canvas-5-polyfill@0.1.5/canvas.min.js",i.appendChild(s)}else{var r=document.createElement("canvas").getContext("2d");r.stroke(new Path2D("M0,0H1")),r.getImageData(0,0,1,1).data[3]&&(this.polyfill=!1)}}getParameterList(){return Object.assign({},super.getParameterList(),{path:void 0,color:void 0,borderColor:void 0,lineWidth:1,clip:!1,fixed:!1,polyfill:!0})}changeToPathInit(t,i){return $.tt("string"==typeof t?$.path2shapes(t):t,"string"==typeof i?$.path2shapes(i):i)}changeToPath(t,i,s){return $.K(i.pathFrom,i.pathTo,t)}draw(t,i){if(this.enabled){var s=this.alpha*i.alpha;this.oldPath!==this.path&&(this.polyfill&&"string"==typeof this.path&&(this.path=$.path2shapes(this.path)),Array.isArray(this.path)?(this.path2D=new Path2D,this.path.forEach(t=>{this.path2D.moveTo(t[0][0],t[0][1]),t.forEach(t=>{this.path2D.bezierCurveTo(t[2],t[3],t[4],t[5],t[6],t[7])}),this.path2D.closePath()})):this.path2D=new Path2D(this.path),this.oldPath=this.path);var r=this.scaleX,h=this.scaleY;for(var n in this.fixed&&(0==r&&(r=1e-10),0==h&&(h=1e-10)),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=s,t.save(),t.translate(this.x,this.y),t.scale(r,h),t.rotate(this.rotation),this.color&&(t.fillStyle=this.color,t.fill(this.path2D)),t.save(),this.clip&&(t.clip(this.path2D),this.fixed&&(t.rotate(-this.rotation),t.scale(1/r,1/h),t.translate(-this.x,-this.y))),this.sprite)this.sprite[n].draw(t,i);t.restore(),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.stroke(this.path2D)),t.restore()}}}class Q extends y{constructor(t){super(t)}getParameterList(){return Object.assign({},super.getParameterList(),{x:void 0,y:void 0,width:void 0,height:void 0,borderColor:void 0,lineWidth:1,clear:!1,norm:(i,s,r)=>n(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height)})}normalizeFullScreen(t){(void 0===this.x||this.norm)&&(this.x=t.visibleScreen.x),(void 0===this.y||this.norm)&&(this.y=t.visibleScreen.y),(void 0===this.width||this.norm)&&(this.width=t.visibleScreen.width),(void 0===this.height||this.norm)&&(this.height=t.visibleScreen.height)}resize(t,i){this.normalizeFullScreen(i)}draw(t,i){if(this.enabled)if(this.width||(this.width=i.width),this.height||(this.height=i.height),void 0===this.x&&(this.x=i.x),void 0===this.y&&(this.y=i.y),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0===this.rotation)this.clear?t.clearRect(this.x,this.y,this.width,this.height):(t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(this.x,this.y,this.width,this.height),t.stroke());else{var s=this.width/2,r=this.height/2;t.save(),t.translate(this.x+s,this.y+r),t.rotate(this.rotation),this.clear?t.clearRect(-s,-r,this.width,this.height):(t.fillStyle=this.color,t.fillRect(-s,-r,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(-s,-r,this.width,this.height),t.stroke()),t.restore()}}}class X extends M{constructor(i){var s=t(i.text),r=Array.isArray(s)?s:[...s];super(Object.assign({},i,{class:k,count:r.length,text:t=>r[t],enabled:s=>" "!==r[s]&&t(i.enabled,s)}))}}function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Z=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],K=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function tt(t,i,s,r,h){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===Y(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var n=t.getContext("2d");try{return n.getImageData(i,s,r,h)}catch(t){throw new Error("unable to access image data: "+t)}}function it(t,i,s,r,h,n){if(!(isNaN(n)||n<1)){n|=0;var e=tt(t,i,s,r,h);e=st(e,0,0,r,h,n),t.getContext("2d").putImageData(e,i,s)}}function st(t,i,s,r,h,n){var e,a,o,u,c,f,l,v,d,w,y,m,g,p,M,b,x,k,A,O,I,S,j,P,C,z=t.data,F=2*n+1,E=r-1,T=h-1,L=n+1,D=L*(L+1)/2,N=new nt,q=N;for(o=1;o<F;o++)q=q.next=new nt,o===L&&(C=q);q.next=N;var B=null,R=null;l=f=0;var _=Z[n],W=K[n];for(a=0;a<h;a++){for(b=x=k=A=v=d=w=y=0,m=L*(O=z[f]),g=L*(I=z[f+1]),p=L*(S=z[f+2]),M=L*(j=z[f+3]),v+=D*O,d+=D*I,w+=D*S,y+=D*j,q=N,o=0;o<L;o++)q.r=O,q.g=I,q.b=S,q.a=j,q=q.next;for(o=1;o<L;o++)v+=(q.r=O=z[u=f+((E<o?E:o)<<2)])*(P=L-o),d+=(q.g=I=z[u+1])*P,w+=(q.b=S=z[u+2])*P,y+=(q.a=j=z[u+3])*P,b+=O,x+=I,k+=S,A+=j,q=q.next;for(B=N,R=C,e=0;e<r;e++)z[f+3]=j=y*_>>W,0!==j?(z[f]=(v*_>>W)*(j=255/j),z[f+1]=(d*_>>W)*j,z[f+2]=(w*_>>W)*j):z[f]=z[f+1]=z[f+2]=0,v-=m,d-=g,w-=p,y-=M,m-=B.r,g-=B.g,p-=B.b,M-=B.a,u=l+((u=e+n+1)<E?u:E)<<2,v+=b+=B.r=z[u],d+=x+=B.g=z[u+1],w+=k+=B.b=z[u+2],y+=A+=B.a=z[u+3],B=B.next,m+=O=R.r,g+=I=R.g,p+=S=R.b,M+=j=R.a,b-=O,x-=I,k-=S,A-=j,R=R.next,f+=4;l+=r}for(e=0;e<r;e++){for(x=k=A=b=d=w=y=v=0,m=L*(O=z[f=e<<2]),g=L*(I=z[f+1]),p=L*(S=z[f+2]),M=L*(j=z[f+3]),v+=D*O,d+=D*I,w+=D*S,y+=D*j,q=N,o=0;o<L;o++)q.r=O,q.g=I,q.b=S,q.a=j,q=q.next;for(c=r,o=1;o<=n;o++)v+=(q.r=O=z[f=c+e<<2])*(P=L-o),d+=(q.g=I=z[f+1])*P,w+=(q.b=S=z[f+2])*P,y+=(q.a=j=z[f+3])*P,b+=O,x+=I,k+=S,A+=j,q=q.next,o<T&&(c+=r);for(f=e,B=N,R=C,a=0;a<h;a++)z[3+(u=f<<2)]=j=y*_>>W,j>0?(z[u]=(v*_>>W)*(j=255/j),z[u+1]=(d*_>>W)*j,z[u+2]=(w*_>>W)*j):z[u]=z[u+1]=z[u+2]=0,v-=m,d-=g,w-=p,y-=M,m-=B.r,g-=B.g,p-=B.b,M-=B.a,u=e+((u=a+L)<T?u:T)*r<<2,v+=b+=B.r=z[u],d+=x+=B.g=z[u+1],w+=k+=B.b=z[u+2],y+=A+=B.a=z[u+3],B=B.next,m+=O=R.r,g+=I=R.g,p+=S=R.b,M+=j=R.a,b-=O,x-=I,k-=S,A-=j,R=R.next,f+=r}return t}function rt(t,i,s,r,h,n){if(!(isNaN(n)||n<1)){n|=0;var e=tt(t,i,s,r,h);e=ht(e,0,0,r,h,n),t.getContext("2d").putImageData(e,i,s)}}function ht(t,i,s,r,h,n){var e,a,o,u,c,f,l,v,d,w,y,m,g,p,M,b,x,k,A,O,I,S=t.data,j=2*n+1,P=r-1,C=h-1,z=n+1,F=z*(z+1)/2,E=new nt,T=E;for(o=1;o<j;o++)T=T.next=new nt,o===z&&(I=T);T.next=E;var L=null,D=null;l=f=0;var N=Z[n],q=K[n];for(a=0;a<h;a++){for(p=M=b=v=d=w=0,y=z*(x=S[f]),m=z*(k=S[f+1]),g=z*(A=S[f+2]),v+=F*x,d+=F*k,w+=F*A,T=E,o=0;o<z;o++)T.r=x,T.g=k,T.b=A,T=T.next;for(o=1;o<z;o++)v+=(T.r=x=S[u=f+((P<o?P:o)<<2)])*(O=z-o),d+=(T.g=k=S[u+1])*O,w+=(T.b=A=S[u+2])*O,p+=x,M+=k,b+=A,T=T.next;for(L=E,D=I,e=0;e<r;e++)S[f]=v*N>>q,S[f+1]=d*N>>q,S[f+2]=w*N>>q,v-=y,d-=m,w-=g,y-=L.r,m-=L.g,g-=L.b,u=l+((u=e+n+1)<P?u:P)<<2,v+=p+=L.r=S[u],d+=M+=L.g=S[u+1],w+=b+=L.b=S[u+2],L=L.next,y+=x=D.r,m+=k=D.g,g+=A=D.b,p-=x,M-=k,b-=A,D=D.next,f+=4;l+=r}for(e=0;e<r;e++){for(M=b=p=d=w=v=0,y=z*(x=S[f=e<<2]),m=z*(k=S[f+1]),g=z*(A=S[f+2]),v+=F*x,d+=F*k,w+=F*A,T=E,o=0;o<z;o++)T.r=x,T.g=k,T.b=A,T=T.next;for(c=r,o=1;o<=n;o++)v+=(T.r=x=S[f=c+e<<2])*(O=z-o),d+=(T.g=k=S[f+1])*O,w+=(T.b=A=S[f+2])*O,p+=x,M+=k,b+=A,T=T.next,o<C&&(c+=r);for(f=e,L=E,D=I,a=0;a<h;a++)S[u=f<<2]=v*N>>q,S[u+1]=d*N>>q,S[u+2]=w*N>>q,v-=y,d-=m,w-=g,y-=L.r,m-=L.g,g-=L.b,u=e+((u=a+z)<C?u:C)*r<<2,v+=p+=L.r=S[u],d+=M+=L.g=S[u+1],w+=b+=L.b=S[u+2],L=L.next,y+=x=D.r,m+=k=D.g,g+=A=D.b,p-=x,M-=k,b-=A,D=D.next,f+=r}return t}var nt=function t(){!function(i,s){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},et={BlurStack:nt,image:function(t,i,s,r){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var h=t.naturalWidth,n=t.naturalHeight;if("string"==typeof i&&(i=document.getElementById(i)),i&&"getContext"in i){i.style.width=h+"px",i.style.height=n+"px",i.width=h,i.height=n;var e=i.getContext("2d");e.clearRect(0,0,h,n),e.drawImage(t,0,0),isNaN(s)||s<1||(r?it(i,0,0,h,n,s):rt(i,0,0,h,n,s))}}},canvasRGBA:it,canvasRGB:rt,imageDataRGBA:st,imageDataRGB:ht},{imageDataRGBA:at}=et;class ot extends b{constructor(t){super(t),this.currentGridSize=!1,this.currentRadiusPart=void 0}getParameterList(){return Object.assign({},super.getParameterList(),{onCanvas:!1,radius:void 0,radiusPart:void 0})}normalizeFullScreen(t){this.norm&&this.onCanvas?(this.x=0,this.y=0,this.width=t.widthInPixel,this.height=t.heightInPixel):super.normalizeFullScreen(t)}resize(t,i){super.resize(t,i),this.radiusPart&&(this.radius=void 0)}additionalBlur(t,i,s){this.imageData=this.tctx.getImageData(0,0,t,i),at(this.imageData,0,0,t,i,s.radius),this.tctx.putImageData(this.imageData,0,0)}draw(t,i){if(this.enabled){void 0!==this.radius&&this.currentRadiusPart===this.radiusPart||(this.radius=Math.round((i.widthInPixel+i.heightInPixel)/2/this.radiusPart),this.currentRadiusPart=this.radiusPart);var s=Math.round(this.radius);if(s)if(this.onCanvas){void 0!==this.width&&void 0!==this.height||this.normalizeFullScreen(i);var r=Math.round(this.x),h=Math.round(this.y),n=Math.round(this.width),e=Math.round(this.height);this.imageData=t.getImageData(r,h,n,e),at(this.imageData,0,0,n-r,e-h,s),t.putImageData(this.imageData,r,h,0,0,n,e)}else i.radius=s,super.draw(t,i)}else super.draw(t,i)}}var{imageDataRGBA:ut}=et;class ct extends p{constructor(t){super(t),this.currentGridSize=!1,this.currentRadiusPart=void 0}getParameterList(){return Object.assign({},super.getParameterList(),{radius:void 0,radiusPart:void 0})}resize(t,i){super.resize(t,i),this.radiusPart&&(this.radius=void 0)}additionalBlur(t,i,s){s.radius&&(this.imageData=this.tctx.getImageData(0,0,t,i),ut(this.imageData,0,0,t,i,s.radius),this.tctx.putImageData(this.imageData,0,0))}draw(t,i){this.enabled&&(void 0!==this.radius&&this.currentRadiusPart===this.radiusPart||(this.radius=Math.round((i.widthInPixel+i.heightInPixel)/2/this.radiusPart),this.currentRadiusPart=this.radiusPart),i.radius=Math.round(this.radius),super.draw(t,i))}}class ft extends Q{constructor(t){super(t),void 0!==this.x&&void 0!==this.y&&this.width&&this.height&&this.lineWidth?this.init():this.centerX=void 0}getParameterList(){return Object.assign({},super.getParameterList(),{count:40,moveX:0,moveY:0,moveZ:0,lineWidth:void 0,highScale:!0})}init(){this.centerX=this.width/2+this.x,this.centerY=this.height/2+this.y,this.scaleZ=Math.max(this.width,this.height)/2,this.starsX=[],this.starsY=[],this.starsZ=[],this.starsOldX=[],this.starsOldY=[],this.starsNewX=[],this.starsNewY=[],this.starsEnabled=[],this.starsLineWidth=[];for(var t=0;t<this.count;t++)this.starsX[t]=Math.random()*this.width-this.width/2,this.starsY[t]=Math.random()*this.height-this.height/2,this.starsZ[t]=Math.random()*this.scaleZ}moveStar(t,i,s){s&&(this.starsEnabled[t]=!0);for(var r=this.width/2,h=this.height/2,n=this.starsX[t]+this.moveX*i,e=this.starsY[t]+this.moveY*i,a=this.starsZ[t]+this.moveZ*i;n<-r;)n+=this.width,e=Math.random()*this.height-h,this.starsEnabled[t]=!1;for(;n>r;)n-=this.width,e=Math.random()*this.height-h,this.starsEnabled[t]=!1;for(;e<-h;)e+=this.height,n=Math.random()*this.width-r,this.starsEnabled[t]=!1;for(;e>h;)e-=this.height,n=Math.random()*this.width-r,this.starsEnabled[t]=!1;for(;a<=0;)a+=this.scaleZ,n=Math.random()*this.width-r,e=Math.random()*this.height-h,this.starsEnabled[t]=!1;for(;a>this.scaleZ;)a-=this.scaleZ,n=Math.random()*this.width-r,e=Math.random()*this.height-h,this.starsEnabled[t]=!1;var o=this.centerX+n/a*r,u=this.centerY+e/a*h;if(this.starsEnabled[t]=this.starsEnabled[t]&&o>=this.x&&u>=this.y&&o<this.x+this.width&&u<this.y+this.height,s)this.starsX[t]=n,this.starsY[t]=e,this.starsZ[t]=a,this.starsNewX[t]=o,this.starsNewY[t]=u;else{this.starsOldX[t]=o,this.starsOldY[t]=u;var c=4*(1-this.starsZ[t]/this.scaleZ);this.highScale||(c=Math.ceil(c)),this.starsLineWidth[t]=c}}animate(t){var i=super.animate(t);if(this.enabled&&void 0!==this.centerX)for(var s=this.count;s--;)this.moveStar(s,t/16,!0),this.starsEnabled[s]&&this.moveStar(s,-5,!1);return i}draw(t,i){if(this.enabled){if(void 0===this.centerX)return this.width=this.width||i.width,this.height=this.height||i.height,this.x=void 0===this.x?i.x:this.x,this.y=void 0===this.y?i.y:this.y,this.lineWidth=this.lineWidth||Math.min(i.height/i.heightInPixel,i.width/i.widthInPixel)/2,void this.init();if(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0==this.moveY&&0==this.moveZ&&this.moveX<0){t.fillStyle=this.color;for(var s=this.count;s--;)this.starsEnabled[s]&&t.fillRect(this.starsNewX[s],this.starsNewY[s]-this.starsLineWidth[s]*this.lineWidth/2,this.starsOldX[s]-this.starsNewX[s],this.starsLineWidth[s]*this.lineWidth)}else if(t.strokeStyle=this.color,this.highScale)for(var r=this.count;r--;)this.starsEnabled[r]&&(t.beginPath(),t.lineWidth=this.starsLineWidth[r]*this.lineWidth,t.moveTo(this.starsOldX[r],this.starsOldY[r]),t.lineTo(this.starsNewX[r],this.starsNewY[r]),t.stroke(),t.closePath());else for(var h,n=5;--n;){for(t.beginPath(),t.lineWidth=n*this.lineWidth,h=this.count;h--;)this.starsEnabled[h]&&this.starsLineWidth[h]===n&&(t.moveTo(this.starsOldX[h],this.starsOldY[h]),t.lineTo(this.starsNewX[h],this.starsNewY[h]));t.stroke(),t.closePath()}}}}var lt=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new x(...i)},vt=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new k(...i)};StackBlurCanvas=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new ct(...i)},StarField=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new ft(...i)},lt.LEFT_TOP=x.LEFT_TOP,lt.CENTER=x.CENTER,vt.LEFT_TOP=k.LEFT_TOP,vt.CENTER=k.CENTER;var dt={Callback:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new m(...i)},Canvas:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new p(...i)},Circle:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new y(...i)},Emitter:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new M(...i)},FastBlur:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new b(...i)},Group:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new g(...i)},Image:lt,Text:vt,Particle:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new J(...i)},Path:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new H(...i)},Rect:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Q(...i)},Scroller:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new X(...i)},StackBlur:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new ot(...i)},StackBlurCanvas,StarField};class wt{constructor(i,s){this.callback=i,this.duration=n(t(s),void 0),this.initialized=!1}reset(){this.initialized=!1}run(t,i){var s;return void 0!==this.duration?(this.callback(t,Math.min(i,this.duration),!this.initialized),this.initialized=!0,i-this.duration):(s=this.callback(t,i,!this.initialized),this.initialized=!0,s)}}var yt=.017453292519943295;function mt(t,i){return i.from+t*i.delta}function gt(t,i){for(var s,r=[...i.values],h=r.length;h>1;)for(h--,s=0;s<h;s++)r[s]=r[s]+t*(r[s+1]-r[s]);return r[0]}function pt(t,i,s){return i.colorFrom.mix(i.colorTo,t).string()}function Mt(t,i,s){return s.changeToPath(t,i,s)}class bt{constructor(i,s,r){for(var h in this.initialized=!1,this.changeValues=[],i){var e=i[h],a="rotationInDegree"===h?e*yt:e,o="rotationInRadian"===h||"rotationInDegree"===h?"rotation":h,u="color"===h,c="path"===h,f="function"==typeof a,l=!u&&Array.isArray(a);this.changeValues.push({name:o,to:l?a[a.length-1]:t(a,1,{}),bezier:!!l&&a,isColor:u,isPath:c,isFunction:!!f&&a,moveAlgorithm:u?pt:c?Mt:l?gt:mt})}this.duration=n(t(s),0),this.ease=n(r,t=>t)}reset(){this.initialized=!1}init(t,i){for(var s,r=this.changeValues.length;r--;)(s=this.changeValues[r]).isFunction?(s.from=t[s.name],s.to=s.isFunction(s.from),s.isColor?(s.colorFrom=W(s.from),s.colorTo=W(s.to),s.moveAlgorithm=pt):s.isPath?([s.pathFrom,s.pathTo]=t.changeToPathInit(s.from,s.to),s.moveAlgorithm=Mt):Array.isArray(s.to)?(s.values=[t[s.name],...s.to],s.moveAlgorithm=gt):(s.delta=s.to-s.from,s.moveAlgorithm=mt)):s.isColor?(s.colorFrom=W(t[s.name]),s.colorTo=W(s.to)):s.isPath?[s.pathFrom,s.pathTo]=t.changeToPathInit(t[s.name],s.to):s.bezier?s.values=[t[s.name],...s.bezier]:(s.from=t[s.name],s.delta=s.to-s.from)}run(t,i){if(this.initialized||(this.initialized=!0,this.init(t,i)),this.duration<=i)for(var s,r=this.changeValues.length;r--;)t[(s=this.changeValues[r]).name]=s.to;else for(var h,n=this.changeValues.length,e=this.ease(i/this.duration);n--;)t[(h=this.changeValues[n]).name]=h.moveAlgorithm(e,h,t);return i-this.duration}}class xt{constructor(){}run(t,i){return d.TIMELAPSE_TO_FORCE_DISABLE}}class kt{constructor(){}run(t,i){return t.enabled=!1,d.TIMELAPSE_TO_FORCE_DISABLE}}class At{constructor(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];this.Aniobject=i[0]instanceof d?i[0]:new d(...i)}reset(t){void 0===t&&(t=0),this.Aniobject.reset&&this.Aniobject.reset(t)}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.Aniobject.play&&this.Aniobject.play(t,i)}run(t,i,s){for(var r=i;r>=0;){if(r=this.Aniobject.run(t,r,s),s=!0,!0===r)return!0;r>=0&&this.Aniobject.reset&&this.Aniobject.reset()}return r}}class Ot{constructor(t,i,s){this.ifCallback=t,this.Aniobject=i,this.AniobjectElse=n(s,()=>0)}run(i,s){var r=t(this.ifCallback)?this.Aniobject:this.AniobjectElse;return r.run?r.run(i,s):r(i,s)}}class It{constructor(i,s){this.initialized=!1,this.image=t(i),this.durationBetweenFrames=n(t(s),0),Array.isArray(this.image)?this.count=this.image.length:(this.image=[this.image],this.count=1),this.duration=this.count*this.durationBetweenFrames}reset(){this.initialized=!1}run(t,i){if(this.initialized||(this.initialized=!0,this.current=-1),i>=this.duration)t.image=s.getImage(this.image[this.image.length-1]);else{var r=Math.floor(i/this.durationBetweenFrames);r!==this.current&&(this.current=r,t.image=s.getImage(this.image[this.current]))}return i-this.duration}}class St{constructor(i,s,r){this.initialized=!1,this.frameNumber=t(i),this.framesToRight=n(t(s),!0),this.durationBetweenFrames=n(t(r),0),Array.isArray(this.frameNumber)||(this.frameNumber=[this.frameNumber]),this.duration=this.frameNumber.length*this.durationBetweenFrames}run(t,i){var s;return s=i>=this.duration?this.frameNumber[this.frameNumber.length-1]:this.frameNumber[Math.floor(i/this.durationBetweenFrames)],this.framesToRight?t.frameX=t.frameWidth*s:t.frameY=t.frameHeight*s,i-this.duration}}class jt{constructor(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),h=1;h<s;h++)r[h-1]=arguments[h];this.Aniobject=r[0]instanceof d?r[0]:new d(...r),this.times=this.timesOrg=n(t(i),1)}reset(t){void 0===t&&(t=0),this.times=this.timesOrg,this.Aniobject.reset&&this.Aniobject.reset(t)}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.times=this.timesOrg,this.Aniobject.play&&this.Aniobject.play(t,i)}run(t,i,s){for(var r=i;r>=0&&this.times>0;){if(r=this.Aniobject.run(t,r,s),s=!0,!0===r)return!0;r>=0&&(this.times--,this.Aniobject.reset&&this.Aniobject.reset())}return r}}var Pt=10;class Ct extends bt{constructor(i,s,r,h){super({x:i,y:s},0,h),this.speed=t(r)||1}init(t,i){if(0==this.speed||this.targetX===t.x&&this.targetY===t.y)this.duration=0;else{var s=this.changeValues[0],r=this.changeValues[1];s.from=t.x,r.from=t.y,s.delta=s.to-s.from,r.delta=r.to-r.from;var h=Math.sqrt(s.delta*s.delta+r.delta*r.delta);this.duration=h*Pt/this.speed}super.init(t,i)}}class zt{constructor(){}run(t,i){return d.TIMELAPSE_TO_REMOVE}}class Ft{constructor(i,s){this.Aniobject=i,this.times=n(t(s),1)}run(t,i){if(this.times<=0)return i;var s=this.Aniobject.run(t,i);return s>=0&&this.times--,s}}class Et{constructor(i,s){this.initialized=!1,this.duration=t(s),this.shakeDiff=t(i),this.shakeDiffHalf=this.shakeDiff/2}reset(){this.initialized=!1}run(t,i){return this.initialized||(this.initialized=!0,this.x=t.x,this.y=t.y),i>=this.duration?(t.x=this.x,t.y=this.y):(t.x=this.x+Math.random()*this.shakeDiff-this.shakeDiffHalf,t.y=this.y+Math.random()*this.shakeDiff-this.shakeDiffHalf),i-this.duration}}class Tt{constructor(){this.showOnce=!0}run(t,i){return t.enabled=t.enabled&&this.showOnce,this.showOnce=!1,0}}class Lt{constructor(t){var{states:i={},transitions:s={},default:r,delegateTo:h}=void 0===t?{}:t;this.states=i,Object.keys(this.states).forEach(t=>{Array.isArray(this.states[t])&&(this.states[t]=new d(this.states[t]))}),this.transitions=s,this.delegateTo=h,this.currentStateName=r,this.currentState=this.states[r],this.isTransitioningToStateName=void 0}setState(t,i){if(t!==this.currentStateName){this.isTransitioningToStateName=t;var s=""+t.charAt(0).toUpperCase()+t.slice(1),r=[this.currentStateName+"To"+s,this.currentStateName+"To","to"+s].find(t=>this.transitions[t]);r?(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.transitions[r],this.currentState&&this.currentState.reset&&this.currentState.reset()):(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0)}}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.currentState.play&&this.currentState.play(t,i)}run(t,i,s){var r=i,h=s;if(this.currentState){if(!0===(r=this.currentState.run(t,r,h)))return!0;h=!0}if(r>=0||!this.currentState)if(this.isTransitioningToStateName){if(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0,!0===(r=this.currentState.run(t,r,h)))return!0}else this.currentState=void 0;return-1}}class Dt{constructor(){}run(t,i){return d.TIMELAPSE_TO_STOP}}class Nt{constructor(){}run(t,i){return t.enabled=!1,d.TIMELAPSE_TO_STOP}}class qt{constructor(i){this.duration=t(i)}run(t,i){return t.enabled=i>=this.duration,i-this.duration}}var Bt={Callback:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new wt(...i)},ChangeTo:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new bt(...i)},End:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new xt(...i)},EndDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new kt(...i)},Forever:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new At(...i)},If:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Ot(...i)},Image:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new It(...i)},ImageFrame:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new St(...i)},Loop:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new jt(...i)},Move:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Ct(...i)},Once:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Ft(...i)},Remove:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new zt(...i)},Sequence:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new d(...i)},Shake:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Et(...i)},ShowOnce:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Tt(...i)},State:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Lt(...i)},Stop:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Dt(...i)},StopDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Nt(...i)},Wait:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new v(...i)},WaitDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new qt(...i)}},Rt=function(t){var i=t*t;return t<4/11?7.5625*i:t<8/11?9.075*i-9.9*t+3.4:t<.9?4356/361*i-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},_t={backInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},backIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},backOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},bounceInOut:function(t){return t<.5?.5*(1-Rt(1-2*t)):.5*Rt(2*t-1)+.5},bounceIn:function(t){return 1-Rt(1-t)},bounceOut:Rt,circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},circIn:function(t){return 1-Math.sqrt(1-t*t)},circOut:function(t){return Math.sqrt(1- --t*t)},cubicInOut:function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},cubicIn:function(t){return t*t*t},cubicOut:function(t){var i=t-1;return i*i*i+1},elasticInOut:function(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1},elasticIn:function(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))},elasticOut:function(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1},expoInOut:function(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1},expoIn:function(t){return 0===t?t:Math.pow(2,10*(t-1))},expoOut:function(t){return 1===t?t:1-Math.pow(2,-10*t)},linear:function(t){return t},quadInOut:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},quadIn:function(t){return t*t},quadOut:function(t){return-t*(t-2)},quartInOut:function(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1},quartIn:function(t){return Math.pow(t,4)},quartOut:function(t){return Math.pow(t-1,3)*(1-t)+1},quintInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},quintIn:function(t){return t*t*t*t*t},quintOut:function(t){return--t*t*t*t*t+1},sineInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},sineIn:function(t){var i=Math.cos(t*Math.PI*.5);return Math.abs(i)<1e-14?1:1-i},sineOut:function(t){return Math.sin(t*Math.PI/2)}},Wt=function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return new i(...s)};export{Bt as Animations,_t as Easing,Wt as Engine,s as ImageManager,l as Scenes,dt as Sprites};
//# sourceMappingURL=animationvideo.modern.js.map
