function t(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return"function"==typeof t?t.apply(null,s):t}class i{constructor(t){var i=t;if("object"!=typeof t)throw new Error("No canvas given for Engine constructor");if(t.getContext)i={canvas:t};else if(!t.canvas)throw new Error("No canvas given for Engine constructor");var s=Object.assign({},i);if(this.i={canvas:[],context:[],width:0,height:0,ratio:1},this.o=[],this.u=null,this.M=!1,this.p=0,this.A=!1,this.k=null,this.i.canvas=Array.isArray(s.canvas)?s.canvas:[s.canvas],s.autoSize){var r={enabled:!0,scaleLimitMin:1,scaleLimitMax:3,scaleFactor:1.07,referenceWidth:()=>this.i.canvas[0].clientWidth,referenceHeight:()=>this.i.canvas[0].clientHeight,currentScale:1,waitTime:100,currentWaitedTime:0,currentOffsetTime:0,offsetTimeLimitUp:300,offsetTimeLimitDown:300,registerResizeEvents:!0,registerVisibilityEvents:!0,setCanvasStyle:!1};this.O="object"==typeof s.autoSize?Object.assign({},r,s.autoSize):r,this.O.registerResizeEvents&&(this.o=["resize","orientationchange"].map(t=>({_:window,I:t,P:this.recalculateCanvas.bind(this)}))),this.O.registerVisibilityEvents&&this.o.push({_:document,I:"visibilitychange",P:this.handleVisibilityChange.bind(this)}),this.F()}else this.i.width=this.i.canvas[0].width,this.i.height=this.i.canvas[0].height,this.i.ratio=this.i.width/this.i.height;this.i.canvas.forEach((t,i)=>{this.i.context[i]=t.getContext("2d")}),this.S=this.i.canvas.length,this.j=Array.from({length:this.S},t=>0),s.clickToPlayAudio&&this.o.push({_:this.i.canvas[0],I:"click",P:this.playAudioOfScene.bind(this)}),this.C=s.reduceFramerate,this.o.forEach(t=>{t._.addEventListener(t.I,t.P)}),this.switchScene(s.scene,s.sceneParameter||{})}handleVisibilityChange(){this.O.enabled=!("hidden"==document.visibilityState)}playAudioOfScene(){this.M&&this.u&&this.u.timing.audioElement&&this.u.timing.audioElement.play()}T(t){t.textBaseline="middle",t.textAlign="center",t.globalAlpha=1,t.globalCompositeOperation="source-over"}getWidth(){return this.i.width}getHeight(){return this.i.height}getRatio(){return this.i.ratio}getOutput(){return this.i}recalculateCanvas(){return this.A=!0,this}F(){if(this.O){var i=t(this.O.referenceWidth),s=t(this.O.referenceHeight);if(i<=0||s<=0)return;this.i.canvas.forEach(t=>{t.width=Math.round(i/this.O.currentScale),t.height=Math.round(s/this.O.currentScale),this.O.setCanvasStyle&&(t.style.width=i+"px",t.style.height=s+"px")}),this.O.currentWaitedTime=0,this.O.currentOffsetTime=0}this.i.width=this.i.canvas[0].width,this.i.height=this.i.canvas[0].height,this.i.ratio=this.i.width/this.i.height,this.resize()}async recalculateFPS(){this.k&&(window.cancelAnimationFrame(this.k),this.k=!1),await new Promise(t=>requestAnimationFrame(t));for(var t=this.L(),i=3;i--;)await new Promise(t=>requestAnimationFrame(t));var s=(this.L()-t)/3;this.O.offsetTimeTarget=s,this.O.offsetTimeDelta=s/3,!1===this.k&&(this.D=!1,this.k=window.requestAnimationFrame(this.N.bind(this)))}resize(){return this.u&&this.u.resize&&this.u.resize(this.i),this}switchScene(t,i){return t&&(this.B=t,this.R=i),this}L(){return window.performance?performance.now():Date.now()}N(t){if(this.k=window.requestAnimationFrame(this.N.bind(this)),!this.A||this.C&&this.W)for(var i=0;i<this.S;i++)this.j[i]=Math.max(this.j[i]-1,0);else{this.F(),this.A=!1;for(var s=0;s<this.S;s++)this.j[s]=Math.max(this.j[s]-1,1)}if(this.D||(this.D=t),this.G||(this.G=t),this.B&&!this.X&&(this.X=Promise.resolve(this.u?this.u.destroy(this.i):{}),this.X.then(i=>{this.B.callInit(this.i,{run:this.Y,scene:this.R,destroy:i},this),this.u=this.B,this.B=void 0,this.X=void 0,this.M=!1,this.p=this.u.currentTime(),this.G=t})),this.u&&(this.C&&(this.W=!this.W),!this.C||this.W)){var r=this.u.currentTime(),h=this.u.clampTime(r-this.p),e=this.u.shiftTime(h);if(h+=e,this.p=r+e,this.M){var n=0!==h||this.U;this.U=!1;var a=this.u.isDrawFrame(this.i,h);if(Array.isArray(a))for(var o=0;o<this.S;o++)this.j[o]=Math.max(this.j[o],a[o]);else for(var u=0;u<this.S;u++)this.j[u]=Math.max(this.j[u],a);var c=this.L();if(n&&this.u.move(this.i,h),this.i.canvas[0].width)for(var f=0;f<this.S;f++)this.j[f]&&(this.T(this.i.context[f]),this.u.draw(this.i,f));if(this.O&&this.O.enabled){var l=t-this.D;if(this.O.currentWaitedTime<this.O.waitTime)this.O.currentWaitedTime+=l;else if(n){var v=this.O.offsetTimeTarget*(this.C?2:1),d=this.L()-c,m=(Math.abs(l-v)>Math.abs(d-v)?l:d)-v;Math.abs(m)<=this.O.offsetTimeDelta?this.O.currentOffsetTime=this.O.currentOffsetTime>=0?Math.max(0,this.O.currentOffsetTime-this.O.offsetTimeDelta):Math.min(0,this.O.currentOffsetTime+this.O.offsetTimeDelta):m<0&&this.O.currentScale>this.O.scaleLimitMin?(this.O.currentOffsetTime+=m,this.O.currentOffsetTime<=-this.O.offsetTimeLimitDown&&(this.O.currentScale=Math.max(this.O.scaleLimitMin,this.O.currentScale/this.O.scaleFactor),this.A=!0)):m>0&&this.O.currentScale<this.O.scaleLimitMax&&(this.O.currentOffsetTime+=m,this.O.currentOffsetTime>=this.O.offsetTimeLimitUp&&(this.O.currentScale=Math.min(this.O.scaleLimitMax,this.O.currentScale*this.O.scaleFactor),this.A=!0))}}}else{for(var g=0;g<this.S;g++)this.T(this.i.context[g]);this.M=this.u.callLoading({output:this.i,timePassed:t-this.D,totalTimePassed:t-this.G}),this.M&&(this.u.reset(),this.p=this.u.currentTime(),this.U=!0,this.O&&(this.O.currentWaitedTime=0))}}this.D=t}async run(t){return this.Y=t||{},await this.stop(),this.D=this.G=!1,this.O&&!this.O.offsetTimeTarget&&await this.recalculateFPS(),this.k=window.requestAnimationFrame(this.N.bind(this)),this}async stop(){this.k&&window.cancelAnimationFrame(this.k),this.k=null,this.u&&await this.u.destroy(this.i)}async destroy(){return await this.stop(),this.o.forEach(t=>{t._.removeEventListener(t.I,t.P)}),this.o=[],this}}class s{constructor(){this.Images={},this.count=0,this.loaded=0}static add(t,i){var r=this||s,h=function(s){if(r.Images[s])i&&"function"==typeof i[s]&&i[s](s,r.Images[s]);else{if(r.Images[s]=new window.Image,r.Images[s].onload=function(){r.loaded++,i&&"function"==typeof i?r.isLoaded()&&i():i&&"function"==typeof i[s]&&i[s](s,r.Images[s]),r.resolve&&r.isLoaded()&&(r.resolve(),r.resolve=null)},"<svg"===t[s].substr(0,4)){var h=window.URL||window.webkitURL||window,e=new window.Blob([t[s]],{type:"image/svg+xml"});r.Images[s].src=h.createObjectURL(e)}else r.Images[s].src=t[s];r.count++}};for(var e in t)h(e);return i&&"function"==typeof i&&r.isLoaded()&&i(),r.resolve&&r.isLoaded()&&(r.resolve(),r.resolve=null),r}static reset(){var t=this||s;return t.Images={},t.count=0,t.loaded=0,t}static getLoaded(){return(this||s).loaded}static getCount(){return(this||s).count}static isLoaded(){var t=this||s;return t.loaded===t.count}static getImage(t){return"object"==typeof t?t:(this||s).Images[t]}static isLoadedPromise(){var t=this||s;return!!t.isLoaded()||new Promise((i,s)=>{t.resolve=i})}}s.Images={},s.count=0,s.loaded=0;class r{constructor(t){this.V=[],this.H=[],this.J=0,this.$=0,this.Z=void 0===t?[]:Array.isArray(t)?t:[t]}addElement(t){return this.addElementForId(t),t}addElements(t){return this.addElementsForIds(t),t}addElementForId(t){var i=this.V.length,s=this.$;this.V[s]=t,this.H[s]="function"==typeof t,i===s&&i++;for(var r=this.$+1;r!==i&&this.V[r];)r++;return this.$=r,this.J>s&&(this.J=s),s}addElementsForIds(t){var i=this.V.length;return i===this.$?(this.V=this.V.concat(t),this.$=this.V.length,t.forEach((t,s)=>{this.H[i+s]="function"==typeof t}),Array.from({length:t.length},(t,s)=>s+i)):t.map(t=>this.addElement(t))}getById(t){return this.V[t]}getIdByElement(t){return this.V.indexOf(t)}deleteByElement(t){var i=this.getIdByElement(t);i>=0&&this.deleteById(i)}deleteById(t){var i=this.V.length-1;if(i>0&&t===i){for(this.V[t]=null;i&&!this.V[i-1];)i--;this.V.length=i,this.H.length=i,this.$=Math.min(this.$,i),this.J=Math.min(this.J,i)}else this.V[t]=null,this.$=Math.min(this.$,t),this.J===t&&(this.J=t+1)}isCanvasId(t){return void 0===t||!this.Z.length||this.Z.includes(t)}forEach(t){var i,s,r=this.V.length;for(i=this.J;i<r;i++)(s=this.V[i])&&t({index:i,element:s,isFunction:this.H[i],layer:this})}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.forEach(s=>{var{element:r,isFunction:h}=s;return!h&&r.play(t,i)})}count(){for(var t=0,i=this.V.length,s=this.J;s<i;s++)this.V[s]&&t++;return t}clear(){this.V=[],this.H=[],this.J=0,this.$=0}}class h{constructor(){this.K=[]}addLayer(t){return this.K[this.K.length]=new r(t),this.K[this.K.length-1]}addLayers(t,i){void 0===t&&(t=1);var s=Array.from({length:t},t=>new r(i));return this.K=this.K.concat(s),s}addLayerForId(t){return this.K[this.K.length]=new r(t),this.K.length-1}addLayersForIds(t,i){void 0===t&&(t=1);var s=Array.from({length:t},(t,i)=>i+this.K.length);return this.K=this.K.concat(Array.from({length:t},t=>new r(i))),s}getById(t){return this.K[t]}forEach(t,i){var s,r=this.K.length;for(s=0;s<r;s++)this.K[s].isCanvasId(i)&&this.K[s].forEach(t)}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.forEach(s=>{var{element:r,isFunction:h}=s;return!h&&r.play(t,i)})}count(){return this.K.length}clear(){this.K=[]}}function e(t,i){return null==t||""===t?i:t}class n{constructor(i){void 0===i&&(i={}),this.tt=i,this.it=e(t(this.tt.tickChunk),100/6),this.st=e(t(this.tt.maxSkippedTickChunk),120),this.rt=e(t(this.tt.tickChunkTolerance),.1),this.totalTimePassed=0}init(){}isLoaded(){return!0}currentTime(){return window.performance?performance.now():Date.now()}clampTime(t){var i=this.it?this.it*this.st:2e3;return t>i?i:t}shiftTime(t){return this.it?-t%this.it:0}get tickChunk(){return this.it}isChunked(){return this.it}hasOneChunkedFrame(t){return t>=this.it-this.rt}calcFrames(t){return Math.min(this.st,Math.floor((t+this.rt)/this.it))}}class a{constructor(t){this.tt="function"==typeof t?new t:t,this.ht=new h,this.et=null,this.nt=!1,this.at=void 0,this.ot=s,this.ut=this.tt.timing||new n}currentTime(){return this.ut.currentTime()}clampTime(t){return this.ut.clampTime(t)}shiftTime(t){return this.ut.shiftTime(t)}callInit(i,s,r){this.et=r,this.resize(i);var h=t(this.tt.images);h&&this.ot.add(h),this.ut.init(),Promise.resolve(this.tt.init&&this.tt.init({engine:r,output:i,scene:this,parameter:s,imageManager:this.ot})).then(t=>this.nt=!0)}resize(t){this.at={alpha:1,x:0,y:0,width:t.width,height:t.height,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:1,visibleScreen:{x:0,y:0,width:t.width,height:t.height},fullScreen:{x:0,y:0,width:t.width,height:t.height}},this.ht.forEach(i=>{var{element:s,isFunction:r}=i;r||s.resize(t,this.at)})}destroy(t){var i=this.tt.destroy&&this.tt.destroy({engine:this.et,scene:this,output:t,layerManager:this.ht,imageManager:this.ot});return this.nt=!1,i}get configuration(){return this.tt}get timing(){return this.ut}loadingScreen(t){var{output:i,timePassed:s,totalTimePassed:r,progress:h}=t;if(this.tt.loading)return this.tt.loading({engine:this.et,scene:this,output:i,timePassed:s,totalTimePassed:r,progress:h,imageManager:this.ot});var e=i.context[0],n="number"==typeof h?Math.max(1,h*i.height):i.height;e.globalCompositeOperation="source-over",e.globalAlpha=1,e.clearRect(0,0,i.width,i.height),e.fillStyle="#aaa",e.fillRect(0,i.height/2-n/2,i.width,n),e.font="20px Georgia",e.fillStyle="#fff",e.textAlign="left",e.textBaseline="bottom",e.fillText(isNaN(parseFloat(h))?h:"Loading "+Math.round(100*h)+"%",10+3*Math.random(),i.height-10+3*Math.random())}callLoading(t){var i=this.ut.isLoaded();return this.ot.isLoaded()&&this.nt&&i?(this.tt.endTime||!0===i||(this.tt.endTime=i),t.progress="Click to play",this.loadingScreen(t),!0):(t.progress=this.ot.getCount()?this.ot.getLoaded()/this.ot.getCount():"Loading...",this.loadingScreen(t),!1)}fixedUpdate(t,i,s){this.tt.fixedUpdate&&this.tt.fixedUpdate({engine:this.et,scene:this,layerManager:this.ht,output:t,timePassed:i,totalTimePassed:this.ut.totalTimePassed,imageManager:this.ot,lastCall:s})}isDrawFrame(t,i){return this.tt.isDrawFrame?this.tt.isDrawFrame({engine:this.et,scene:this,layerManager:this.ht,output:t,timePassed:i,totalTimePassed:this.ut.totalTimePassed,imageManager:this.ot}):0!==i}move(t,i){if(this.ut.totalTimePassed+=i,i<0?(i=this.ut.totalTimePassed,this.reset(),this.ut.totalTimePassed=i):this.tt.endTime&&this.tt.endTime<=this.ut.totalTimePassed&&(i-=this.ut.totalTimePassed-this.tt.endTime,this.ut.totalTimePassed=this.tt.endTime,this.tt.end&&this.tt.end({engine:this.et,scene:this,output:t,timePassed:i,totalTimePassed:this.ut.totalTimePassed,imageManager:this.ot})),this.ut.isChunked()){if(this.ut.hasOneChunkedFrame(i))for(var s=this.ut.calcFrames(i)-1,r=0;r<=s;r++)this.fixedUpdate(t,this.ut.tickChunk,r===s)}else this.fixedUpdate(t,i,!0);this.tt.update&&this.tt.update({engine:this.et,scene:this,layerManager:this.ht,output:t,timePassed:i,totalTimePassed:this.ut.totalTimePassed,imageManager:this.ot}),this.ht.forEach(t=>{var{element:s,isFunction:r,layer:h,index:e}=t;r||s.animate(i)&&h.deleteById(e)})}draw(t,i){var s=t.context[i];this.ht.forEach(i=>{var{layer:r,element:h,isFunction:e,index:n}=i;e?h({engine:this.et,scene:this,layerManager:this.ht,layer:r,output:t,context:s,totalTimePassed:this.ut.totalTimePassed,imageManager:this.ot})&&r.deleteById(n):h.draw(s,this.at)},i)}reset(){this.ut.totalTimePassed=0;var t=this.tt.reset?this.tt.reset({engine:this.et,scene:this,layerManager:this.ht,output:this.et.getOutput(),imageManager:this.ot}):new h;if(Array.isArray(t)){var i=t;t=new h,i.forEach(i=>{t.addLayer().addElements(i)})}t&&(this.ht=t)}}function o(){this.reset()}o.prototype.reset=function(){return this.m=[1,0,0,1,0,0],this},o.prototype.multiply=function(t){var i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],h=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],e=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=i,this.m[2]=s,this.m[3]=r,this.m[4]=h,this.m[5]=e,this},o.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=-this.m[1]*t,s=-this.m[2]*t,r=this.m[0]*t,h=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),e=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=i,this.m[2]=s,this.m[3]=r,this.m[4]=h,this.m[5]=e,this},o.prototype.rotate=function(t){var i=Math.cos(t),s=Math.sin(t),r=this.m[1]*i+this.m[3]*s,h=this.m[0]*-s+this.m[2]*i,e=this.m[1]*-s+this.m[3]*i;return this.m[0]=this.m[0]*i+this.m[2]*s,this.m[1]=r,this.m[2]=h,this.m[3]=e,this},o.prototype.translate=function(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this},o.prototype.scale=function(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this},o.prototype.transformPoint=function(t,i){var s=t;return[t=s*this.m[0]+i*this.m[2]+this.m[4],i=s*this.m[1]+i*this.m[3]+this.m[5]]},o.prototype.clone=function(){var t=new o;return t.m=this.m.slice(0),t};class u extends a{constructor(){super(...arguments),this.ct=null,this.ft=null,this.cam={zoom:1,x:0,y:0}}lt(){return this.et?(this.ct||(this.ct=this.vt(this.cam),this.ft=null),this.ct):new o}vt(t){var i=this.et.getWidth()/2,s=this.et.getHeight()/2,r=this.et.getRatio()>1?i:s;return(new o).translate(i,s).scale(r,r).scale(t.zoom,t.zoom).translate(-t.x,-t.y)}resize(t){this.ct=null,this.ft=null,this.at={alpha:1,x:-1,y:-1,width:2,height:2,widthInPixel:t.width,heightInPixel:t.height,scaleCanvas:t.width/t.canvas[0].clientWidth};var[i,s]=this.transformPoint(0,0,1),[r,h]=this.transformPoint(t.width,t.height,1);this.at.visibleScreen={x:i,y:s,width:r-i,height:h-s};var e=this.vt({x:0,y:0,zoom:1}).invert(),[n,a]=e.transformPoint(0,0,1),[o,u]=e.transformPoint(t.width,t.height,1);this.at.fullScreen={x:n,y:a,width:o-n,height:u-a},this.at.cam=this.cam,this.ht.forEach(i=>{var{element:s,isFunction:r}=i;r||s.resize(t,this.at)})}transformPoint(t,i,s){return void 0===s&&(s=this.at.scaleCanvas),this.ft||(this.ft=this.lt().clone().invert()),this.ft.transformPoint(t*s,i*s)}draw(t,i){var s=t.context[i];s.save(),s.setTransform(...this.lt().m),super.draw(t,i),s.restore()}}class c extends u{constructor(){super(...arguments),this.o=[],this.camConfig=Object.assign({},{zoomMax:10,zoomMin:.5,zoomFactor:1.2,tween:2,registerEvents:!0,preventDefault:!0,enabled:!0,callResize:!0,doubleClickDetectInterval:350,alternative:!1},t(this.tt.cam)||{}),this.tt.click||(this.tt.click=()=>{}),this.toCam={x:this.camConfig.currentX||0,y:this.camConfig.currentY||0,zoom:this.camConfig.currentZoom||1},this.dt={gt:-1,yt:-1,Mt:1,wt:1,pt:2,bt:2},this.xt=[]}camEnable(){return this.camConfig.enabled=!0,this}camDisable(){return this.camConfig.enabled=!1,this}camReset(){return this.toCam={x:0,y:0,zoom:1},this}camTween(t){return this.camConfig.tween=t,this}camAlternative(t){return this.xt=[],this.camConfig.alternative=t,this}setClampLimit(t,i,s,r){return this.dt={gt:t,yt:i,Mt:s,wt:r,pt:s-t,bt:r-i},this}callInit(t,i,s){return this.camConfig.registerEvents&&this.At(t.canvas[0]),super.callInit(t,i,s)}destroy(t){return this.camConfig.registerEvents&&this.kt(),super.destroy(t)}hasCamChanged(){var t=this.camConfig.tween||1;return Math.abs(this.toCam.x-this.cam.x)>=Number.EPSILON*t||Math.abs(this.toCam.y-this.cam.y)>=Number.EPSILON*t||Math.abs(this.toCam.zoom-this.cam.zoom)>=Number.EPSILON*t}fixedUpdate(t,i,s){return this.camConfig.tween&&this.hasCamChanged()&&(this.cam.x+=(this.toCam.x-this.cam.x)/this.camConfig.tween,this.cam.y+=(this.toCam.y-this.cam.y)/this.camConfig.tween,this.cam.zoom+=(this.toCam.zoom-this.cam.zoom)/this.camConfig.tween,s&&(this.at.cam=this.cam,this.camConfig.callResize?super.resize(t):(this.ct=null,this.ft=null))),super.fixedUpdate(t,i,s)}move(t,i){var s=super.move(t,i);return!this.camConfig.tween&&this.hasCamChanged()&&(this.cam=Object.assign({},this.toCam),this.camConfig.callResize?super.resize(t):(this.ct=null,this.ft=null)),s}resize(t){super.resize(t),this.clampView()}At(t){this.o=[[["touchstart","mousedown"],this.Ot],[["touchend","mouseup"],this._t],[["touchendoutside","mouseout"],this.It],[["touchmove","mousemove"],this.Pt],[["wheel"],this.Ft],[["contextmenu"],this.St]].map(i=>{var[s,r]=i;return s.map(i=>({_:t,I:i,P:r.bind(this)}))}).reduce((t,i)=>(Array.isArray(i)?t.push.apply(t,i):t.push(i),t),[]),this.o.forEach(t=>{t._.addEventListener(t.I,t.P,!0)})}kt(){this.o.forEach(t=>{t._.removeEventListener(t.I,t.P,!0)}),this.o=[]}St(t){t.preventDefault()}jt(t){var i;if(t.touches&&t.touches.length>0?i=t.targetTouches:t.changedTouches&&t.changedTouches.length>0&&(i=t.changedTouches),i){var s=t.target.getBoundingClientRect(),r=i.length;return[(i=Array.from(i)).reduce((t,i)=>t+i.pageX,0)/r-s.left,i.reduce((t,i)=>t+i.pageY,0)/r-s.top]}if(void 0===t.offsetX){var h=t.target.getBoundingClientRect();return[t.clientX-h.left,t.clientY-h.top]}return[t.offsetX,t.offsetY]}Ct(t){return this.camConfig.alternative?t.which?t.which-1:t.button||0:0}Ot(t){this.camConfig.preventDefault&&t.preventDefault();var[i,s]=this.jt(t),r=this.Ct(t);if(this.xt[r]=Object.assign({},this.xt[r],{x:i,y:s,zt:this.toCam.x,Tt:this.toCam.y,Et:!0,Lt:t.touches&&t.touches.length||1,Dt:void 0,Nt:Date.now()}),this.tt.mouseDown){var[h,e]=this.transformPoint(i,s);this.tt.mouseDown({event:t,x:h,y:e,scene:this,engine:this.et,imageManager:this.ot})}}_t(t){this.camConfig.preventDefault&&t.preventDefault();var i=this.Ct(t);this.xt[i]||(this.xt[i]={});var s=this.xt[i].Et,r=t.changedTouches&&t.changedTouches.length||1,h=Math.max(this.xt[i].Lt,r);this.xt[i].Et=!1,this.xt[i].Lt-=r;var[e,n]=this.jt(t);if(this.tt.mouseUp){var[a,o]=this.transformPoint(e,n);this.tt.mouseUp({event:t,x:a,y:o,scene:this,engine:this.et,imageManager:this.ot})}if(s&&!(h>1))if(Date.now()-this.xt[i].Nt<300&&Math.abs(this.xt[i].x-e)<5&&Math.abs(this.xt[i].y-n)<5&&!i){var[u,c]=this.transformPoint(e,n);this.tt.doubleClick?this.xt[i].doubleClickTimer?(clearTimeout(this.xt[i].doubleClickTimer),this.xt[i].doubleClickTimer=void 0,this.tt.doubleClick({event:t,x:u,y:c,scene:this,engine:this.et,imageManager:this.ot})):this.xt[i].doubleClickTimer=setTimeout(()=>{this.xt[i].doubleClickTimer=void 0,this.tt.click({event:t,x:u,y:c,scene:this,engine:this.et,imageManager:this.ot})},this.camConfig.doubleClickDetectInterval):this.tt.click({event:t,x:u,y:c,scene:this,engine:this.et,imageManager:this.ot})}else if(this.camConfig.alternative&&!i){var[f,l]=this.transformPoint(e,n),[v,d]=this.transformPoint(this.xt[i].x,this.xt[i].y);this.tt.region&&this.tt.region({event:t,x1:Math.min(v,f),y1:Math.min(d,l),x2:Math.max(v,f),y2:Math.max(d,l),fromX:v,fromY:d,toX:f,toY:l,scene:this})}}It(t){var i=this.Ct(t);this.xt[i]&&(this.xt[i].Et=!1),this.tt.mouseOut&&this.tt.mouseOut({event:t,scene:this,engine:this.et,imageManager:this.ot})}Pt(t){this.camConfig.preventDefault&&t.preventDefault();var i=this.Ct(t),[s,r]=this.jt(t);if(this.tt.mouseMove){var[h,e]=this.transformPoint(s,r);this.tt.mouseMove({event:t,x:h,y:e,scene:this,engine:this.et,imageManager:this.ot})}if(this.xt[i]&&this.xt[i].Et&&(0!==t.which||t.touches)){var n=this.at.scaleCanvas;if(this.camConfig.enabled){if(t.touches&&t.touches.length>=2){var a=t.touches,o=Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY));if(void 0===this.xt[i].Dt)o>0&&(this.xt[i].Dt=o,this.xt[i].qt=this.toCam.zoom);else{if(this.toCam.zoom=Math.max(this.camConfig.zoomMin,Math.min(this.camConfig.zoomMax,this.xt[i].qt*o/this.xt[i].Dt)),this.camConfig.alternative){var u=this.vt(this.toCam).invert(),[c,f]=u.transformPoint(this.xt[i].x*n,this.xt[i].y*n),[l,v]=u.transformPoint(s*n,r*n);this.toCam.x=this.xt[i].zt+c-l,this.toCam.y=this.xt[i].Tt+f-v}this.clampView()}return}if(this.xt[i].Dt=void 0,!this.camConfig.alternative||2===i){var d=this.vt(this.toCam).invert(),[m,g]=d.transformPoint(this.xt[i].x*n,this.xt[i].y*n),[y,M]=d.transformPoint(s*n,r*n);this.toCam.x=this.xt[i].zt+m-y,this.toCam.y=this.xt[i].Tt+g-M,this.clampView()}}if(this.camConfig.alternative&&0===i&&this.tt.regionMove&&!(Date.now()-this.xt[i].Nt<300&&Math.abs(this.xt[i].x-s)<5&&Math.abs(this.xt[i].y-r)<5)&&(!t.touches||1===t.touches.length)){var[w,p]=this.transformPoint(s,r),[b,x]=this.transformPoint(this.xt[i].x,this.xt[i].y);this.tt.regionMove({event:t,x1:Math.min(b,w),y1:Math.min(x,p),x2:Math.max(b,w),y2:Math.max(x,p),fromX:b,fromY:x,toX:w,toY:p,scene:this})}}}Ft(t){if(this.camConfig.preventDefault&&t.preventDefault(),this.camConfig.enabled){var i=this.at.scaleCanvas,[s,r]=this.jt(t),[h,e]=this.vt(this.toCam).invert().transformPoint(s*i,r*i);if((t.wheelDelta||-1*t.deltaY)/120>0){this.zoomIn();var[n,a]=this.vt(this.toCam).invert().transformPoint(s*i,r*i);this.toCam.x-=n-h,this.toCam.y-=a-e,this.clampView()}else this.zoomOut()}}zoomIn(){return this.toCam.zoom=Math.min(this.camConfig.zoomMax,this.toCam.zoom*this.camConfig.zoomFactor),this}zoomOut(){return this.toCam.zoom=Math.max(this.camConfig.zoomMin,this.toCam.zoom/this.camConfig.zoomFactor),this.clampView(),this}zoomTo(t,i,s,r){var h=this.at.scaleCanvas,e=this.vt(this.toCam).invert(),[n,a]=e.transformPoint(0,0),[o,u]=e.transformPoint(this.et.getWidth()*h,this.et.getHeight()*h),c=s-t,f=r-i,l=i+f/2,v=(o-n)/c,d=(u-a)/f;return this.toCam.x=t+c/2,this.toCam.y=l,this.toCam.zoom=this.toCam.zoom*Math.max(Math.min(v,d),Number.MIN_VALUE),this}clampView(){var t=this.vt(this.toCam).invert(),[i,s]=t.transformPoint(0,0),[r,h]=t.transformPoint(this.et.getWidth(),this.et.getHeight());return r-i<=this.dt.pt?i<this.dt.gt?r<=this.dt.Mt&&(this.toCam.x+=this.dt.gt-i):r>this.dt.Mt&&(this.toCam.x+=this.dt.Mt-r):i>this.dt.gt?this.toCam.x+=this.dt.gt-i:r<this.dt.Mt&&(this.toCam.x+=this.dt.Mt-r),h-s<=this.dt.bt?s<this.dt.yt?h<=this.dt.wt&&(this.toCam.y+=this.dt.yt-s):h>this.dt.wt&&(this.toCam.y+=this.dt.wt-h):s>this.dt.yt?this.toCam.y+=this.dt.yt-s:h<this.dt.wt&&(this.toCam.y+=this.dt.wt-h),this}}var f={Default:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new a(...i)},Norm:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new u(...i)},NormCamera:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new c(...i)}};class l{constructor(i){this.duration=t(i)-0}run(t,i){return i-this.duration}}class v{constructor(){for(var t=0,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];"number"==typeof s[0]&&(t=s.shift()),this.sequences=s.map(i=>{Array.isArray(i)||(i=[i]);var s=t;return"number"==typeof i[0]&&(s=i.shift()),{position:0,timelapsed:-s,sequence:i.map(t=>"function"!=typeof t.run?"number"==typeof t?new l(t):{run:t}:t).filter(t=>"function"==typeof t.run),label:i.reduce((t,i,s)=>("string"==typeof i&&(t[i]=s-Object.keys(t).length),t),{}),enabled:!0}}),this.lastTimestamp=0,this.enabled=!0}reset(t){void 0===t&&(t=0),this.sequences.forEach(i=>{i.enabled=!0,i.position=0,i.timelapsed=t,i.sequence[0]&&i.sequence[0].reset&&i.sequence[0].reset(t)}),this.enabled=!0}play(t,i){if(void 0===t&&(t=""),void 0===i&&(i=0),t){var s=this.sequences.reduce((s,r)=>(r.label.hasOwnProperty(t)?(s=!0,r.position=r.label[t],r.enabled=!0,r.timelapsed=i,r.sequence[r.position]&&r.sequence[r.position].reset&&r.sequence[r.position].reset()):s|=r.sequence.find(s=>s.play&&s.play(t,i))>=0,s),!1);return s&&(this.enabled=!0),s}return this.sequences.forEach(t=>t.enabled=!0),this.enabled=!0,!0}runSequence(t,i,s){for(var r=s;i.sequence[i.position]&&r>=0;){if(i.timelapsed+=r,i.timelapsed<0)return-1;if(!0===(r=i.sequence[i.position].run(t,i.timelapsed)))r=0;else{if(!1===r)return-1;if(r===v.TIMELAPSE_TO_FORCE_DISABLE)return i.enabled=!1,this.enabled=!1,s;if(r===v.TIMELAPSE_TO_STOP)return i.enabled=!1,s;if(r===v.TIMELAPSE_TO_REMOVE)return!0}if(r>=0&&(i.position=(i.position+1)%i.sequence.length,i.sequence[i.position]&&i.sequence[i.position].reset&&i.sequence[i.position].reset(),i.timelapsed=0,0===i.position))return i.enabled=!1,r}return r}run(t,i,s){var r=i;if(s||(r=i-this.lastTimestamp,this.lastTimestamp=i),!this.enabled)return r;for(var h=this.sequences.length,e=0,n=Infinity,a=0;a<h;a++)if(this.sequences[a].enabled){var o=this.runSequence(t,this.sequences[a],r);if(!0===o)return!0;n=Math.min(n,o)}else e++;return e===h?(this.enabled=!1,r):n}}v.TIMELAPSE_TO_FORCE_DISABLE="FORCE_DISABLE",v.TIMELAPSE_TO_STOP="STOP",v.TIMELAPSE_TO_REMOVE="REMOVE";class d{constructor(t){this.Bt(this,this.Rt(),t)}Bt(i,s,r){Object.keys(s).forEach(h=>{var n=s[h];i[h]="function"==typeof n?n(r[h],r,i):e(t(r[h]),n)})}Wt(){return{animation:(i,s)=>{var r=t(i);return Array.isArray(r)?new v(r):r},enabled:!0}}Rt(){return Object.assign({},this.Wt(),{x:0,y:0,rotation:(i,s)=>e(t(i),e(t(s.rotationInRadian),.017453292519943295*e(t(s.rotationInDegree),0))),scaleX:(i,s)=>e(t(i),e(t(s.scale),1)),scaleY:(i,s)=>e(t(i),e(t(s.scale),1)),alpha:1,compositeOperation:"source-over",color:"#fff"})}animate(t){return!(!this.animation||!0!==this.animation.run(this,t,!0)||(this.enabled=!1,0))}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.animation&&this.animation.play&&this.animation.play(t,i)}resize(t,i){}draw(t,i){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.beginPath(),t.fillStyle=this.color,t.arc(0,0,1,Math.PI/2+this.rotation,2.5*Math.PI-this.rotation,!1),t.fill(),t.closePath(),t.restore())}}class m extends d{constructor(t){"function"==typeof t&&(t={callback:t}),super(t),this.Gt=0,this.Xt=0}Rt(){return Object.assign({},this.Wt(),{callback:t=>void 0===typeof t?()=>{}:t})}animate(t){return this.enabled&&(this.Gt+=t,this.Xt+=t),super.animate(t)}draw(t,i){this.enabled&&this.callback(t,this.Gt,i,this),this.Xt=0}}class g extends d{constructor(t){super(t)}Rt(){return Object.assign({},super.Rt(),{sprite:[]})}animate(t){var i=super.animate(t),s=!1;if(this.enabled)for(var r in this.sprite)s=s||!0===this.sprite[r].animate(t);return this.animation?i:(s&&(this.enabled=!1),s)}play(t,i){for(var s in void 0===t&&(t=""),void 0===i&&(i=0),this.animation&&this.animation.play&&this.animation.play(t,i),this.sprite)this.sprite[s].play&&this.sprite[s].play(t,i)}resize(t,i){for(var s in this.sprite)this.sprite[s].resize(t,i)}draw(t,i){if(this.enabled){for(var s in this.alpha<1&&((i=Object.assign({},i)).alpha*=this.alpha),t.save(),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.sprite)this.sprite[s].draw(t,i);t.restore()}}}class y extends g{constructor(t){super(t),this.Yt=!1,this.j=2}Rt(){return Object.assign({},super.Rt(),{x:void 0,y:void 0,width:void 0,height:void 0,canvasWidth:void 0,canvasHeight:void 0,gridSize:void 0,norm:(i,s,r)=>e(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height),isDrawFrame:(t,i,s)=>e(t,!0)})}generateTempCanvas(t){var i=t.widthInPixel,s=t.heightInPixel;this.Ut=document.createElement("canvas"),this.canvasWidth&&this.canvasHeight?(this.Ut.width=this.canvasWidth,this.Ut.height=this.canvasHeight):this.gridSize?(this.Yt=this.gridSize,this.Ut.width=Math.round(this.Yt),this.Ut.height=Math.round(this.Yt)):(this.Ut.width=Math.round(i/this.scaleX),this.Ut.height=Math.round(s/this.scaleY)),this.Vt=this.Ut.getContext("2d")}normalizeFullScreen(t){(this.norm||void 0===this.x)&&(this.x=t.visibleScreen.x),(this.norm||void 0===this.y)&&(this.y=t.visibleScreen.y),(this.norm||void 0===this.width)&&(this.width=t.visibleScreen.width),(this.norm||void 0===this.height)&&(this.height=t.visibleScreen.height)}resize(t,i){if(this.Ut&&this.Yt!==this.gridSize&&!this.canvasWidth){var s=this.Ut;this.generateTempCanvas(i),this.Vt.globalCompositeOperation="copy",this.Vt.drawImage(s,0,0,s.width,s.height,0,0,this.Ut.width,this.Ut.height),this.Vt.globalCompositeOperation="source-over",this.j=2}this.normalizeFullScreen(i),super.resize(t,i)}draw(i,s){if(this.enabled){this.Ut||(this.generateTempCanvas(s),this.normalizeFullScreen(s)),this.gridSize&&this.Yt!==this.gridSize&&this.resize(s),this.j=Math.max(this.j-1,t(this.isDrawFrame,i,s));var r=this.width,h=this.height,e=r/2,n=h/2,a=this.Ut.width,o=this.Ut.height;if(this.j){this.Vt.textBaseline="middle",this.Vt.textAlign="center",this.Vt.globalAlpha=1,this.Vt.globalCompositeOperation="source-over",this.Vt.save();var u=s.cam;if(this.norm&&u){var c=Math.max(a,o)/2;this.Vt.translate(a/2,o/2),this.Vt.scale(c,c),this.Vt.scale(u.zoom,u.zoom),this.Vt.translate(-u.x,-u.y)}for(var f in this.sprite)this.sprite[f].draw(this.Vt,this.norm?Object.assign({},s,{alpha:1,widthInPixel:a,heightInPixel:o}):{alpha:1,x:0,y:0,width:a,height:o,widthInPixel:a,heightInPixel:o,visibleScreen:{x:0,y:0,width:a,height:o}});this.Vt.restore()}i.save(),i.globalCompositeOperation=this.compositeOperation,i.globalAlpha=this.alpha*s.alpha,i.translate(this.x+e,this.y+n),i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),i.drawImage(this.Ut,0,0,a,o,-e,-n,r,h),i.restore()}}}class M extends g{constructor(i){super(i.self||{});var s=e(t(i.count),1);this.sprite=[];for(var r=i.class,h=0;h<s;h++){var n={};for(var a in i)["self","class","count"].includes(a)||(n[a]="function"==typeof i[a]?i[a].call(i,h):i[a]);this.sprite[h]=new r(n)}}}class w extends d{constructor(t){super(t),this.Yt=!1}Rt(){return Object.assign({},super.Rt(),{x:void 0,y:void 0,width:void 0,height:void 0,gridSize:void 0,darker:0,pixel:!1,clear:!1,norm:(i,s,r)=>e(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height)})}generateTempCanvas(t){var i=t.widthInPixel,s=t.heightInPixel;this.Ut=document.createElement("canvas"),this.gridSize?(this.Yt=this.gridSize,this.Ut.width=Math.round(this.Yt),this.Ut.height=Math.round(this.Yt)):(this.Ut.width=Math.ceil(i/this.scaleX),this.Ut.height=Math.ceil(s/this.scaleY)),this.Vt=this.Ut.getContext("2d"),this.Vt.globalCompositeOperation="source-over",this.Vt.globalAlpha=1}normalizeFullScreen(t){(this.norm||void 0===this.x)&&(this.x=t.visibleScreen.x),(this.norm||void 0===this.y)&&(this.y=t.visibleScreen.y),(this.norm||void 0===this.width)&&(this.width=t.visibleScreen.width),(this.norm||void 0===this.height)&&(this.height=t.visibleScreen.height)}resize(t,i){if(this.Ut&&this.Yt!==this.gridSize){var s=this.Ut;this.generateTempCanvas(i),this.Vt.globalCompositeOperation="copy",this.Vt.drawImage(s,0,0,s.width,s.height,0,0,this.Ut.width,this.Ut.height),this.Vt.globalCompositeOperation="source-over"}this.normalizeFullScreen(i)}draw(t,i){if(this.enabled){this.Ut||(this.generateTempCanvas(i),this.normalizeFullScreen(i)),this.gridSize&&this.Yt!==this.gridSize&&this.resize(t,i);var s=this.alpha*i.alpha,r=this.width,h=this.height,e=this.Ut.width,n=this.Ut.height;s>0&&e&&n&&(this.Vt.globalCompositeOperation="copy",this.Vt.globalAlpha=1,this.Vt.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height,0,0,e,n),this.darker>0&&(this.Vt.globalCompositeOperation=this.clear?"source-atop":"source-over",this.Vt.fillStyle="rgba(0,0,0,"+this.darker+")",this.Vt.fillRect(0,0,e,n)),this.additionalBlur&&this.additionalBlur(e,n,i),this.clear&&t.clearRect(this.x,this.y,r,h),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=s,t.imageSmoothingEnabled=!this.pixel,t.drawImage(this.Ut,0,0,e,n,this.x,this.y,r,h),t.imageSmoothingEnabled=!0)}else this.clear&&(this.x||(this.x=i.x),this.y||(this.y=i.y),this.width||(this.width=i.width),this.height||(this.height=i.height),t.clearRect(this.x,this.y,this.width,this.height))}}class p extends d{constructor(t){super(t)}Rt(){return Object.assign({},super.Rt(),{image:i=>s.getImage(t(i)),position:p.CENTER,frameX:0,frameY:0,frameWidth:0,frameHeight:0,width:void 0,height:void 0,norm:!1,normCover:!1,normToScreen:!1})}resize(t,i){this.Ht=void 0}draw(t,i){if(this.enabled&&this.image){var s=this.frameWidth||this.image.width,r=this.frameHeight||this.image.height;this.Ht||(this.Ht=this.normToScreen?this.normCover?Math.max(i.fullScreen.width/s,i.fullScreen.height/r):this.norm?Math.min(i.fullScreen.width/s,i.fullScreen.height/r):1:this.normCover?Math.max(i.width/s,i.height/r):this.norm?Math.min(i.width/s,i.height/r):1);var h=(this.width?this.width:s)*this.Ht*this.scaleX,e=(this.height?this.height:r)*this.Ht*this.scaleY;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0==this.rotation?this.position===p.LEFT_TOP?t.drawImage(this.image,this.frameX,this.frameY,s,r,this.x,this.y,h,e):t.drawImage(this.image,this.frameX,this.frameY,s,r,this.x-h/2,this.y-e/2,h,e):(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.drawImage(this.image,this.frameX,this.frameY,s,r,-h/2,-e/2,h,e),t.restore())}}}p.LEFT_TOP=0,p.CENTER=1;class b extends d{constructor(t){super(t)}Rt(){return Object.assign({},super.Rt(),{text:void 0,font:"2em monospace",position:b.CENTER,color:void 0,borderColor:void 0,lineWidth:1})}draw(t,i){this.enabled&&(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.save(),this.position||(t.textAlign="left",t.textBaseline="top"),t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),t.font=this.font,this.color&&(t.fillStyle=this.color,t.fillText(this.text,0,0)),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.strokeText(this.text,0,0)),t.restore())}}function x(t,i){return t(i={exports:{}},i.exports),i.exports}b.LEFT_TOP=0,b.CENTER=1,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},k=x(function(t){var i=Array.prototype.concat,s=Array.prototype.slice,r=t.exports=function(t){for(var r,h=[],e=0,n=t.length;e<n;e++){var a=t[e];(r=a)&&"string"!=typeof r&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name))?h=i.call(h,s.call(a)):h.push(a)}return h};r.wrap=function(t){return function(){return t(r(arguments))}}}),O=x(function(t){var i={};for(var s in A)A.hasOwnProperty(s)&&(i[A[s]]=s);var r=t.exports={to:{},get:{}};function h(t,i,s){return Math.min(Math.max(i,t),s)}function e(t){var i=t.toString(16).toUpperCase();return i.length<2?"0"+i:i}r.get=function(t){var i,s;switch(t.substring(0,3).toLowerCase()){case"hsl":i=r.get.hsl(t),s="hsl";break;case"hwb":i=r.get.hwb(t),s="hwb";break;default:i=r.get.rgb(t),s="rgb"}return i?{model:s,value:i}:null},r.get.rgb=function(t){if(!t)return null;var i,s,r,e=[0,0,0,1];if(i=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=i[2],i=i[1],s=0;s<3;s++){var n=2*s;e[s]=parseInt(i.slice(n,n+2),16)}r&&(e[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(i=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(i=i[1])[3],s=0;s<3;s++)e[s]=parseInt(i[s]+i[s],16);r&&(e[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)e[s]=parseInt(i[s+1],0);i[4]&&(e[3]=parseFloat(i[4]))}else{if(!(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(i=t.match(/(\D+)/))?"transparent"===i[1]?[0,0,0,0]:(e=A[i[1]])?(e[3]=1,e):null:null;for(s=0;s<3;s++)e[s]=Math.round(2.55*parseFloat(i[s+1]));i[4]&&(e[3]=parseFloat(i[4]))}for(s=0;s<3;s++)e[s]=h(e[s],0,255);return e[3]=h(e[3],0,1),e},r.get.hsl=function(t){if(!t)return null;var i=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(i){var s=parseFloat(i[4]);return[(parseFloat(i[1])+360)%360,h(parseFloat(i[2]),0,100),h(parseFloat(i[3]),0,100),h(isNaN(s)?1:s,0,1)]}return null},r.get.hwb=function(t){if(!t)return null;var i=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(i){var s=parseFloat(i[4]);return[(parseFloat(i[1])%360+360)%360,h(parseFloat(i[2]),0,100),h(parseFloat(i[3]),0,100),h(isNaN(s)?1:s,0,1)]}return null},r.to.hex=function(){var t=k(arguments);return"#"+e(t[0])+e(t[1])+e(t[2])+(t[3]<1?e(Math.round(255*t[3])):"")},r.to.rgb=function(){var t=k(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},r.to.rgb.percent=function(){var t=k(arguments),i=Math.round(t[0]/255*100),s=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+i+"%, "+s+"%, "+r+"%)":"rgba("+i+"%, "+s+"%, "+r+"%, "+t[3]+")"},r.to.hsl=function(){var t=k(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},r.to.hwb=function(){var t=k(arguments),i="";return t.length>=4&&1!==t[3]&&(i=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+i+")"},r.to.keyword=function(t){return i[t.slice(0,3)]}}),_=x(function(t){var i={};for(var s in A)A.hasOwnProperty(s)&&(i[A[s]]=s);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var h in r)if(r.hasOwnProperty(h)){if(!("channels"in r[h]))throw new Error("missing channels property: "+h);if(!("labels"in r[h]))throw new Error("missing channel labels property: "+h);if(r[h].labels.length!==r[h].channels)throw new Error("channel and label counts mismatch: "+h);var e=r[h].channels,n=r[h].labels;delete r[h].channels,delete r[h].labels,Object.defineProperty(r[h],"channels",{value:e}),Object.defineProperty(r[h],"labels",{value:n})}r.rgb.hsl=function(t){var i,s,r=t[0]/255,h=t[1]/255,e=t[2]/255,n=Math.min(r,h,e),a=Math.max(r,h,e),o=a-n;return a===n?i=0:r===a?i=(h-e)/o:h===a?i=2+(e-r)/o:e===a&&(i=4+(r-h)/o),(i=Math.min(60*i,360))<0&&(i+=360),s=(n+a)/2,[i,100*(a===n?0:s<=.5?o/(a+n):o/(2-a-n)),100*s]},r.rgb.hsv=function(t){var i,s,r,h,e,n=t[0]/255,a=t[1]/255,o=t[2]/255,u=Math.max(n,a,o),c=u-Math.min(n,a,o),f=function(t){return(u-t)/6/c+.5};return 0===c?h=e=0:(e=c/u,i=f(n),s=f(a),r=f(o),n===u?h=r-s:a===u?h=1/3+i-r:o===u&&(h=2/3+s-i),h<0?h+=1:h>1&&(h-=1)),[360*h,100*e,100*u]},r.rgb.hwb=function(t){var i=t[0],s=t[1],h=t[2];return[r.rgb.hsl(t)[0],1/255*Math.min(i,Math.min(s,h))*100,100*(h=1-1/255*Math.max(i,Math.max(s,h)))]},r.rgb.cmyk=function(t){var i,s=t[0]/255,r=t[1]/255,h=t[2]/255;return[100*((1-s-(i=Math.min(1-s,1-r,1-h)))/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-h-i)/(1-i)||0),100*i]},r.rgb.keyword=function(t){var s=i[t];if(s)return s;var r,h,e,n=Infinity;for(var a in A)if(A.hasOwnProperty(a)){var o=(h=t,e=A[a],Math.pow(h[0]-e[0],2)+Math.pow(h[1]-e[1],2)+Math.pow(h[2]-e[2],2));o<n&&(n=o,r=a)}return r},r.keyword.rgb=function(t){return A[t]},r.rgb.xyz=function(t){var i=t[0]/255,s=t[1]/255,r=t[2]/255;return[100*(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*i+.7152*s+.0722*r),100*(.0193*i+.1192*s+.9505*r)]},r.rgb.lab=function(t){var i=r.rgb.xyz(t),s=i[0],h=i[1],e=i[2];return h/=100,e/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116)-16,500*(s-h),200*(h-(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116))]},r.hsl.rgb=function(t){var i,s,r,h,e,n=t[0]/360,a=t[1]/100,o=t[2]/100;if(0===a)return[e=255*o,e,e];i=2*o-(s=o<.5?o*(1+a):o+a-o*a),h=[0,0,0];for(var u=0;u<3;u++)(r=n+1/3*-(u-1))<0&&r++,r>1&&r--,h[u]=255*(e=6*r<1?i+6*(s-i)*r:2*r<1?s:3*r<2?i+(s-i)*(2/3-r)*6:i);return h},r.hsl.hsv=function(t){var i=t[0],s=t[1]/100,r=t[2]/100,h=s,e=Math.max(r,.01);return s*=(r*=2)<=1?r:2-r,h*=e<=1?e:2-e,[i,100*(0===r?2*h/(e+h):2*s/(r+s)),(r+s)/2*100]},r.hsv.rgb=function(t){var i=t[0]/60,s=t[1]/100,r=t[2]/100,h=Math.floor(i)%6,e=i-Math.floor(i),n=255*r*(1-s),a=255*r*(1-s*e),o=255*r*(1-s*(1-e));switch(r*=255,h){case 0:return[r,o,n];case 1:return[a,r,n];case 2:return[n,r,o];case 3:return[n,a,r];case 4:return[o,n,r];case 5:return[r,n,a]}},r.hsv.hsl=function(t){var i,s,r,h=t[0],e=t[1]/100,n=t[2]/100,a=Math.max(n,.01);return r=(2-e)*n,s=e*a,[h,100*(s=(s/=(i=(2-e)*a)<=1?i:2-i)||0),100*(r/=2)]},r.hwb.rgb=function(t){var i,s,r,h,e,n,a,o=t[0]/360,u=t[1]/100,c=t[2]/100,f=u+c;switch(f>1&&(u/=f,c/=f),r=6*o-(i=Math.floor(6*o)),0!=(1&i)&&(r=1-r),h=u+r*((s=1-c)-u),i){default:case 6:case 0:e=s,n=h,a=u;break;case 1:e=h,n=s,a=u;break;case 2:e=u,n=s,a=h;break;case 3:e=u,n=h,a=s;break;case 4:e=h,n=u,a=s;break;case 5:e=s,n=u,a=h}return[255*e,255*n,255*a]},r.cmyk.rgb=function(t){var i=t[1]/100,s=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,s*(1-r)+r))]},r.xyz.rgb=function(t){var i,s,r,h=t[0]/100,e=t[1]/100,n=t[2]/100;return s=-.9689*h+1.8758*e+.0415*n,r=.0557*h+-.204*e+1.057*n,i=(i=3.2406*h+-1.5372*e+-.4986*n)>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(i=Math.min(Math.max(0,i),1)),255*(s=Math.min(Math.max(0,s),1)),255*(r=Math.min(Math.max(0,r),1))]},r.xyz.lab=function(t){var i=t[0],s=t[1],r=t[2];return s/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(i-s),200*(s-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},r.lab.xyz=function(t){var i,s,r;i=t[1]/500+(s=(t[0]+16)/116),r=s-t[2]/200;var h=Math.pow(s,3),e=Math.pow(i,3),n=Math.pow(r,3);return s=h>.008856?h:(s-16/116)/7.787,i=e>.008856?e:(i-16/116)/7.787,r=n>.008856?n:(r-16/116)/7.787,[i*=95.047,s*=100,r*=108.883]},r.lab.lch=function(t){var i,s=t[0],r=t[1],h=t[2];return(i=360*Math.atan2(h,r)/2/Math.PI)<0&&(i+=360),[s,Math.sqrt(r*r+h*h),i]},r.lch.lab=function(t){var i,s=t[1];return i=t[2]/360*2*Math.PI,[t[0],s*Math.cos(i),s*Math.sin(i)]},r.rgb.ansi16=function(t){var i=t[0],s=t[1],h=t[2],e=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(e=Math.round(e/50)))return 30;var n=30+(Math.round(h/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return 2===e&&(n+=60),n},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var i=t[0],s=t[1],r=t[2];return i===s&&s===r?i<8?16:i>248?231:Math.round((i-8)/247*24)+232:16+36*Math.round(i/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5)},r.ansi16.rgb=function(t){var i=t%10;if(0===i||7===i)return t>50&&(i+=3.5),[i=i/10.5*255,i,i];var s=.5*(1+~~(t>50));return[(1&i)*s*255,(i>>1&1)*s*255,(i>>2&1)*s*255]},r.ansi256.rgb=function(t){if(t>=232){var i=10*(t-232)+8;return[i,i,i]}var s;return t-=16,[Math.floor(t/36)/5*255,Math.floor((s=t%36)/6)/5*255,s%6/5*255]},r.rgb.hex=function(t){var i=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(i.length)+i},r.hex.rgb=function(t){var i=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!i)return[0,0,0];var s=i[0];3===i[0].length&&(s=s.split("").map(function(t){return t+t}).join(""));var r=parseInt(s,16);return[r>>16&255,r>>8&255,255&r]},r.rgb.hcg=function(t){var i,s=t[0]/255,r=t[1]/255,h=t[2]/255,e=Math.max(Math.max(s,r),h),n=Math.min(Math.min(s,r),h),a=e-n;return i=a<=0?0:e===s?(r-h)/a%6:e===r?2+(h-s)/a:4+(s-r)/a+4,i/=6,[360*(i%=1),100*a,100*(a<1?n/(1-a):0)]},r.hsl.hcg=function(t){var i,s=t[1]/100,r=t[2]/100,h=0;return(i=r<.5?2*s*r:2*s*(1-r))<1&&(h=(r-.5*i)/(1-i)),[t[0],100*i,100*h]},r.hsv.hcg=function(t){var i=t[2]/100,s=t[1]/100*i,r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},r.hcg.rgb=function(t){var i=t[1]/100,s=t[2]/100;if(0===i)return[255*s,255*s,255*s];var r,h=[0,0,0],e=t[0]/360%1*6,n=e%1,a=1-n;switch(Math.floor(e)){case 0:h[0]=1,h[1]=n,h[2]=0;break;case 1:h[0]=a,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=n;break;case 3:h[0]=0,h[1]=a,h[2]=1;break;case 4:h[0]=n,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=a}return[255*(i*h[0]+(r=(1-i)*s)),255*(i*h[1]+r),255*(i*h[2]+r)]},r.hcg.hsv=function(t){var i=t[1]/100,s=i+t[2]/100*(1-i),r=0;return s>0&&(r=i/s),[t[0],100*r,100*s]},r.hcg.hsl=function(t){var i=t[1]/100,s=t[2]/100*(1-i)+.5*i,r=0;return s>0&&s<.5?r=i/(2*s):s>=.5&&s<1&&(r=i/(2*(1-s))),[t[0],100*r,100*s]},r.hcg.hwb=function(t){var i=t[1]/100,s=i+t[2]/100*(1-i);return[t[0],100*(s-i),100*(1-s)]},r.hwb.hcg=function(t){var i=1-t[2]/100,s=i-t[1]/100,r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var i=255&Math.round(t[0]/100*255),s=((i<<16)+(i<<8)+i).toString(16).toUpperCase();return"000000".substring(s.length)+s},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});function I(t,i){return function(s){return i(t(s))}}function P(t,i){for(var s=[i[t].parent,t],r=_[i[t].parent][t],h=i[t].parent;i[h].parent;)s.unshift(i[h].parent),r=I(_[i[h].parent][h],r),h=i[h].parent;return r.conversion=s,r}var F={};Object.keys(_).forEach(function(t){F[t]={},Object.defineProperty(F[t],"channels",{value:_[t].channels}),Object.defineProperty(F[t],"labels",{value:_[t].labels});var i=function(t){for(var i=function(t){var i=function(){for(var t={},i=Object.keys(_),s=i.length,r=0;r<s;r++)t[i[r]]={distance:-1,parent:null};return t}(),s=[t];for(i[t].distance=0;s.length;)for(var r=s.pop(),h=Object.keys(_[r]),e=h.length,n=0;n<e;n++){var a=h[n],o=i[a];-1===o.distance&&(o.distance=i[r].distance+1,o.parent=r,s.unshift(a))}return i}(t),s={},r=Object.keys(i),h=r.length,e=0;e<h;e++){var n=r[e];null!==i[n].parent&&(s[n]=P(n,i))}return s}(t);Object.keys(i).forEach(function(s){var r=i[s];F[t][s]=function(t){var i=function(i){if(null==i)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var s=t(i);if("object"==typeof s)for(var r=s.length,h=0;h<r;h++)s[h]=Math.round(s[h]);return s};return"conversion"in t&&(i.conversion=t.conversion),i}(r),F[t][s].raw=function(t){var i=function(i){return null==i?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(i.conversion=t.conversion),i}(r)})});var S=F,j=[].slice,C=["keyword","gray","hex"],z={};Object.keys(S).forEach(function(t){z[j.call(S[t].labels).sort().join("")]=t});var T={};function E(t,i){if(!(this instanceof E))return new E(t,i);if(i&&i in C&&(i=null),i&&!(i in S))throw new Error("Unknown model: "+i);var s,r;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof E)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=O.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,this.color=h.value.slice(0,r=S[this.model].channels),this.valpha="number"==typeof h.value[r]?h.value[r]:1}else if(t.length){this.model=i||"rgb";var e=j.call(t,0,r=S[this.model].channels);this.color=q(e,r),this.valpha="number"==typeof t[r]?t[r]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var n=Object.keys(t);"alpha"in t&&(n.splice(n.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var a=n.sort().join("");if(!(a in z))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=z[a];var o=S[this.model].labels,u=[];for(s=0;s<o.length;s++)u.push(t[o[s]]);this.color=q(u)}if(T[this.model])for(r=S[this.model].channels,s=0;s<r;s++){var c=T[this.model][s];c&&(this.color[s]=c(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function L(t,i,s){return(t=Array.isArray(t)?t:[t]).forEach(function(t){(T[t]||(T[t]=[]))[i]=s}),t=t[0],function(r){var h;return arguments.length?(s&&(r=s(r)),(h=this[t]()).color[i]=r,h):(h=this[t]().color[i],s&&(h=s(h)),h)}}function D(t){return function(i){return Math.max(0,Math.min(t,i))}}function N(t){return Array.isArray(t)?t:[t]}function q(t,i){for(var s=0;s<i;s++)"number"!=typeof t[s]&&(t[s]=0);return t}E.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var i=this.model in O.to?this:this.rgb(),s=1===(i=i.round("number"==typeof t?t:1)).valpha?i.color:i.color.concat(this.valpha);return O.to[i.model](s)},percentString:function(t){var i=this.rgb().round("number"==typeof t?t:1),s=1===i.valpha?i.color:i.color.concat(this.valpha);return O.to.rgb.percent(s)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},i=S[this.model].channels,s=S[this.model].labels,r=0;r<i;r++)t[s[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new E(this.color.map(function(t){return function(i){return function(t,i){return Number(t.toFixed(i))}(i,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new E(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:L("rgb",0,D(255)),green:L("rgb",1,D(255)),blue:L("rgb",2,D(255)),hue:L(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:L("hsl",1,D(100)),lightness:L("hsl",2,D(100)),saturationv:L("hsv",1,D(100)),value:L("hsv",2,D(100)),chroma:L("hcg",1,D(100)),gray:L("hcg",2,D(100)),white:L("hwb",1,D(100)),wblack:L("hwb",2,D(100)),cyan:L("cmyk",0,D(100)),magenta:L("cmyk",1,D(100)),yellow:L("cmyk",2,D(100)),black:L("cmyk",3,D(100)),x:L("xyz",0,D(100)),y:L("xyz",1,D(100)),z:L("xyz",2,D(100)),l:L("lab",0,D(100)),a:L("lab",1),b:L("lab",2),keyword:function(t){return arguments.length?new E(t):S[this.model].keyword(this.color)},hex:function(t){return arguments.length?new E(t):O.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,i=[],s=0;s<t.length;s++){var r=t[s]/255;i[s]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*i[0]+.7152*i[1]+.0722*i[2]},contrast:function(t){var i=this.luminosity(),s=t.luminosity();return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)},level:function(t){var i=this.contrast(t);return i>=7.1?"AAA":i>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),i=0;i<3;i++)t.color[i]=255-t.color[i];return t},lighten:function(t){var i=this.hsl();return i.color[2]+=i.color[2]*t,i},darken:function(t){var i=this.hsl();return i.color[2]-=i.color[2]*t,i},saturate:function(t){var i=this.hsl();return i.color[1]+=i.color[1]*t,i},desaturate:function(t){var i=this.hsl();return i.color[1]-=i.color[1]*t,i},whiten:function(t){var i=this.hwb();return i.color[1]+=i.color[1]*t,i},blacken:function(t){var i=this.hwb();return i.color[2]+=i.color[2]*t,i},grayscale:function(){var t=this.rgb().color,i=.3*t[0]+.59*t[1]+.11*t[2];return E.rgb(i,i,i)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var i=this.hsl(),s=i.color[0];return i.color[0]=s=(s=(s+t)%360)<0?360+s:s,i},mix:function(t,i){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var s=t.rgb(),r=this.rgb(),h=void 0===i?.5:i,e=2*h-1,n=s.alpha()-r.alpha(),a=((e*n==-1?e:(e+n)/(1+e*n))+1)/2,o=1-a;return E.rgb(a*s.red()+o*r.red(),a*s.green()+o*r.green(),a*s.blue()+o*r.blue(),s.alpha()*h+r.alpha()*(1-h))}},Object.keys(S).forEach(function(t){if(-1===C.indexOf(t)){var i=S[t].channels;E.prototype[t]=function(){if(this.model===t)return new E(this);if(arguments.length)return new E(arguments,t);var s="number"==typeof arguments[i]?i:this.valpha;return new E(N(S[this.model][t].raw(this.color)).concat(s),t)},E[t]=function(s){return"number"==typeof s&&(s=q(j.call(arguments),i)),new E(s,t)}}});var B=E;class R extends d{constructor(t){super(t),this.Jt=void 0,this.$t=!1}static getGradientImage(t,i,s){var r=t>>4,h=i>>4,e=s>>4;return R.Qt||(R.Qt=Array.from({length:16},t=>Array.from({length:16},t=>Array.from({length:16})))),R.Qt[r][h][e]||(R.Qt[r][h][e]=R.generateGradientImage(r,h,e)),R.Qt[r][h][e]}static generateGradientImage(t,i,s){var r=document.createElement("canvas");r.width=r.height=64;var h=r.getContext("2d");h.globalAlpha=1,h.globalCompositeOperation="source-over",h.clearRect(0,0,64,64);var e=h.createRadialGradient(32,32,0,32,32,32);return e.addColorStop(0,"rgba("+(16+(t<<4)-1)+","+(16+(i<<4)-1)+","+(16+(s<<4)-1)+",1)"),e.addColorStop(.3,"rgba("+(16+(t<<4)-1)+","+(16+(i<<4)-1)+","+(16+(s<<4)-1)+",0.4)"),e.addColorStop(1,"rgba("+(16+(t<<4)-1)+","+(16+(i<<4)-1)+","+(16+(s<<4)-1)+",0)"),h.fillStyle=e,h.fillRect(0,0,64,64),r}resize(t,i){this.Jt=void 0}draw(t,i){if(this.enabled){this.color&&this.color.color||(this.color=B(this.color).rgb()),this.Jt!==this.scaleX&&(this.Jt=this.scaleX,this.$t=this.scaleX*i.widthInPixel/i.width>64);var s=this.color.color;t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,t.imageSmoothingEnabled=this.$t,t.drawImage(R.getGradientImage(s[0],s[1],s[2]),0,0,64,64,this.x-this.scaleX/2,this.y-this.scaleY/2,this.scaleX,this.scaleY),t.imageSmoothingEnabled=!0}}}var W=x(function(t,i){t.exports=function(){var t=2*Math.PI,i=function(t,i,s,r,h,e,n){var a=t.x,o=t.y;return{x:r*(a*=i)-h*(o*=s)+e,y:h*a+r*o+n}},s=function(t,i){var s=4/3*Math.tan(i/4),r=Math.cos(t),h=Math.sin(t),e=Math.cos(t+i),n=Math.sin(t+i);return[{x:r-h*s,y:h+r*s},{x:e+n*s,y:n-e*s},{x:e,y:n}]},r=function(t,i,s,r){var h=t*r-i*s<0?-1:1,e=(t*s+i*r)/(Math.sqrt(t*t+i*i)*Math.sqrt(t*t+i*i));return e>1&&(e=1),e<-1&&(e=-1),h*Math.acos(e)},h=function(h){var e=h.px,n=h.py,a=h.cx,o=h.cy,u=h.rx,c=h.ry,f=h.xAxisRotation,l=void 0===f?0:f,v=h.largeArcFlag,d=void 0===v?0:v,m=h.sweepFlag,g=void 0===m?0:m,y=[];if(0===u||0===c)return[];var M=Math.sin(l*t/360),w=Math.cos(l*t/360),p=w*(e-a)/2+M*(n-o)/2,b=-M*(e-a)/2+w*(n-o)/2;if(0===p&&0===b)return[];u=Math.abs(u),c=Math.abs(c);var x=Math.pow(p,2)/Math.pow(u,2)+Math.pow(b,2)/Math.pow(c,2);x>1&&(u*=Math.sqrt(x),c*=Math.sqrt(x));var A=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var s=[],r=!0,h=!1,e=void 0;try{for(var n,a=t[Symbol.iterator]();!(r=(n=a.next()).done)&&(s.push(n.value),4!==s.length);r=!0);}catch(t){h=!0,e=t}finally{try{!r&&a.return&&a.return()}finally{if(h)throw e}}return s}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(i,s,h,e,n,a,o,u,c,f,l,v){var d=Math.pow(n,2),m=Math.pow(a,2),g=Math.pow(l,2),y=Math.pow(v,2),M=d*m-d*y-m*g;M<0&&(M=0),M/=d*y+m*g;var w=(M=Math.sqrt(M)*(o===u?-1:1))*n/a*v,p=M*-a/n*l,b=f*w-c*p+(i+h)/2,x=c*w+f*p+(s+e)/2,A=(l-w)/n,k=(v-p)/a,O=(-l-w)/n,_=(-v-p)/a,I=r(1,0,A,k),P=r(A,k,O,_);return 0===u&&P>0&&(P-=t),1===u&&P<0&&(P+=t),[b,x,I,P]}(e,n,a,o,u,c,d,g,M,w,p,b)),k=A[0],O=A[1],_=A[2],I=A[3],P=Math.max(Math.ceil(Math.abs(I)/(t/4)),1);I/=P;for(var F=0;F<P;F++)y.push(s(_,I)),_+=I;return y.map(function(t){var s=i(t[0],u,c,w,M,k,O),r=s.x,h=s.y,e=i(t[1],u,c,w,M,k,O),n=e.x,a=e.y,o=i(t[2],u,c,w,M,k,O);return{x1:r,y1:h,x2:n,y2:a,x:o.x,y:o.y}})},e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var i=t[0][0],s=t[0][1],r=i,h=s;return t.forEach(function(t){var e=t[0],n=t[2],a=t[4],o=t[6],u=t[1],c=t[3],f=t[5],l=t[7];i=Math.min(i,e,n,a,o),s=Math.min(s,u,c,f,l),r=Math.max(r,e,n,a,o),h=Math.max(h,u,c,f,l)}),[i,s,r,h]}var u={};function c(t,i,s,r,h,e,n,a,o,u){var c=(s-t)*o+t,f=(r-i)*o+i,l=(h-s)*o+s,v=(e-r)*o+r,d=(l-c)*o+c,m=(v-f)*o+f,g=(((n-h)*o+h-l)*o+l-d)*o+d,y=(((a-e)*o+e-v)*o+v-m)*o+m;return u?[g,y,d,m,c,f,t,i]:[t,i,c,f,d,m,g,y]}function f(t,i){for(var s=function(i){var s=[];t[t.length-1].forEach(function(t){s.push(t.slice(0))}),t.push(s)},r=0;r<i;r++)s()}return u.parser=function(t){var i=[];return t.replace(n,function(t,s,r){var h=s.toLowerCase();for(r=function(t){var i=t.match(a);return i?i.map(Number):[]}(r),"m"==h&&r.length>2&&(i.push([s].concat(r.splice(0,2))),h="l",s="m"==s?"l":"L");;){if(r.length==e[h])return r.unshift(s),i.push(r);if(r.length<e[h])throw new Error("malformed path data");i.push([s].concat(r.splice(0,e[h])))}}),i},u.lerpCurve=function(t,i,s){return u.lerpPoints(t[0],t[1],i[0],i[1],s).concat(u.lerpPoints(t[2],t[3],i[2],i[3],s)).concat(u.lerpPoints(t[4],t[5],i[4],i[5],s)).concat(u.lerpPoints(t[6],t[7],i[6],i[7],s))},u.lerpPoints=function(t,i,s,r,h){return[t+(s-t)*h,i+(r-i)*h]},u.q2b=function(t,i,s,r,h,e){return[t,i,(t+2*s)/3,(i+2*r)/3,(h+2*s)/3,(e+2*r)/3,h,e]},u.path2shapes=function(t){for(var i=u.parser(t),s=0,r=0,e=0,n=i.length,a=[],o=null,c=void 0,f=void 0,l=void 0,v=void 0,d=void 0,m=void 0,g=void 0;e<n;e++){var y=i[e],M=i[e-1];switch(y[0]){case"m":a[d=a.length]=[],o=a[d],s+=y[1],r+=y[2];break;case"M":a[d=a.length]=[],o=a[d],s=y[1],r=y[2];break;case"l":o.push([s,r,s,r,s,r,s+y[1],r+y[2]]),s+=y[1],r+=y[2];break;case"L":o.push([s,r,y[1],y[2],y[1],y[2],y[1],y[2]]),s=y[1],r=y[2];break;case"h":o.push([s,r,s,r,s,r,s+y[1],r]),s+=y[1];break;case"H":o.push([s,r,y[1],r,y[1],r,y[1],r]),s=y[1];break;case"v":o.push([s,r,s,r,s,r,s,r+y[1]]),r+=y[1];break;case"V":o.push([s,r,s,y[1],s,y[1],s,y[1]]),r=y[1];break;case"C":o.push([s,r,y[1],y[2],y[3],y[4],y[5],y[6]]),s=y[5],r=y[6];break;case"S":"C"===M[0]||"c"===M[0]?o.push([s,r,s+M[5]-M[3],r+M[6]-M[4],y[1],y[2],y[3],y[4]]):"S"!==M[0]&&"s"!==M[0]||o.push([s,r,s+M[3]-M[1],r+M[4]-M[2],y[1],y[2],y[3],y[4]]),s=y[3],r=y[4];break;case"c":o.push([s,r,s+y[1],r+y[2],s+y[3],r+y[4],s+y[5],r+y[6]]),s+=y[5],r+=y[6];break;case"s":"C"===M[0]||"c"===M[0]?o.push([s,r,s+M[5]-M[3],r+M[6]-M[4],s+y[1],r+y[2],s+y[3],r+y[4]]):"S"!==M[0]&&"s"!==M[0]||o.push([s,r,s+M[3]-M[1],r+M[4]-M[2],s+y[1],r+y[2],s+y[3],r+y[4]]),s+=y[3],r+=y[4];break;case"a":g=(m=h({rx:y[1],ry:y[2],px:s,py:r,xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5],cx:s+y[6],cy:r+y[7]}))[m.length-1],m.forEach(function(t,i){o.push(0===i?[s,r,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[m[i-1].x,m[i-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),s=g.x,r=g.y;break;case"A":g=(m=h({rx:y[1],ry:y[2],px:s,py:r,xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5],cx:y[6],cy:y[7]}))[m.length-1],m.forEach(function(t,i){o.push(0===i?[s,r,t.x1,t.y1,t.x2,t.y2,t.x,t.y]:[m[i-1].x,m[i-1].y,t.x1,t.y1,t.x2,t.y2,t.x,t.y])}),s=g.x,r=g.y;break;case"Q":o.push(u.q2b(s,r,y[1],y[2],y[3],y[4])),s=y[3],r=y[4];break;case"q":o.push(u.q2b(s,r,s+y[1],r+y[2],y[3]+s,y[4]+r)),s+=y[3],r+=y[4];break;case"T":"Q"===M[0]||"q"===M[0]?o.push(u.q2b(s,r,l=s+M[3]-M[1],v=r+M[4]-M[2],y[1],y[2])):"T"!==M[0]&&"t"!==M[0]||(o.push(u.q2b(s,r,s+s-l,r+r-v,y[1],y[2])),l=s+s-l,v=r+r-v),s=y[1],r=y[2];break;case"t":"Q"===M[0]||"q"===M[0]?o.push(u.q2b(s,r,l=s+M[3]-M[1],v=r+M[4]-M[2],s+y[1],r+y[2])):"T"!==M[0]&&"t"!==M[0]||(o.push(u.q2b(s,r,s+s-l,r+r-v,s+y[1],r+y[2])),l=s+s-l,v=r+r-v),s+=y[1],r+=y[2];break;case"Z":case"z":o.push([s,r,c=o[0][0],f=o[0][1],c,f,c,f])}}return a},u.Zt=function(t,i){for(var s=0,r=0,h=t.length;s<i;s++)t.push(t[r].slice(0)),++r>h-1&&(r-=h)},u.Kt=function(t,i){for(var s,r,h,e,n,a,o,u,f=0,l=0;f<i;f++){var v=t[l],d={left:c(s=v[0],r=v[1],h=v[2],e=v[3],n=v[4],a=v[5],o=v[6],u=v[7],.5),right:c(o,u,n,a,h,e,s,r,.5,!0)};t.splice(l,1),t.splice(l,0,d.left,d.right),(l+=2)>=t.length-1&&(l=0)}},u.lerp=function(t,i,s){return u.ti(u.path2shapes(t),u.path2shapes(i),s)},u.MIM_CURVES_COUNT=100,u.ii=function(t,i){var s=t.length,r=i.length,h=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(i));return s>r?f(e,s-r):s<r&&f(h,r-s),(h=function(t,i){var s=function(t){for(var i=[],s=0;s<t;s++)i.push(s);return r=[],h=[],function t(i){var s,e;for(s=0;s<i.length;s++)e=i.splice(s,1)[0],h.push(e),0==i.length&&r.push(h.slice()),t(i),i.splice(s,0,e),h.pop();return r}(i);var r,h}(t.length),r=[];s.forEach(function(s){var h=0;s.forEach(function(s){var r,e;h+=(r=o(t[s]),e=o(i[s]),Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2))+Math.sqrt(Math.pow(r[2]-e[2],2)+Math.pow(r[3]-e[3],2)))}),r.push({index:s,distance:h})}),r.sort(function(t,i){return t.distance-i.distance});var h=[];return r[0].index.forEach(function(i){h.push(t[i])}),h}(h,e)).forEach(function(t,i){var s=t.length,r=e[i].length;s>r?s<u.MIM_CURVES_COUNT?(u.Kt(t,u.MIM_CURVES_COUNT-s),u.Kt(e[i],u.MIM_CURVES_COUNT-r)):u.Kt(e[i],s-r):s<r&&(r<u.MIM_CURVES_COUNT?(u.Kt(t,u.MIM_CURVES_COUNT-s),u.Kt(e[i],u.MIM_CURVES_COUNT-r)):u.Kt(t,r-s))}),h.forEach(function(t,i){h[i]=function(t,i){var s=function(t){for(var i=[],s=0;s<t;s++){for(var r=[],h=0;h<t;h++){var e=h+s;e>t-1&&(e-=t),r[e]=h}i.push(r)}return i}(t.length),r=[];s.forEach(function(s){var h=0,e=0;s.forEach(function(s){var r,n,a,o,u,c,f,l,v,d,m,g,y,M,w,p;h+=(n=i[e++],a=(r=t[s])[2],o=r[4],u=r[6],c=r[1],f=r[3],l=r[5],v=r[7],d=n[2],m=n[4],g=n[6],y=n[1],M=n[3],w=n[5],p=n[7],Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(y-c,2))+Math.sqrt(Math.pow(d-a,2)+Math.pow(M-f,2))+Math.sqrt(Math.pow(m-o,2)+Math.pow(w-l,2))+Math.sqrt(Math.pow(g-u,2)+Math.pow(p-v,2)))}),r.push({index:s,distance:h})}),r.sort(function(t,i){return t.distance-i.distance});var h=[];return r[0].index.forEach(function(i){h.push(t[i])}),h}(t,e[i])}),[h,e]},u.ti=function(t,i,s){var r=[];return t.forEach(function(t,h){var e=[];t.forEach(function(t,r){e.push(u.lerpCurve(t,i[h][r],s))}),r.push(e)}),r},u.animate=function(t){var i=u.path2shapes(t.from),s=u.path2shapes(t.to),r=u.ii(i,s),h=new Date,e=t.end||function(){},n=t.progress||function(){},a=t.easing||function(t){return t},o=null,c=null,f=t.time;(t.begin||function(){})(i),function t(){var i=new Date-h;if(i>=f)return n(c=s,1),e(c),void cancelAnimationFrame(o);var l=a(i/f);c=u.ti(r[0],r[1],l),n(c,l),o=requestAnimationFrame(t)}()},u}()});class G extends g{constructor(t){if(super(t),this.oldPath=void 0,this.path2D=new Path2D,this.polyfill)if("function"!=typeof Path2D){var i=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.src="https://cdn.jsdelivr.net/npm/canvas-5-polyfill@0.1.5/canvas.min.js",i.appendChild(s)}else{var r=document.createElement("canvas").getContext("2d");r.stroke(new Path2D("M0,0H1")),r.getImageData(0,0,1,1).data[3]&&(this.polyfill=!1)}}Rt(){return Object.assign({},super.Rt(),{path:void 0,color:void 0,borderColor:void 0,lineWidth:1,clip:!1,fixed:!1,polyfill:!0})}changeToPathInit(t,i){return W.ii("string"==typeof t?W.path2shapes(t):t,"string"==typeof i?W.path2shapes(i):i)}changeToPath(t,i,s){return W.ti(i.pathFrom,i.pathTo,t)}draw(t,i){if(this.enabled){var s=this.alpha*i.alpha;this.oldPath!==this.path&&(this.polyfill&&"string"==typeof this.path&&(this.path=W.path2shapes(this.path)),Array.isArray(this.path)?(this.path2D=new Path2D,this.path.forEach(t=>{this.path2D.moveTo(t[0][0],t[0][1]),t.forEach(t=>{this.path2D.bezierCurveTo(t[2],t[3],t[4],t[5],t[6],t[7])}),this.path2D.closePath()})):this.path2D=this.path instanceof Path2D?this.path:new Path2D(this.path),this.oldPath=this.path);var r=this.scaleX,h=this.scaleY;for(var e in this.fixed&&(0==r&&(r=Number.EPSILON),0==h&&(h=Number.EPSILON)),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=s,t.save(),t.translate(this.x,this.y),t.scale(r,h),t.rotate(this.rotation),this.color&&(t.fillStyle=this.color,t.fill(this.path2D)),t.save(),this.clip&&(t.clip(this.path2D),this.fixed&&(t.rotate(-this.rotation),t.scale(1/r,1/h),t.translate(-this.x,-this.y))),this.sprite)this.sprite[e].draw(t,i);t.restore(),this.borderColor&&(t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.stroke(this.path2D)),t.restore()}}}class X extends d{constructor(t){super(t)}Rt(){return Object.assign({},super.Rt(),{x:void 0,y:void 0,width:void 0,height:void 0,borderColor:void 0,color:void 0,lineWidth:1,clear:!1,norm:(i,s,r)=>e(t(i),void 0===r.x&&void 0===r.y&&void 0===r.width&&void 0===r.height),position:X.CENTER})}normalizeFullScreen(t){(this.norm||void 0===this.width)&&(this.width=t.visibleScreen.width),(this.norm||void 0===this.height)&&(this.height=t.visibleScreen.height),(this.norm||void 0===this.x)&&(this.x=t.visibleScreen.x,this.position===X.CENTER&&(this.x+=this.width/2)),(this.norm||void 0===this.y)&&(this.y=t.visibleScreen.y,this.position===X.CENTER&&(this.y+=this.height/2))}resize(t,i){}draw(t,i){if(this.enabled)if(this.normalizeFullScreen(i),t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0===this.rotation&&this.position===X.LEFT_TOP)this.clear?t.clearRect(this.x,this.y,this.width,this.height):this.color&&(t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(this.x,this.y,this.width,this.height),t.stroke());else{var s=this.width/2,r=this.height/2;t.save(),this.position===X.LEFT_TOP?t.translate(this.x+s,this.y+r):t.translate(this.x,this.y),t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.clear?t.clearRect(-s,-r,this.width,this.height):this.color&&(t.fillStyle=this.color,t.fillRect(-s,-r,this.width,this.height)),this.borderColor&&(t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.rect(-s,-r,this.width,this.height),t.stroke()),t.restore()}}}X.LEFT_TOP=0,X.CENTER=1;class Y extends M{constructor(i){var s=t(i.text),r=Array.isArray(s)?s:[...s];super(Object.assign({},i,{class:b,count:r.length,text:t=>r[t],enabled:s=>" "!==r[s]&&t(i.enabled,s)}))}}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var V=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],H=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function J(t,i,s,r,h){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===U(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var e=t.getContext("2d");try{return e.getImageData(i,s,r,h)}catch(t){throw new Error("unable to access image data: "+t)}}function $(t,i,s,r,h,e){if(!(isNaN(e)||e<1)){e|=0;var n=J(t,i,s,r,h);n=Q(n,0,0,r,h,e),t.getContext("2d").putImageData(n,i,s)}}function Q(t,i,s,r,h,e){var n,a,o,u,c,f,l,v,d,m,g,y,M,w,p,b,x,A,k,O,_,I,P,F,S,j=t.data,C=2*e+1,z=r-1,T=h-1,E=e+1,L=E*(E+1)/2,D=new tt,N=D;for(o=1;o<C;o++)N=N.next=new tt,o===E&&(S=N);N.next=D;var q=null,B=null;l=f=0;var R=V[e],W=H[e];for(a=0;a<h;a++){for(b=x=A=k=v=d=m=g=0,y=E*(O=j[f]),M=E*(_=j[f+1]),w=E*(I=j[f+2]),p=E*(P=j[f+3]),v+=L*O,d+=L*_,m+=L*I,g+=L*P,N=D,o=0;o<E;o++)N.r=O,N.g=_,N.b=I,N.a=P,N=N.next;for(o=1;o<E;o++)v+=(N.r=O=j[u=f+((z<o?z:o)<<2)])*(F=E-o),d+=(N.g=_=j[u+1])*F,m+=(N.b=I=j[u+2])*F,g+=(N.a=P=j[u+3])*F,b+=O,x+=_,A+=I,k+=P,N=N.next;for(q=D,B=S,n=0;n<r;n++)j[f+3]=P=g*R>>W,0!==P?(j[f]=(v*R>>W)*(P=255/P),j[f+1]=(d*R>>W)*P,j[f+2]=(m*R>>W)*P):j[f]=j[f+1]=j[f+2]=0,v-=y,d-=M,m-=w,g-=p,y-=q.r,M-=q.g,w-=q.b,p-=q.a,u=l+((u=n+e+1)<z?u:z)<<2,v+=b+=q.r=j[u],d+=x+=q.g=j[u+1],m+=A+=q.b=j[u+2],g+=k+=q.a=j[u+3],q=q.next,y+=O=B.r,M+=_=B.g,w+=I=B.b,p+=P=B.a,b-=O,x-=_,A-=I,k-=P,B=B.next,f+=4;l+=r}for(n=0;n<r;n++){for(x=A=k=b=d=m=g=v=0,y=E*(O=j[f=n<<2]),M=E*(_=j[f+1]),w=E*(I=j[f+2]),p=E*(P=j[f+3]),v+=L*O,d+=L*_,m+=L*I,g+=L*P,N=D,o=0;o<E;o++)N.r=O,N.g=_,N.b=I,N.a=P,N=N.next;for(c=r,o=1;o<=e;o++)v+=(N.r=O=j[f=c+n<<2])*(F=E-o),d+=(N.g=_=j[f+1])*F,m+=(N.b=I=j[f+2])*F,g+=(N.a=P=j[f+3])*F,b+=O,x+=_,A+=I,k+=P,N=N.next,o<T&&(c+=r);for(f=n,q=D,B=S,a=0;a<h;a++)j[3+(u=f<<2)]=P=g*R>>W,P>0?(j[u]=(v*R>>W)*(P=255/P),j[u+1]=(d*R>>W)*P,j[u+2]=(m*R>>W)*P):j[u]=j[u+1]=j[u+2]=0,v-=y,d-=M,m-=w,g-=p,y-=q.r,M-=q.g,w-=q.b,p-=q.a,u=n+((u=a+E)<T?u:T)*r<<2,v+=b+=q.r=j[u],d+=x+=q.g=j[u+1],m+=A+=q.b=j[u+2],g+=k+=q.a=j[u+3],q=q.next,y+=O=B.r,M+=_=B.g,w+=I=B.b,p+=P=B.a,b-=O,x-=_,A-=I,k-=P,B=B.next,f+=r}return t}function Z(t,i,s,r,h,e){if(!(isNaN(e)||e<1)){e|=0;var n=J(t,i,s,r,h);n=K(n,0,0,r,h,e),t.getContext("2d").putImageData(n,i,s)}}function K(t,i,s,r,h,e){var n,a,o,u,c,f,l,v,d,m,g,y,M,w,p,b,x,A,k,O,_,I=t.data,P=2*e+1,F=r-1,S=h-1,j=e+1,C=j*(j+1)/2,z=new tt,T=z;for(o=1;o<P;o++)T=T.next=new tt,o===j&&(_=T);T.next=z;var E=null,L=null;l=f=0;var D=V[e],N=H[e];for(a=0;a<h;a++){for(w=p=b=v=d=m=0,g=j*(x=I[f]),y=j*(A=I[f+1]),M=j*(k=I[f+2]),v+=C*x,d+=C*A,m+=C*k,T=z,o=0;o<j;o++)T.r=x,T.g=A,T.b=k,T=T.next;for(o=1;o<j;o++)v+=(T.r=x=I[u=f+((F<o?F:o)<<2)])*(O=j-o),d+=(T.g=A=I[u+1])*O,m+=(T.b=k=I[u+2])*O,w+=x,p+=A,b+=k,T=T.next;for(E=z,L=_,n=0;n<r;n++)I[f]=v*D>>N,I[f+1]=d*D>>N,I[f+2]=m*D>>N,v-=g,d-=y,m-=M,g-=E.r,y-=E.g,M-=E.b,u=l+((u=n+e+1)<F?u:F)<<2,v+=w+=E.r=I[u],d+=p+=E.g=I[u+1],m+=b+=E.b=I[u+2],E=E.next,g+=x=L.r,y+=A=L.g,M+=k=L.b,w-=x,p-=A,b-=k,L=L.next,f+=4;l+=r}for(n=0;n<r;n++){for(p=b=w=d=m=v=0,g=j*(x=I[f=n<<2]),y=j*(A=I[f+1]),M=j*(k=I[f+2]),v+=C*x,d+=C*A,m+=C*k,T=z,o=0;o<j;o++)T.r=x,T.g=A,T.b=k,T=T.next;for(c=r,o=1;o<=e;o++)v+=(T.r=x=I[f=c+n<<2])*(O=j-o),d+=(T.g=A=I[f+1])*O,m+=(T.b=k=I[f+2])*O,w+=x,p+=A,b+=k,T=T.next,o<S&&(c+=r);for(f=n,E=z,L=_,a=0;a<h;a++)I[u=f<<2]=v*D>>N,I[u+1]=d*D>>N,I[u+2]=m*D>>N,v-=g,d-=y,m-=M,g-=E.r,y-=E.g,M-=E.b,u=n+((u=a+j)<S?u:S)*r<<2,v+=w+=E.r=I[u],d+=p+=E.g=I[u+1],m+=b+=E.b=I[u+2],E=E.next,g+=x=L.r,y+=A=L.g,M+=k=L.b,w-=x,p-=A,b-=k,L=L.next,f+=r}return t}var tt=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},it={__proto__:null,BlurStack:tt,image:function(t,i,s,r){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var h=t.naturalWidth,e=t.naturalHeight;if("string"==typeof i&&(i=document.getElementById(i)),i&&"getContext"in i){i.style.width=h+"px",i.style.height=e+"px",i.width=h,i.height=e;var n=i.getContext("2d");n.clearRect(0,0,h,e),n.drawImage(t,0,0),isNaN(s)||s<1||(r?$(i,0,0,h,e,s):Z(i,0,0,h,e,s))}}},canvasRGBA:$,canvasRGB:Z,imageDataRGBA:Q,imageDataRGB:K},{imageDataRGBA:st}=it;class rt extends w{constructor(t){super(t),this.Yt=!1,this.si=void 0}Rt(){return Object.assign({},super.Rt(),{onCanvas:!1,radius:void 0,radiusPart:void 0,radiusScale:!0})}normalizeFullScreen(t){this.norm&&this.onCanvas?(this.x=0,this.y=0,this.width=t.widthInPixel,this.height=t.heightInPixel):super.normalizeFullScreen(t)}resize(t,i){super.resize(t,i),this.radiusPart&&(this.radius=void 0)}additionalBlur(t,i,s){var r=this.Vt.getImageData(0,0,t,i);st(r,0,0,t,i,s.radius),this.Vt.putImageData(r,0,0)}draw(t,i){if(this.enabled){void 0!==this.radius&&this.si===this.radiusPart||(this.radius=Math.round((i.widthInPixel+i.heightInPixel)/2/this.radiusPart),this.si=this.radiusPart);var s=Math.round(this.radius*(this.radiusScale&&(i.cam?i.cam.zoom:1)/i.scaleCanvas));if(s)if(this.onCanvas){void 0!==this.width&&void 0!==this.height||this.normalizeFullScreen(i);var r=Math.round(this.x),h=Math.round(this.y),e=Math.round(this.width),n=Math.round(this.height);this.imageData=t.getImageData(r,h,e,n),st(this.imageData,0,0,e-r,n-h,s),t.putImageData(this.imageData,r,h,0,0,e,n)}else i.radius=s,super.draw(t,i)}else super.draw(t,i)}}class ht extends X{constructor(t){super(t),void 0!==this.x&&void 0!==this.y&&this.width&&this.height&&this.lineWidth?this.init():this.ri=void 0}Rt(){return Object.assign({},super.Rt(),{count:40,moveX:0,moveY:0,moveZ:0,lineWidth:void 0,highScale:!0,color:"#FFF"})}init(){this.ri=this.width/2+this.x,this.hi=this.height/2+this.y,this.ei=Math.max(this.width,this.height)/2,this.ni=[],this.ai=[],this.oi=[],this.ui=[],this.ci=[],this.fi=[],this.li=[],this.vi=[],this.di=[];for(var t=0;t<this.count;t++)this.ni[t]=Math.random()*this.width-this.width/2,this.ai[t]=Math.random()*this.height-this.height/2,this.oi[t]=Math.random()*this.ei}moveStar(t,i,s){s&&(this.vi[t]=!0);for(var r=this.width/2,h=this.height/2,e=this.ni[t]+this.moveX*i,n=this.ai[t]+this.moveY*i,a=this.oi[t]+this.moveZ*i;e<-r;)e+=this.width,n=Math.random()*this.height-h,this.vi[t]=!1;for(;e>r;)e-=this.width,n=Math.random()*this.height-h,this.vi[t]=!1;for(;n<-h;)n+=this.height,e=Math.random()*this.width-r,this.vi[t]=!1;for(;n>h;)n-=this.height,e=Math.random()*this.width-r,this.vi[t]=!1;for(;a<=0;)a+=this.ei,e=Math.random()*this.width-r,n=Math.random()*this.height-h,this.vi[t]=!1;for(;a>this.ei;)a-=this.ei,e=Math.random()*this.width-r,n=Math.random()*this.height-h,this.vi[t]=!1;var o=this.ri+e/a*r,u=this.hi+n/a*h;if(this.vi[t]=this.vi[t]&&o>=this.x&&u>=this.y&&o<this.x+this.width&&u<this.y+this.height,s)this.ni[t]=e,this.ai[t]=n,this.oi[t]=a,this.fi[t]=o,this.li[t]=u;else{this.ui[t]=o,this.ci[t]=u;var c=4*(1-this.oi[t]/this.ei);this.highScale||(c=Math.ceil(c)),this.di[t]=c}}animate(t){var i=super.animate(t);if(this.enabled&&void 0!==this.ri)for(var s=this.count;s--;)this.moveStar(s,t/16,!0),this.vi[s]&&this.moveStar(s,-5,!1);return i}resize(t,i){}draw(t,i){if(this.enabled){if(void 0===this.ri)return this.width=this.width||i.width,this.height=this.height||i.height,this.x=void 0===this.x?i.x:this.x,this.y=void 0===this.y?i.y:this.y,this.lineWidth=this.lineWidth||Math.min(i.height/i.heightInPixel,i.width/i.widthInPixel)/2,void this.init();if(t.globalCompositeOperation=this.compositeOperation,t.globalAlpha=this.alpha*i.alpha,0==this.moveY&&0==this.moveZ&&this.moveX<0){t.fillStyle=this.color;for(var s=this.count;s--;)this.vi[s]&&t.fillRect(this.fi[s],this.li[s]-this.di[s]*this.lineWidth/2,this.ui[s]-this.fi[s],this.di[s]*this.lineWidth)}else if(t.strokeStyle=this.color,this.highScale)for(var r=this.count;r--;)this.vi[r]&&(t.beginPath(),t.lineWidth=this.di[r]*this.lineWidth,t.moveTo(this.ui[r],this.ci[r]),t.lineTo(this.fi[r],this.li[r]),t.stroke(),t.closePath());else for(var h,e=5;--e;){for(t.beginPath(),t.lineWidth=e*this.lineWidth,h=this.count;h--;)this.vi[h]&&this.di[h]===e&&(t.moveTo(this.ui[h],this.ci[h]),t.lineTo(this.fi[h],this.li[h]));t.stroke(),t.closePath()}}}}var et=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new p(...i)},nt=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new b(...i)},at=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new X(...i)};StarField=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new ht(...i)},et.LEFT_TOP=p.LEFT_TOP,et.CENTER=p.CENTER,at.LEFT_TOP=X.LEFT_TOP,at.CENTER=X.CENTER,nt.LEFT_TOP=b.LEFT_TOP,nt.CENTER=b.CENTER;var ot={Callback:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new m(...i)},Canvas:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new y(...i)},Circle:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new d(...i)},Emitter:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new M(...i)},FastBlur:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new w(...i)},Group:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new g(...i)},Image:et,Text:nt,Particle:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new R(...i)},Path:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new G(...i)},Rect:at,Scroller:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Y(...i)},StackBlur:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new rt(...i)},StarField};class ut{constructor(i,s){this.callback=i,this.duration=e(t(s),void 0),this.initialized=!1}reset(){this.initialized=!1}run(t,i){var s;return void 0!==this.duration?(this.callback(t,Math.min(i,this.duration),!this.initialized),this.initialized=!0,i-this.duration):(s=this.callback(t,i,!this.initialized),this.initialized=!0,s)}}function ct(t,i){return i.from+t*i.delta}function ft(t,i){for(var s,r=[...i.values],h=r.length;h>1;)for(h--,s=0;s<h;s++)r[s]=r[s]+t*(r[s+1]-r[s]);return r[0]}function lt(t,i,s){return i.colorFrom.mix(i.colorTo,t).string()}function vt(t,i,s){return s.changeToPath(t,i,s)}class dt{constructor(i,s,r){for(var h in this.initialized=!1,this.changeValues=[],i){var n=i[h],a="rotationInDegree"===h?.017453292519943295*n:n,o="color"===h||"borderColor"===h,u="path"===h,c="function"==typeof a,f=!o&&Array.isArray(a),l="scale"===h?["scaleX","scaleY"]:"rotationInRadian"===h||"rotationInDegree"===h?["rotation"]:[h];for(var v of l)this.changeValues.push({name:v,to:f?a[a.length-1]:t(a,1,{}),bezier:!!f&&a,isColor:o,isPath:u,isFunction:!!c&&a,moveAlgorithm:o?lt:u?vt:f?ft:ct})}this.duration=e(t(s),0),this.ease=e(r,t=>t)}reset(){this.initialized=!1}init(t,i){for(var s,r=this.changeValues.length;r--;)(s=this.changeValues[r]).isFunction?(s.from=t[s.name],s.to=s.isFunction(s.from),s.isColor?(s.colorFrom=B(s.from),s.colorTo=B(s.to),s.moveAlgorithm=lt):s.isPath?([s.pathFrom,s.pathTo]=t.changeToPathInit(s.from,s.to),s.moveAlgorithm=vt):Array.isArray(s.to)?(s.values=[t[s.name],...s.to],s.moveAlgorithm=ft):(s.delta=s.to-s.from,s.moveAlgorithm=ct)):s.isColor?(s.colorFrom=B(t[s.name]),s.colorTo=B(s.to)):s.isPath?[s.pathFrom,s.pathTo]=t.changeToPathInit(t[s.name],s.to):s.bezier?s.values=[t[s.name],...s.bezier]:(s.from=t[s.name],s.delta=s.to-s.from)}run(t,i){if(this.initialized||(this.initialized=!0,this.init(t,i)),this.duration<=i)for(var s,r=this.changeValues.length;r--;)t[(s=this.changeValues[r]).name]=s.to;else for(var h,e=this.changeValues.length,n=this.ease(i/this.duration);e--;)t[(h=this.changeValues[e]).name]=h.moveAlgorithm(n,h,t);return i-this.duration}}class mt{constructor(){}run(t,i){return v.TIMELAPSE_TO_FORCE_DISABLE}}class gt{constructor(){}run(t,i){return t.enabled=!1,v.TIMELAPSE_TO_FORCE_DISABLE}}class yt{constructor(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];this.Aniobject=i[0]instanceof v?i[0]:new v(...i)}reset(t){void 0===t&&(t=0),this.Aniobject.reset&&this.Aniobject.reset(t)}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.Aniobject.play&&this.Aniobject.play(t,i)}run(t,i,s){for(var r=i;r>=0;){if(r=this.Aniobject.run(t,r,s),s=!0,!0===r)return!0;r>=0&&this.Aniobject.reset&&this.Aniobject.reset()}return r}}class Mt{constructor(t,i,s){this.ifCallback=t,this.Aniobject=i,this.AniobjectElse=e(s,()=>0)}run(i,s){var r=t(this.ifCallback)?this.Aniobject:this.AniobjectElse;return r.run?r.run(i,s):r(i,s)}}class wt{constructor(i,s){this.initialized=!1,this.image=t(i),this.durationBetweenFrames=e(t(s),0),Array.isArray(this.image)?this.count=this.image.length:(this.image=[this.image],this.count=1),this.duration=this.count*this.durationBetweenFrames}reset(){this.initialized=!1}run(t,i){if(this.initialized||(this.initialized=!0,this.current=-1),i>=this.duration)t.image=s.getImage(this.image[this.image.length-1]);else{var r=Math.floor(i/this.durationBetweenFrames);r!==this.current&&(this.current=r,t.image=s.getImage(this.image[this.current]))}return i-this.duration}}class pt{constructor(i,s,r){this.initialized=!1,this.frameNumber=t(i),this.framesToRight=e(t(s),!0),this.durationBetweenFrames=e(t(r),0),Array.isArray(this.frameNumber)||(this.frameNumber=[this.frameNumber]),this.duration=this.frameNumber.length*this.durationBetweenFrames}run(t,i){var s;return s=i>=this.duration?this.frameNumber[this.frameNumber.length-1]:this.frameNumber[Math.floor(i/this.durationBetweenFrames)],this.framesToRight?t.frameX=t.frameWidth*s:t.frameY=t.frameHeight*s,i-this.duration}}class bt{constructor(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),h=1;h<s;h++)r[h-1]=arguments[h];this.Aniobject=r[0]instanceof v?r[0]:new v(...r),this.times=this.timesOrg=e(t(i),1)}reset(t){void 0===t&&(t=0),this.times=this.timesOrg,this.Aniobject.reset&&this.Aniobject.reset(t)}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.times=this.timesOrg,this.Aniobject.play&&this.Aniobject.play(t,i)}run(t,i,s){for(var r=i;r>=0&&this.times>0;){if(r=this.Aniobject.run(t,r,s),s=!0,!0===r)return!0;r>=0&&(this.times--,this.Aniobject.reset&&this.Aniobject.reset())}return r}}class xt extends dt{constructor(i,s,r,h){super({x:i,y:s},0,h),this.speed=t(r)||1}init(t,i){if(0==this.speed||this.targetX===t.x&&this.targetY===t.y)this.duration=0;else{var s=this.changeValues[0],r=this.changeValues[1];s.from=t.x,r.from=t.y,s.delta=s.to-s.from,r.delta=r.to-r.from;var h=Math.sqrt(s.delta*s.delta+r.delta*r.delta);this.duration=10*h/this.speed}super.init(t,i)}}class At{constructor(){}run(t,i){return v.TIMELAPSE_TO_REMOVE}}class kt{constructor(i,s){this.Aniobject=i,this.times=e(t(s),1)}run(t,i){if(this.times<=0)return i;var s=this.Aniobject.run(t,i);return s>=0&&this.times--,s}}class Ot{constructor(i,s){this.initialized=!1,this.duration=t(s),this.shakeDiff=t(i),this.shakeDiffHalf=this.shakeDiff/2}reset(){this.initialized=!1}run(t,i){return this.initialized||(this.initialized=!0,this.x=t.x,this.y=t.y),i>=this.duration?(t.x=this.x,t.y=this.y):(t.x=this.x+Math.random()*this.shakeDiff-this.shakeDiffHalf,t.y=this.y+Math.random()*this.shakeDiff-this.shakeDiffHalf),i-this.duration}}class _t{constructor(){this.showOnce=!0}run(t,i){return t.enabled=t.enabled&&this.showOnce,this.showOnce=!1,0}}class It{constructor(t){var{states:i={},transitions:s={},default:r,delegateTo:h}=void 0===t?{}:t;this.states=i,Object.keys(this.states).forEach(t=>{Array.isArray(this.states[t])&&(this.states[t]=new v(this.states[t]))}),this.transitions=s,this.delegateTo=h,this.currentStateName=r,this.currentState=this.states[r],this.isTransitioningToStateName=void 0}setState(t,i){if(t!==this.currentStateName){this.isTransitioningToStateName=t;var s=""+t.charAt(0).toUpperCase()+t.slice(1),r=[this.currentStateName+"To"+s,this.currentStateName+"To","to"+s].find(t=>this.transitions[t]);r?(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.transitions[r],this.currentState&&this.currentState.reset&&this.currentState.reset()):(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0)}}play(t,i){void 0===t&&(t=""),void 0===i&&(i=0),this.currentState.play&&this.currentState.play(t,i)}run(t,i,s){var r=i,h=s;if(this.currentState){if(!0===(r=this.currentState.run(t,r,h)))return!0;h=!0}if(r>=0||!this.currentState)if(this.isTransitioningToStateName){if(this.currentStateName=this.isTransitioningToStateName,this.currentState=this.states[this.currentStateName],this.currentState&&this.currentState.reset&&this.currentState.reset(),this.isTransitioningToStateName=void 0,!0===(r=this.currentState.run(t,r,h)))return!0}else this.currentState=void 0;return-1}}class Pt{constructor(){}run(t,i){return v.TIMELAPSE_TO_STOP}}class Ft{constructor(){}run(t,i){return t.enabled=!1,v.TIMELAPSE_TO_STOP}}class St{constructor(i){this.duration=e(t(i),0)}run(t,i){return t.enabled=i>=this.duration,i-this.duration}}var jt={Callback:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new ut(...i)},ChangeTo:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new dt(...i)},End:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new mt(...i)},EndDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new gt(...i)},Forever:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new yt(...i)},If:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Mt(...i)},Image:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new wt(...i)},ImageFrame:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new pt(...i)},Loop:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new bt(...i)},Move:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new xt(...i)},Once:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new kt(...i)},Remove:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new At(...i)},Sequence:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new v(...i)},Shake:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Ot(...i)},ShowOnce:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new _t(...i)},State:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new It(...i)},Stop:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Pt(...i)},StopDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Ft(...i)},Wait:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new l(...i)},WaitDisabled:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new St(...i)}},Ct=function(t){var i=t*t;return t<4/11?7.5625*i:t<8/11?9.075*i-9.9*t+3.4:t<.9?4356/361*i-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},zt={backInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},backIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},backOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},bounceInOut:function(t){return t<.5?.5*(1-Ct(1-2*t)):.5*Ct(2*t-1)+.5},bounceIn:function(t){return 1-Ct(1-t)},bounceOut:Ct,circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},circIn:function(t){return 1-Math.sqrt(1-t*t)},circOut:function(t){return Math.sqrt(1- --t*t)},cubicInOut:function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},cubicIn:function(t){return t*t*t},cubicOut:function(t){var i=t-1;return i*i*i+1},elasticInOut:function(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1},elasticIn:function(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))},elasticOut:function(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1},expoInOut:function(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1},expoIn:function(t){return 0===t?t:Math.pow(2,10*(t-1))},expoOut:function(t){return 1===t?t:1-Math.pow(2,-10*t)},linear:function(t){return t},quadInOut:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},quadIn:function(t){return t*t},quadOut:function(t){return-t*(t-2)},quartInOut:function(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1},quartIn:function(t){return Math.pow(t,4)},quartOut:function(t){return Math.pow(t-1,3)*(1-t)+1},quintInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},quintIn:function(t){return t*t*t*t*t},quintOut:function(t){return--t*t*t*t*t+1},sineInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},sineIn:function(t){var i=Math.cos(t*Math.PI*.5);return Math.abs(i)<1e-14?1:1-i},sineOut:function(t){return Math.sin(t*Math.PI/2)}},Tt=function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return new i(...s)},Et={Default:n,Audio:class extends n{constructor(t){void 0===t&&(t={}),super(t),this.st=Number.POSITIVE_INFINITY,this.mi=null,this.gi=null,this.yi=!1,this.Mi=this.tt.audioElement}get audioElement(){return this.Mi}init(){this.Mi&&("function"==typeof MediaController&&(this.Mi.controller=new MediaController,this.yi=!0),this.Mi.preload="auto",this.Mi.load())}isLoaded(){if(this.Mi){if(!(this.Mi.readyState>=this.Mi.HAVE_ENOUGH_DATA))return!1;var t=this.Mi.play();if(t&&t.catch(t=>{}),this.Mi.duration>0)return 1e3*this.Mi.duration}return!0}currentTime(){var t=super.currentTime();if(this.Mi){var i=1e3*(this.Mi.ended?this.Mi.duration:this.Mi.currentTime);if(this.yi){if(null===this.mi)return this.mi=t,this.gi=i,i;if("playing"===this.Mi.controller.playbackState){if(i===this.gi)return this.gi+Math.min(260,t-this.mi);if(i-this.gi<500&&i>this.gi&&t-this.mi<350)return this.mi=this.mi+(i-this.gi),this.gi=i,this.gi+t-this.mi}return this.mi=t,this.gi=i,this.gi}return i}return t}clampTime(t){return t}shiftTime(t){return 0}}};export{jt as Animations,zt as Easing,Tt as Engine,s as ImageManager,f as Scenes,ot as Sprites,Et as Timing};
//# sourceMappingURL=animationvideo.modern.js.map
