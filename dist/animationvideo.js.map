{"version":3,"file":"animationvideo.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../func/calc.mjs","../func/toArray.mjs","../Engine.mjs","../ImageManager.mjs","../Layer.mjs","../LayerManager.mjs","../func/ifNull.mjs","../Middleware/TimingDefault.mjs","../Scene.mjs","../Animations/Wait.mjs","../Animations/Sequence.mjs","../Sprites/Circle.mjs","../Sprites/Callback.mjs","../Sprites/Group.mjs","../Sprites/Canvas.mjs","../Sprites/Emitter.mjs","../Sprites/FastBlur.mjs","../Sprites/Image.mjs","../Sprites/Text.mjs","../Sprites/Particle.mjs","../Sprites/Path.mjs","../Sprites/Rect.mjs","../Sprites/StackBlur.mjs","../Sprites.mjs","../Sprites/Scroller.mjs","../Sprites/StarField.mjs","../Animations/Callback.mjs","../Animations/ChangeTo.mjs","../Animations/End.mjs","../Animations/EndDisabled.mjs","../Animations/Forever.mjs","../Animations/If.mjs","../Animations/Image.mjs","../Animations/ImageFrame.mjs","../Animations/Loop.mjs","../Animations/Move.mjs","../Animations/Remove.mjs","../Animations/Once.mjs","../Animations/Shake.mjs","../Animations/ShowOnce.mjs","../Animations/State.mjs","../Animations/Stop.mjs","../Animations/StopDisabled.mjs","../Animations.mjs","../Animations/WaitDisabled.mjs","../Middleware/Camera.mjs","../Middleware/CameraControl.mjs","../Middleware.mjs","../Middleware/CameraControlSecondButton.mjs","../Middleware/Click.mjs","../Middleware/Element.mjs","../Middleware/Events.mjs","../Middleware/LoadingScreen.mjs","../Middleware/Norm.mjs","../Middleware/TimingAudio.mjs"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","export default function calc(c, obj = null, ...params) {\n\treturn typeof(c) === \"function\" ? c.apply(obj,params) : c;\n}","export default function toArray(value)\t{\r\n\treturn (value === undefined || value === null ? [] : Array.isArray(value) ? value : [value]);\r\n}","import calc from \"./func/calc.mjs\";\nimport toArray from \"./func/toArray.mjs\";\n\nclass Engine {\n  constructor(canvasOrOptions) {\n    let givenOptions = canvasOrOptions;\n    if (typeof canvasOrOptions !== \"object\") {\n      throw new Error(\"No canvas given for Engine constructor\");\n    }\n    if (canvasOrOptions.getContext) {\n      givenOptions = {\n        canvas: canvasOrOptions\n      };\n    } else if (!canvasOrOptions.canvas) {\n      throw new Error(\"No canvas given for Engine constructor\");\n    }\n    let options = Object.assign(\n      {},\n      /*\n      {\n         undefined is falsy - saves a few bytes\n        scene: null,\n        canvas: null,\n        autoSize: false,\n        clickToPlayAudio: false,\n        reduceFramerate: false\n      },\n      */\n      givenOptions\n    );\n\n    this._output = {\n      canvas: [],\n      context: [],\n      width: 0,\n      height: 0,\n      ratio: 1\n    };\n\n    // list of binded events\n    this._events = [];\n\n    // the current _scene-object\n    this._scene = null;\n    // is a _scene ready for action?\n    this._isSceneInitialized = false;\n    // new _scene to initialize\n    // this._newScene = undefined;\n    // this._promiseSceneDestroying = undefined;\n\n    // time measurement\n    this._lastTimestamp = 0;\n    this._recalculateCanvasIntend = false;\n\n    // reference to\n    this._referenceRequestAnimationFrame = null;\n\n    // data about the output canvas\n    this._output.canvas = toArray(options.canvas);\n\n    if (options.autoSize) {\n      const defaultAutoSizeSettings = {\n        enabled: true,\n        scaleLimitMin: 1,\n        scaleLimitMax: 2.5,\n        scaleFactor: 1.07,\n        referenceWidth: () => this._output.canvas[0].clientWidth,\n        referenceHeight: () => this._output.canvas[0].clientHeight,\n        currentScale: 1,\n        waitTime: 100,\n        currentWaitedTime: 0,\n        currentOffsetTime: 0,\n        offsetTimeLimitUp: 300,\n        offsetTimeLimitDown: 300,\n        // undefined will be autodetect timing\n        // offsetTimeTarget: 25,\n        // offsetTimeDelta: 10,\n        registerResizeEvents: true,\n        registerVisibilityEvents: true,\n        setCanvasStyle: false\n      };\n      if (typeof options.autoSize === \"object\") {\n        this._autoSize = Object.assign(\n          {},\n          defaultAutoSizeSettings,\n          options.autoSize\n        );\n      } else {\n        this._autoSize = defaultAutoSizeSettings;\n      }\n      if (this._autoSize.registerResizeEvents) {\n        this._events = [\"resize\", \"orientationchange\"].map(e => ({\n          n: window,\n          e: e,\n          f: this.recalculateCanvas.bind(this)\n        }));\n      }\n      if (this._autoSize.registerVisibilityEvents) {\n        this._events.push({\n          n: document,\n          e: \"visibilitychange\",\n          f: this.handleVisibilityChange.bind(this)\n        });\n      }\n      this._recalculateCanvas();\n    } else {\n      this._output.width = this._output.canvas[0].width;\n      this._output.height = this._output.canvas[0].height;\n      this._output.ratio = this._output.width / this._output.height;\n    }\n    this._output.canvas.forEach((canvas, index) => {\n      this._output.context[index] = canvas.getContext(\"2d\");\n    });\n    this._canvasCount = this._output.canvas.length;\n    this._drawFrame = Array.from({ length: this._canvasCount }, v => 0);\n\n    if (options.clickToPlayAudio) {\n      this._events.push({\n        n: this._output.canvas[0],\n        e: \"click\",\n        f: this.playAudioOfScene.bind(this)\n      });\n    }\n\n    this._reduceFramerate = options.reduceFramerate;\n    // not needed because undefined is falsy\n    // this._isOddFrame = true\n\n    this._events.forEach(v => {\n      v.n.addEventListener(v.e, v.f);\n    });\n\n    this.switchScene(options.scene, options.sceneParameter || {});\n  }\n\n  handleVisibilityChange() {\n    this._autoSize.enabled = !(document.visibilityState == \"hidden\");\n  }\n\n  playAudioOfScene() {\n    if (\n      this._isSceneInitialized &&\n      this._scene &&\n      this._scene.timing.audioElement\n    ) {\n      this._scene.timing.audioElement.play();\n    }\n  }\n\n  normContext(ctx) {\n    ctx.textBaseline = \"middle\";\n    ctx.textAlign = \"center\";\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n  }\n\n  getWidth() {\n    return this._output.width;\n  }\n\n  getHeight() {\n    return this._output.height;\n  }\n\n  getRatio() {\n    return this._output.ratio;\n  }\n\n  getOutput() {\n    return this._output;\n  }\n\n  recalculateCanvas() {\n    this._recalculateCanvasIntend = true;\n    return this;\n  }\n\n  _recalculateCanvas() {\n    if (this._autoSize) {\n      const width = calc(this._autoSize.referenceWidth);\n      const height = calc(this._autoSize.referenceHeight);\n      if (width <= 0 || height <= 0) {\n        return;\n      }\n      this._output.canvas.forEach(canvas => {\n        canvas.width = Math.round(width / this._autoSize.currentScale);\n        canvas.height = Math.round(height / this._autoSize.currentScale);\n        if (this._autoSize.setCanvasStyle) {\n          canvas.style.width = `${width}px`;\n          canvas.style.height = `${height}px`;\n        }\n      });\n      this._autoSize.currentWaitedTime = 0;\n      this._autoSize.currentOffsetTime = 0;\n    }\n\n    this._output.width = this._output.canvas[0].width;\n    this._output.height = this._output.canvas[0].height;\n    this._output.ratio = this._output.width / this._output.height;\n\n    this.resize();\n  }\n\n  async recalculateFPS() {\n    if (this._referenceRequestAnimationFrame) {\n      window.cancelAnimationFrame(this._referenceRequestAnimationFrame);\n      this._referenceRequestAnimationFrame = false;\n    }\n    await new Promise(resolve => requestAnimationFrame(resolve));\n    const start = this._now();\n    const count = 3;\n    for (let i = count; i--; ) {\n      await new Promise(resolve => requestAnimationFrame(resolve));\n    }\n\n    const timeBetweenFrames = (this._now() - start) / count;\n    this._autoSize.offsetTimeTarget = timeBetweenFrames;\n    this._autoSize.offsetTimeDelta = timeBetweenFrames / 3;\n\n    if (this._referenceRequestAnimationFrame === false) {\n      this._realLastTimestamp = false;\n      this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n        this._mainLoop.bind(this)\n      );\n    }\n  }\n\n  resize() {\n    if (this._scene && this._scene.resize) {\n      this._scene.resize();\n    }\n    return this;\n  }\n\n  switchScene(scene, sceneParameter) {\n    if (scene) {\n      this._newScene = scene;\n      this._sceneParameter = sceneParameter;\n    }\n    return this;\n  }\n\n  _now() {\n    return window.performance ? performance.now() : Date.now();\n  }\n\n  _mainLoop(timestamp) {\n    if (!this._referenceRequestAnimationFrame) return\n    this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n      this._mainLoop.bind(this)\n    );\n\n    let isRecalculatedCanvas =\n      this._recalculateCanvasIntend &&\n      (!this._reduceFramerate || !this._isOddFrame);\n\n    if (isRecalculatedCanvas) {\n      this._recalculateCanvas();\n      this._recalculateCanvasIntend = false;\n    }\n\n    for (let i = 0; i < this._canvasCount; i++) {\n      this._drawFrame[i] = Math.max(\n        this._drawFrame[i] - 1,\n        isRecalculatedCanvas ? 1 : 0\n      );\n    }\n\n    if (!this._realLastTimestamp) {\n      this._realLastTimestamp = timestamp;\n    }\n    if (!this._initializedStartTime) {\n      this._initializedStartTime = timestamp;\n    }\n\n    if (this._newScene && !this._promiseSceneDestroying) {\n      this._promiseSceneDestroying = Promise.resolve(\n        this._scene ? this._scene.destroy() : {}\n      );\n      this._promiseSceneDestroying.then(destroyParameterForNewScene => {\n        this._newScene.callInit(\n          {\n            run: this._runParameter,\n            scene: this._sceneParameter,\n            destroy: destroyParameterForNewScene\n          },\n          this\n        );\n        this._scene = this._newScene;\n        this._newScene = undefined;\n        this._promiseSceneDestroying = undefined;\n        this._isSceneInitialized = false;\n        this._lastTimestamp = this._scene.currentTime();\n        this._initializedStartTime = timestamp;\n      });\n    }\n\n    if (this._scene) {\n      if (this._reduceFramerate) {\n        this._isOddFrame = !this._isOddFrame;\n      }\n\n      if (!this._reduceFramerate || this._isOddFrame) {\n        let now = this._scene.currentTime();\n\n        // modify time by scene\n        // first set a min/max\n        let timePassed = this._scene.clampTime(now - this._lastTimestamp);\n        // then maybe shift to fit a framerate\n        const shiftTime = this._scene.shiftTime(timePassed);\n        timePassed = timePassed + shiftTime;\n        this._lastTimestamp = now + shiftTime;\n\n        if (this._isSceneInitialized) {\n          const moveFrame = timePassed !== 0 || this._moveOnce;\n          this._moveOnce = false;\n\n          const nowAutoSize = this._now();\n\n          if (this._output.canvas[0].width) {\n            for (let index = 0; index < this._canvasCount; index++) {\n              const ctx = this._output.context[index];\n              this.normContext(ctx);\n              this._scene.initSprites(index);\n              //this.normContext(ctx);\n            }\n          }\n\n          const drawFrame = this._scene.isDrawFrame(timePassed);\n          if (Array.isArray(drawFrame)) {\n            for (let i = 0; i < this._canvasCount; i++) {\n              this._drawFrame[i] = Math.max(\n                this._drawFrame[i],\n                drawFrame[i],\n                detectFrame\n              );\n            }\n          } else {\n            for (let i = 0; i < this._canvasCount; i++) {\n              this._drawFrame[i] = Math.max(\n                this._drawFrame[i],\n                drawFrame,\n                detectFrame\n              );\n            }\n          }\n\n          if (moveFrame) {\n            this._scene.move(timePassed);\n          }\n\n          if (this._output.canvas[0].width) {\n            for (let index = 0; index < this._canvasCount; index++) {\n              if (this._drawFrame[index]) {\n                this._scene.draw(index);\n              }\n            }\n          }\n\n          if (this._autoSize && this._autoSize.enabled) {\n            const deltaTimestamp = timestamp - this._realLastTimestamp;\n\n            if (this._autoSize.currentWaitedTime < this._autoSize.waitTime) {\n              this._autoSize.currentWaitedTime += deltaTimestamp;\n            } else if (moveFrame) {\n              const targetTime =\n                this._autoSize.offsetTimeTarget *\n                (this._reduceFramerate ? 2 : 1);\n              const deltaFrame = this._now() - nowAutoSize;\n              const delta =\n                (Math.abs(deltaTimestamp - targetTime) >\n                Math.abs(deltaFrame - targetTime)\n                  ? deltaTimestamp\n                  : deltaFrame) - targetTime;\n              if (Math.abs(delta) <= this._autoSize.offsetTimeDelta) {\n                this._autoSize.currentOffsetTime =\n                  this._autoSize.currentOffsetTime >= 0\n                    ? Math.max(\n                        0,\n                        this._autoSize.currentOffsetTime -\n                          this._autoSize.offsetTimeDelta\n                      )\n                    : Math.min(\n                        0,\n                        this._autoSize.currentOffsetTime +\n                          this._autoSize.offsetTimeDelta\n                      );\n              } else {\n                if (\n                  delta < 0 &&\n                  this._autoSize.currentScale > this._autoSize.scaleLimitMin\n                ) {\n                  this._autoSize.currentOffsetTime += delta;\n                  if (\n                    this._autoSize.currentOffsetTime <=\n                    -this._autoSize.offsetTimeLimitDown\n                  ) {\n                    this._autoSize.currentScale = Math.max(\n                      this._autoSize.scaleLimitMin,\n                      this._autoSize.currentScale / this._autoSize.scaleFactor\n                    );\n                    this._recalculateCanvasIntend = true;\n                  }\n                } else if (\n                  delta > 0 &&\n                  this._autoSize.currentScale < this._autoSize.scaleLimitMax\n                ) {\n                  this._autoSize.currentOffsetTime += delta;\n                  if (\n                    this._autoSize.currentOffsetTime >=\n                    this._autoSize.offsetTimeLimitUp\n                  ) {\n                    this._autoSize.currentScale = Math.min(\n                      this._autoSize.scaleLimitMax,\n                      this._autoSize.currentScale * this._autoSize.scaleFactor\n                    );\n                    this._recalculateCanvasIntend = true;\n                  }\n                }\n              }\n            }\n          }\n        } else {\n          for (let i = 0; i < this._canvasCount; i++) {\n            this.normContext(this._output.context[i]);\n          }\n          this._isSceneInitialized = this._scene.callLoading({\n            timePassed: timestamp - this._realLastTimestamp,\n            totalTimePassed: timestamp - this._initializedStartTime\n          });\n          if (this._isSceneInitialized) {\n            this._scene.reset();\n            this._lastTimestamp = this._scene.currentTime();\n            this._moveOnce = true;\n            if (this._autoSize) {\n              this._autoSize.currentWaitedTime = 0;\n            }\n          }\n        }\n      }\n    }\n    this._realLastTimestamp = timestamp;\n  }\n\n  async run(runParameter) {\n    this._runParameter = runParameter || {};\n\n    await this.stop();\n\n    this._realLastTimestamp = this._initializedStartTime = false;\n\n    if (this._autoSize && !this._autoSize.offsetTimeTarget) {\n      await this.recalculateFPS();\n    }\n\n    // First call ever\n    this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n      this._mainLoop.bind(this)\n    );\n\n    return this;\n  }\n\n  async stop() {\n    window.cancelAnimationFrame(this._referenceRequestAnimationFrame);\n    this._referenceRequestAnimationFrame = null;\n    this._scene && (await this._scene.destroy());\n  }\n\n  async destroy() {\n    await this.stop();\n    this._events.forEach(v => {\n      v.n.removeEventListener(v.e, v.f);\n    });\n    this._events = [];\n\n    return this;\n  }\n}\n\nexport default Engine;\n","class ImageManager {\n  constructor() {\n    this.Images = {};\n    this.count = 0;\n    this.loaded = 0;\n  }\n\n  static add(Images, Callbacks) {\n    const self = this || ImageManager;\n    for (const i in Images) {\n      if (!self.Images[i]) {\n        self.Images[i] = new window.Image();\n        self.Images[i].onload = function() {\n          self.loaded++;\n          if (Callbacks && typeof Callbacks === \"function\") {\n            if (self.isLoaded()) {\n              Callbacks();\n            }\n          } else if (Callbacks && typeof Callbacks[i] === \"function\") {\n            Callbacks[i](i, self.Images[i]);\n          }\n          if (self.resolve && self.isLoaded()) {\n            self.resolve();\n            self.resolve = null;\n          }\n        };\n        // crossOrigin makes more trouble in the browser and seems to cause slow downs\n        // self.Images[i].crossOrigin = \"anonymous\";\n        if (Images[i].substr(0, 4) === \"<svg\") {\n          const DOMURL = window.URL || window.webkitURL || window;\n          const svg = new window.Blob([Images[i]], { type: \"image/svg+xml\" });\n          self.Images[i].src = DOMURL.createObjectURL(svg);\n        } else {\n          if (/^(https?:)?\\/\\//.test(Images[i])) {\n            self.Images[i].onerror = () => {\n              // load again without crossOrigin\n              const img = new window.Image();\n              img.onload = self.Images[i].onload;\n              self.Images[i] = img;\n              self.Images[i].src = Images[i];\n            };\n            self.Images[i].crossOrigin = \"anonymous\";\n          }\n          self.Images[i].src = Images[i];\n        }\n        self.count++;\n      } else {\n        if (Callbacks && typeof Callbacks[i] === \"function\") {\n          Callbacks[i](i, self.Images[i]);\n        }\n      }\n    }\n    if (Callbacks && typeof Callbacks === \"function\" && self.isLoaded()) {\n      Callbacks();\n    }\n    if (self.resolve && self.isLoaded()) {\n      self.resolve();\n      self.resolve = null;\n    }\n    return self;\n  }\n\n  static reset() {\n    const self = this || ImageManager;\n    self.Images = {};\n    self.count = 0;\n    self.loaded = 0;\n    return self;\n  }\n\n  static getLoaded() {\n    return (this || ImageManager).loaded;\n  }\n\n  static getCount() {\n    return (this || ImageManager).count;\n  }\n\n  static isLoaded() {\n    const self = this || ImageManager;\n    return self.loaded === self.count;\n  }\n\n  static getImage(nameOrImage) {\n    return typeof nameOrImage === \"object\"\n      ? nameOrImage\n      : (this || ImageManager).Images[nameOrImage];\n  }\n\n  static isLoadedPromise() {\n    const self = this || ImageManager;\n    return self.isLoaded()\n      ? true\n      : new Promise((resolve, reject) => {\n          self.resolve = resolve;\n        });\n  }\n}\n\nImageManager.Images = {};\nImageManager.count = 0;\nImageManager.loaded = 0;\n\nexport default ImageManager;\n","class Layer {\n  constructor(canvasIds) {\n    this._layer = [];\n    this._isFunction = [];\n    this._start = 0;\n    this._nextFree = 0;\n    this._canvasIds =\n      canvasIds === undefined\n        ? []\n        : Array.isArray(canvasIds)\n        ? canvasIds\n        : [canvasIds];\n  }\n\n  addElement(element) {\n    this.addElementForId(element);\n    return element;\n  }\n\n  addElements(arrayOfElements) {\n    this.addElementsForIds(arrayOfElements);\n    return arrayOfElements;\n  }\n\n  addElementForId(element) {\n    let len = this._layer.length;\n    let id = this._nextFree;\n    this._layer[id] = element;\n    this._isFunction[id] = typeof element === \"function\";\n    if (len === id) {\n      len++;\n    }\n    let nextFree = this._nextFree + 1;\n    while (nextFree !== len && this._layer[nextFree]) {\n      nextFree++;\n    }\n    this._nextFree = nextFree;\n    if (this._start > id) {\n      this._start = id;\n    }\n    return id;\n  }\n\n  addElementsForIds(arrayOfElements) {\n    let len = this._layer.length;\n    let id = this._nextFree;\n    if (len === id) {\n      this._layer = this._layer.concat(arrayOfElements);\n      this._nextFree = this._layer.length;\n      arrayOfElements.forEach((v, k) => {\n        this._isFunction[len + k] = typeof v === \"function\";\n      });\n      return Array.from({ length: arrayOfElements.length }, (v, k) => k + len);\n    } else {\n      return arrayOfElements.map(element => this.addElement(element));\n    }\n  }\n\n  getById(elementId) {\n    return this._layer[elementId];\n  }\n\n  getIdByElement(element) {\n    return this._layer.indexOf(element);\n  }\n\n  deleteByElement(element) {\n    const elementId = this.getIdByElement(element);\n    if (elementId >= 0) {\n      this.deleteById(elementId);\n    }\n  }\n\n  deleteById(elementId) {\n    let len = this._layer.length - 1;\n    if (len > 0 && elementId === len) {\n      this._layer[elementId] = null;\n      while (len && !this._layer[len - 1]) {\n        len--;\n      }\n      this._layer.length = len;\n      this._isFunction.length = len;\n      this._nextFree = Math.min(this._nextFree, len);\n      this._start = Math.min(this._start, len);\n    } else if (this._layer[elementId]) {\n      this._layer[elementId] = null;\n      this._nextFree = Math.min(this._nextFree, elementId);\n      if (this._start === elementId) {\n        this._start = elementId + 1;\n      }\n    }\n  }\n\n  isCanvasId(canvasId) {\n    return (\n      canvasId === undefined ||\n      !this._canvasIds.length ||\n      this._canvasIds.includes(canvasId)\n    );\n  }\n\n  forEach(callback, layerId = 0) {\n    let index, element;\n    const l = this._layer.length;\n    for (index = this._start; index < l; index++) {\n      element = this._layer[index];\n      if (element) {\n        if (callback({\n          elementId: index,\n          layerId,\n          element,\n          isFunction: this._isFunction[index],\n          layer: this\n        }) === false) {\n          return\n        }\n      }\n    }\n  }\n\n  getElementsByTag (tag) {\n    let result = []\n    this.forEach(({element, isFunction}) => {\n      if (!isFunction) {\n        const ans = element.getElementsByTag(tag)\n        if (ans) {\n          result = result.concat(ans)\n        }\n      }\n    })\n    return result\n  }\n  \n  play(label = \"\", timelapsed = 0) {\n    this.forEach(\n      ({ element, isFunction }) =>\n        !isFunction && element.play(label, timelapsed)\n    );\n  }\n\n  count() {\n    let count = 0;\n    const l = this._layer.length;\n    for (let index = this._start; index < l; index++) {\n      if (this._layer[index]) count++;\n    }\n    return count;\n  }\n\n  clear() {\n    this._layer = [];\n    this._isFunction = [];\n    this._start = 0;\n    this._nextFree = 0;\n  }\n}\n\nexport default Layer;\n","import Layer from \"./Layer.mjs\";\n\nclass LayerManager {\n  constructor() {\n    this._layers = [];\n  }\n\n  addLayer(canvasIds) {\n    this._layers[this._layers.length] = new Layer(canvasIds);\n    return this._layers[this._layers.length - 1];\n  }\n\n  addLayers(numberOfLayer = 1, canvasIds) {\n    let newLayers = Array.from({ length: numberOfLayer }, v => new Layer(canvasIds));\n    this._layers = this._layers.concat(newLayers);\n    return newLayers;\n  }\n\n  addLayerForId(canvasIds) {\n    this._layers[this._layers.length] = new Layer(canvasIds);\n    return this._layers.length - 1;\n  }\n\n  addLayersForIds(numberOfLayer = 1, canvasIds) {\n    const result = Array.from(\n      { length: numberOfLayer },\n      (v, k) => k + this._layers.length\n    );\n    this._layers = this._layers.concat(\n      Array.from({ length: numberOfLayer }, v => new Layer(canvasIds))\n    );\n    return result;\n  }\n\n  getById(layerId) {\n    return this._layers[layerId];\n  }\n\n  forEach(callback, canvasId) {\n    let i;\n    const l = this._layers.length;\n    for (i = 0; i < l; i++) {\n      if (this._layers[i].isCanvasId(canvasId)) {\n        if (this._layers[i].forEach(callback, i) === false) {\n          break;\n        }\n      }\n    }\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.forEach(\n      ({ element, isFunction }) =>\n        !isFunction && element.play(label, timelapsed)\n    );\n  }\n\n  getElementsByTag (tag) {\n    let result = []\n    this.forEach(({element, isFunction}) => {\n      if (!isFunction) {\n        const ans = element.getElementsByTag(tag)\n        if (ans) {\n          result = result.concat(ans)\n        }\n      }\n    })\n    return result\n  }\n\n  count() {\n    return this._layers.length;\n  }\n\n  clear() {\n    this._layers = [];\n  }\n}\n\nexport default LayerManager;","export default function ifNull(value, alternative)\t{\n\treturn (value === undefined || value === null || value === \"\" ? alternative : value);\n}","import calc from \"../func/calc.mjs\";\r\nimport ifNull from \"../func/ifNull.mjs\";\r\n\r\nexport default class TimingDefault {\r\n  enabled = true;\r\n  type = \"timing\";\r\n\r\n  constructor(configuration = {}) {\r\n    this._configuration = configuration;\r\n    this._tickChunk = ifNull(calc(this._configuration.tickChunk), 100 / 6);\r\n    this._maxSkippedTickChunk = ifNull(\r\n      calc(this._configuration.maxSkippedTickChunk),\r\n      120\r\n    );\r\n    this._tickChunkTolerance = ifNull(\r\n      calc(this._configuration.tickChunkTolerance),\r\n      0.1\r\n    );\r\n\r\n    this.totalTimePassed = 0;\r\n  }\r\n\r\n  init() {}\r\n\r\n  currentTime() {\r\n    return window.performance ? performance.now() : Date.now();\r\n  }\r\n\r\n  clampTime({ timePassed }) {\r\n    const maxTime = this._tickChunk\r\n      ? this._tickChunk * this._maxSkippedTickChunk\r\n      : 2000;\r\n    if (timePassed > maxTime) {\r\n      return maxTime;\r\n    }\r\n    return timePassed;\r\n  }\r\n\r\n  shiftTime({ timePassed }) {\r\n    return this._tickChunk ? -(timePassed % this._tickChunk) : 0;\r\n  }\r\n\r\n  get tickChunk() {\r\n    return this._tickChunk;\r\n  }\r\n\r\n  isChunked() {\r\n    return this._tickChunk;\r\n  }\r\n\r\n  hasOneChunkedFrame({ timePassed }) {\r\n    return timePassed >= this._tickChunk - this._tickChunkTolerance;\r\n  }\r\n\r\n  calcFrames({ timePassed }) {\r\n    return Math.min(\r\n      this._maxSkippedTickChunk,\r\n      Math.floor((timePassed + this._tickChunkTolerance) / this._tickChunk)\r\n    );\r\n  }\r\n}\r\n","import ImageManager from \"./ImageManager.mjs\";\nimport LayerManager from \"./LayerManager.mjs\";\nimport calc from \"./func/calc.mjs\";\nimport toArray from \"./func/toArray.mjs\";\nimport TimingDefault from \"./Middleware/TimingDefault.mjs\";\n\nclass Scene {\n  constructor(...configurationClassOrObjects) {\n    // Layer consists of Sprites\n    this._layerManager = new LayerManager();\n    this._totalTimePassed = 0;\n    //this._transform = null;\n    //this._transformInvert = null;\n    //this._engine = null;\n    //this._initDone = false;\n    //this._additionalModifier = undefined;\n    this._imageManager = ImageManager;\n    //this._resetIntend = false;\n    //this._endTime = undefined;\n\n    this.middlewares = configurationClassOrObjects;\n    if (!this.middlewareByType(\"timing\")) {\n      this.middleware = [TimingDefault, ...this.middlewares];\n    }\n  }\n\n  set middlewares(middlewares) {\n    this._middleware = toArray(middlewares)\n      .map(configurationClassOrObject =>\n        typeof configurationClassOrObject === \"function\"\n          ? new configurationClassOrObject()\n          : configurationClassOrObject\n      )\n      .reduce(\n        (middlewareCommandList, c) => {\n          for (command of Object.keys(middlewareCommandList)) {\n            if (command in c) {\n              middlewareCommandList[command].push(c);\n            }\n          }\n          middlewareCommandList._all.push(c);\n          if (c.type === \"camera\") middlewareCommandList._camera = c;\n          if (c.type === \"timing\") middlewareCommandList._timing = c;\n          return middlewareCommandList;\n        },\n        {\n          init: [],\n          events: [],\n          isDrawFrame: [],\n          initSprites: [],\n          fixedUpdate: [],\n          update: [],\n          draw: [],\n          destroy: [],\n          reset: [],\n          resize: [],\n          currentTime: [],\n          clampTime: [],\n          shiftTime: [],\n          isChunked: [],\n          hasOneChunkedFrame: [],\n          calcFrames: [],\n          tickChunk: [],\n          additionalModifier: []\n        }\n      );\n  }\n  get middlewares() {\n    return this._middleware._all;\n  }\n\n  middlewareByType(type) {\n    const objs = this._middleware._all.filter(c => c.type == type);\n    if (objs.length) {\n      return objs[objs.length - 1];\n    }\n  }\n\n  has(command) {\n    return (\n      command in this._middleware ||\n      this._middleware._all.filter(c => command in c).length > 0\n    );\n  }\n\n  do(command, params, defaultValue, func) {\n    let objs =\n      this._middleware[command] ||\n      this._middleware._all.filter(c => command in c);\n    objs = objs.filter(v => v.enabled);\n    if (!objs.length) {\n      return defaultValue;\n    }\n    const fullParams = this._param(params);\n    return func(objs, fullParams, defaultValue);\n  }\n\n  map(command, params = {}) {\n    return this.do(command, params, [], (objs, fullParams) =>\n      objs.map(c => c[command](fullParams))\n    );\n  }\n\n  pipe(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        res = c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeBack(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let i = objs.length - 1; i >= 0; i--) {\n        const c = objs[i];\n        res = c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeMax(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        let newRes = c[command](fullParams, res);\n        if (Array.isArray(newRes)) {\n          if (Array.isArray(res)) {\n            res = res.map((v, i) => Math.max(v, newRes[i]));\n          } else {\n            res = newRes.map(v => Math.max(v, res));\n          }\n        } else {\n          if (Array.isArray(res)) {\n            res = res.map((v, i) => Math.max(v, newRes));\n          } else {\n            res = Math.max(newRes, res);\n          }\n        }\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeAsync(command, params = {}, pipe) {\n    return this.do(command, params, pipe, async (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        res = await c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  value(command, params = {}) {\n    let objs =\n      this._middleware[command] ||\n      this._middleware._all.filter(c => command in c);\n    objs.filter(v => v.enabled);\n    if (!objs.length) {\n      return undefined;\n    }\n    const obj = objs[objs.length - 1];\n    return calc(obj[command], obj, this._param(params));\n  }\n\n  stopPropagation() {\n    this._stopPropagation = true;\n  }\n\n  currentTime() {\n    return this.pipe(\"currentTime\");\n  }\n\n  clampTime(timePassed) {\n    return this.pipe(\"clampTime\", { timePassed });\n  }\n\n  shiftTime(timePassed) {\n    return this.pipe(\"shiftTime\", { timePassed });\n  }\n\n  cacheClear() {\n    this._transform = 0;\n    this._transformInvert = 0;\n  }\n\n  viewport() {\n    if (!this._engine) return new Transform();\n\n    if (!this._transform) {\n      this._transform = this.pipe(\"viewport\", {}, new Transform());\n      this._transformInvert = null;\n    }\n    return this._transform;\n  }\n\n  transformPoint(x, y, scale = this._additionalModifier.scaleCanvas) {\n    if (!this._transformInvert) {\n      this._transformInvert = this.viewport()\n        .clone()\n        .invert();\n    }\n    return this._transformInvert.transformPoint(x * scale, y * scale);\n  }\n\n  callInit(parameter, engine) {\n    this._engine = engine;\n    this.resize();\n    const images = calc(this._configuration.images);\n    if (images) {\n      this._imageManager.add(images);\n    }\n    Promise.all(\n      this.map(\"init\", {\n        parameter\n      })\n    ).then(res => (this._initDone = true));\n  }\n\n  get additionalModifier() {\n    return this._additionalModifier;\n  }\n\n  updateAdditionalModifier() {\n    this._additionalModifier = this.pipe(\n      \"additionalModifier\",\n      {},\n      {\n        alpha: 1,\n        x: 0,\n        y: 0,\n        width: output.width,\n        height: output.height,\n        widthInPixel: output.width,\n        heightInPixel: output.height,\n        scaleCanvas: 1,\n        visibleScreen: {\n          x: 0,\n          y: 0,\n          width: output.width,\n          height: output.height\n        },\n        fullScreen: {\n          x: 0,\n          y: 0,\n          width: output.width,\n          height: output.height\n        }\n      }\n    );\n  }\n\n  resize() {\n    const output = this._engine.getOutput();\n    this.updateAdditionalModifier();\n    this.pipe(\"resize\");\n    this._layerManager.forEach(({ element, isFunction }) => {\n      if (!isFunction) {\n        element.resize(output, this._additionalModifier);\n      }\n    });\n  }\n\n  async destroy() {\n    this._destroyEvents();\n    const parameter = await this.pipeAsync(\"destroy\");\n    this._initDone = false;\n    return parameter;\n  }\n\n  get timing() {\n    return this.middleware._timing;\n  }\n\n  get camera() {\n    return this.middleware._camera;\n  }\n\n  get totalTimePassed() {\n    return this._totalTimePassed;\n  }\n\n  _param(additionalParameter) {\n    return {\n      engine: this._engine,\n      scene: this,\n      imageManager: this._imageManager,\n      layerManager: this._layerManager,\n      totalTimePassed: this._totalTimePassed,\n      output: this._engine && this._engine.getOutput(),\n      ...additionalParameter\n    };\n  }\n\n  callLoading(args) {\n    if (this._imageManager.isLoaded() && this._initDone) {\n      this._endTime = this.value(\"endTime\");\n      args.progress = \"Click to play\";\n      this.value(\"loading\", {\n        args\n      });\n      return true;\n    }\n    args.progress = this._imageManager.getCount()\n      ? this._imageManager.getLoaded() / this._imageManager.getCount()\n      : \"Loading...\";\n\n    this.value(\"loading\", {\n      args\n    });\n    return false;\n  }\n\n  fixedUpdate(timePassed, lastCall) {\n    this.map(\"fixedUpdate\", {\n      timePassed,\n      lastCall\n    });\n  }\n\n  isDrawFrame(timePassed) {\n    return this.pipeMax(\"isDrawFrame\", { timePassed }, timePassed !== 0);\n  }\n\n  move(timePassed) {\n    // calc total time\n    this._totalTimePassed += timePassed;\n\n    if (this._resetIntend) {\n      this.reset();\n      // Jump back?\n    } else if (timePassed < 0) {\n      // Back to the beginning\n      timePassed = this._totalTimePassed;\n      this.reset();\n      this._totalTimePassed = timePassed;\n    } else if (this._endTime && this._endTime <= this._totalTimePassed) {\n      // set timepassed to match endtime\n      timePassed -= this._totalTimePassed - this._endTime;\n      this._totalTimePassed = this._endTime;\n      // End Engine\n      this.map(\"end\", { timePassed });\n    }\n    if (this.value(\"isChunked\")) {\n      if (this.value(\"hasOneChunkedFrame\", { timePassed })) {\n        // how many frames should be skipped. Maximum is a skip of 2 frames\n        const frames = this.value.calcFrames(timePassed) - 1;\n        for (let calcFrame = 0; calcFrame <= frames; calcFrame++) {\n          this.fixedUpdate(this.value(\"tickChunk\"), calcFrame === frames);\n        }\n      }\n    } else {\n      this.fixedUpdate(timePassed, true);\n    }\n\n    this.map(\"update\", { timePassed });\n\n    this._layerManager.forEach(({ element, isFunction, layer, elementId }) => {\n      if (!isFunction) {\n        if (element.animate(timePassed)) {\n          layer.deleteById(elementId);\n        }\n      }\n    });\n  }\n\n  draw(canvasId) {\n    this.map(\"draw\", { canvasId });\n    const context = this._engine.getOutput().context[canvasId];\n    context.save();\n\n    context.setTransform(...this.viewport().m);\n\n    this._layerManager.forEach(\n      ({ layer, layerId, element, isFunction, elementId }) => {\n        if (isFunction) {\n          if (\n            element(\n              this._param({\n                layerId,\n                elementId,\n                layer,\n                context\n              })\n            )\n          ) {\n            layer.deleteById(elementId);\n          }\n        } else {\n          element.draw(context, this._additionalModifier);\n        }\n      },\n      canvasId\n    );\n\n    context.restore();\n  }\n\n  initSprites(canvasId) {\n    const context = this._engine.getOutput().context[canvasId];\n    this._layerManager.forEach(({ element, isFunction }) => {\n      if (!isFunction) {\n        element.callInit(context, this._additionalModifier);\n      }\n    }, canvasId);\n    this._callMiddleware(\"initSprites\", { canvasId });\n  }\n\n  resetIntend() {\n    this._resetIntend = true;\n  }\n\n  reset() {\n    this._totalTimePassed = 0;\n    this._resetIntend = false;\n    let result = this.pipe(\n      \"reset\",\n      {\n        engine: this._engine,\n        scene: this,\n        layerManager: this._layerManager,\n        imageManager: this._imageManager\n      },\n      new LayerManager()\n    );\n\n    if (Array.isArray(result)) {\n      const layers = result;\n      result = new LayerManager();\n      layers.forEach(v => {\n        result.addLayer().addElements(v);\n      });\n    }\n\n    if (result) {\n      this._layerManager = result;\n    }\n  }\n}\n\nexport default Scene;\n","import calc from \"../func/calc.mjs\";\n\nexport default class Wait {\n  constructor(duration) {\n    this.duration = calc(duration) - 0;\n  }\n\n  run(sprite, time) {\n    // return time left\n    return time - this.duration;\n  }\n}\n","import Wait from \"./Wait.mjs\";\n\nclass Sequence {\n  constructor(...sequences) {\n    let timeWait = 0;\n    if (typeof sequences[0] === \"number\") {\n      timeWait = sequences.shift();\n    }\n    \n    // init position-array\n    this.sequences = sequences.map(sequence => {\n      if (!Array.isArray(sequence)) {\n        sequence = [sequence];\n      }\n      let thisTimeWait = timeWait;\n      if (typeof sequence[0] === \"number\") {\n        thisTimeWait = sequence.shift();\n      }\n\n      return {\n        position: 0,\n        timelapsed: -thisTimeWait,\n        sequence: sequence\n          .map(command =>\n            typeof command.run !== \"function\"\n              ? typeof command === \"number\"\n                ? new Wait(command)\n                : { run: command }\n              : command\n          )\n          .filter(command => typeof command.run === \"function\"),\n        label: sequence.reduce((arr, command, index) => {\n          if (typeof command === \"string\") {\n            arr[command] = index - Object.keys(arr).length;\n          }\n          return arr;\n        }, {}),\n        enabled: true\n      };\n    });\n    // init time\n    this.lastTimestamp = 0;\n    this.enabled = true;\n  }\n\n  reset(timelapsed = 0) {\n    this.sequences.forEach(sequencePosition => {\n      sequencePosition.enabled = true;\n      sequencePosition.position = 0;\n      sequencePosition.timelapsed = timelapsed;\n      sequencePosition.sequence[0] &&\n        sequencePosition.sequence[0].reset &&\n        sequencePosition.sequence[0].reset(timelapsed);\n    });\n    this.enabled = true;\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (label) {\n      const b = this.sequences.reduce((b, sequencePosition) => {\n        if (sequencePosition.label.hasOwnProperty(label)) {\n          b = true;\n          sequencePosition.position = sequencePosition.label[label];\n          sequencePosition.enabled = true;\n          sequencePosition.timelapsed = timelapsed;\n          sequencePosition.sequence[sequencePosition.position] &&\n            sequencePosition.sequence[sequencePosition.position].reset &&\n            sequencePosition.sequence[sequencePosition.position].reset();\n        } else {\n          b |=\n            sequencePosition.sequence.find(seq => {\n              return seq.play && seq.play(label, timelapsed);\n            }) >= 0;\n        }\n        return b;\n      }, false);\n      if (b) {\n        this.enabled = true;\n      }\n      return b;\n    } else {\n      this.sequences.forEach(\n        sequencePosition => (sequencePosition.enabled = true)\n      );\n      this.enabled = true;\n      return true;\n    }\n  }\n\n  runSequence(sprite, sequencePosition, timePassed) {\n    let timeLeft = timePassed;\n    while (\n      sequencePosition.sequence[sequencePosition.position] &&\n      timeLeft >= 0\n    ) {\n      sequencePosition.timelapsed += timeLeft;\n      if (sequencePosition.timelapsed < 0) {\n        return -1;\n      }\n\n      timeLeft = sequencePosition.sequence[sequencePosition.position].run(\n        sprite,\n        sequencePosition.timelapsed\n      );\n\n      if (timeLeft === true) {\n        timeLeft = 0;\n      } else if (timeLeft === false) {\n        return -1;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_FORCE_DISABLE) {\n        sequencePosition.enabled = false;\n        this.enabled = false;\n        return timePassed;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_STOP) {\n        sequencePosition.enabled = false;\n        return timePassed;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_REMOVE) {\n        return true;\n      }\n\n      if (timeLeft >= 0) {\n        // next animation\n        sequencePosition.position =\n          (sequencePosition.position + 1) % sequencePosition.sequence.length;\n        sequencePosition.sequence[sequencePosition.position] &&\n          sequencePosition.sequence[sequencePosition.position].reset &&\n          sequencePosition.sequence[sequencePosition.position].reset();\n        sequencePosition.timelapsed = 0;\n\n        // loop animation?\n        if (sequencePosition.position === 0) {\n          sequencePosition.enabled = false;\n          return timeLeft;\n        }\n      }\n    }\n    return timeLeft;\n  }\n\n  // call other animations\n  run(sprite, time, is_difference) {\n    // Calculate timedifference\n    let timePassed = time;\n    if (!is_difference) {\n      timePassed = time - this.lastTimestamp;\n      this.lastTimestamp = time;\n    }\n    if (!this.enabled) {\n      return timePassed;\n    }\n    const length = this.sequences.length;\n    let disableVote = 0;\n    let restTime = Infinity;\n    for (let i = 0; i < length; i++) {\n      if (this.sequences[i].enabled) {\n        const timeLeft = this.runSequence(\n          sprite,\n          this.sequences[i],\n          timePassed\n        );\n        if (timeLeft === true) {\n          return true;\n        }\n        restTime = Math.min(restTime, timeLeft);\n      } else {\n        disableVote++;\n      }\n    }\n    if (disableVote === length) {\n      this.enabled = false;\n      return timePassed;\n    }\n    return restTime;\n  }\n}\n\nSequence._TIMELAPSE_TO_FORCE_DISABLE = \"F\";\nSequence._TIMELAPSE_TO_STOP = \"S\";\nSequence._TIMELAPSE_TO_REMOVE = \"R\";\nexport default Sequence;\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Sequence from \"../Animations/Sequence.mjs\";\n\nconst degToRad = 0.017453292519943295; //Math.PI / 180;\n\n// Sprite\n// Draw a Circle\nexport default class Circle {\n  constructor(givenParameter) {\n    this._parseParameterList(this, this._getParameterList(), givenParameter);\n    this._needInit = true;\n  }\n\n  _parseParameterList(obj, parameterList, givenParameter) {\n    Object.keys(parameterList).forEach(name => {\n      const d = parameterList[name];\n      obj[name] =\n        typeof d === \"function\"\n          ? d(givenParameter[name], givenParameter, obj)\n          : ifNull(calc(givenParameter[name]), d);\n    });\n  }\n\n  _getBaseParameterList() {\n    return {\n      // animation\n      animation: (value, givenParameter) => {\n        let result = calc(value);\n        return Array.isArray(result) ? new Sequence(result) : result;\n      },\n      // if it's rendering or not\n      enabled: true,\n      // if you can click it or not\n      isClickable: false,\n      // tags to mark the sprites\n      tag: value => {\n        return Array.isArray(value) ? value : value ? [value] : [];\n      }\n    };\n  }\n\n  _getParameterList() {\n    return Object.assign({}, this._getBaseParameterList(), {\n      // position\n      x: 0,\n      y: 0,\n      // rotation\n      rotation: (value, givenParameter) => {\n        return ifNull(\n          calc(value),\n          ifNull(\n            calc(givenParameter.rotationInRadian),\n            ifNull(calc(givenParameter.rotationInDegree), 0) * degToRad\n          )\n        );\n      },\n      // scalling\n      scaleX: (value, givenParameter) => {\n        return ifNull(calc(value), ifNull(calc(givenParameter.scale), 1));\n      },\n      scaleY: (value, givenParameter) => {\n        return ifNull(calc(value), ifNull(calc(givenParameter.scale), 1));\n      },\n      // alpha\n      alpha: 1,\n      // blending\n      compositeOperation: \"source-over\",\n      // color\n      color: \"#fff\"\n    });\n  }\n\n  getElementsByTag(tag) {\n    if (typeof tag === \"function\") {\n      if (this.tag.filter(tag).length) {\n        return [this];\n      }\n    } else {\n      const aTag = Array.isArray(tag) ? tag : [tag];\n      if (aTag.filter(tag => this.tag.includes(tag)).length) {\n        return [this];\n      }\n    }\n    return [];\n  }\n\n  // Animation-Funktion\n  animate(timepassed) {\n    if (this.animation) {\n      // run animation\n      if (this.animation.run(this, timepassed, true) === true) {\n        // disable\n        this.enabled = false;\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (this.animation) {\n      this.animation.play && this.animation.play(label, timelapsed);\n    }\n  }\n\n  init(context, additionalModifier) {}\n\n  callInit(context, additionalModifier) {\n    if (this._needInit) {\n      this.init(context, additionalModifier);\n      this._needInit = false;\n    }\n  }\n\n  resize(output, additionalModifier) {}\n\n  _detectHelper(context, x, y, moveToCenter, callback) {\n    let a = false;\n    if (this.enabled && this.isClickable) {\n      const hw = this.width / 2;\n      const hh = this.height / 2;\n      context.save();\n      if (moveToCenter) {\n        context.translate(this.x + hw, this.y + hh);\n      } else {\n        context.translate(this.x, this.y);\n      }\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.beginPath();\n      if (callback) {\n        a = callback(hw, hh);\n      } else {\n        context.rect(-hw, -hh, this.width, this.height);\n        context.closePath();\n        a = context.isPointInPath(x, y);\n      }\n      context.restore();\n    }\n    return a ? this : false;\n  }\n\n  detectDraw(context, color) {}\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false, () => {\n      context.arc(\n        0,\n        0,\n        1,\n        Math.PI / 2 + this.rotation,\n        Math.PI * 2.5 - this.rotation,\n        false\n      );\n      return context.isPointInPath(x, y);\n    });\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.beginPath();\n      context.fillStyle = this.color;\n      context.arc(\n        0,\n        0,\n        1,\n        Math.PI / 2 + this.rotation,\n        Math.PI * 2.5 - this.rotation,\n        false\n      );\n      context.fill();\n      context.restore();\n    }\n  }\n}\n","import Circle from \"./Circle.mjs\";\n\nexport default class Callback extends Circle {\n  constructor(givenParameter) {\n    if (typeof givenParameter === \"function\") {\n      givenParameter = { callback: givenParameter };\n    }\n    super(givenParameter);\n\n    // set start value to count\n    this._timePassed = 0;\n    this._deltaTime = 0;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, this._getBaseParameterList(), {\n      callback: v => (typeof v === undefined ? () => {} : v)\n    });\n  }\n\n  animate(timePassed) {\n    if (this.enabled) {\n      this._timePassed += timePassed;\n      this._deltaTime += timePassed;\n    }\n    return super.animate(timePassed);\n  }\n\n  detect(context, color) {}\n\n  draw(context, additionalParameter) {\n    if (this.enabled) {\n      this.callback(context, this._timePassed, additionalParameter, this);\n    }\n    this._deltaTime = 0;\n  }\n}\n","import Circle from \"./Circle.mjs\";\n\nexport default class Group extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      sprite: []\n    });\n  }\n\n  getElementsByTag(tag) {\n    let result = super.getElementsByTag(tag);\n    for (const sprite of this.sprite) {\n      const ans = sprite.getElementsByTag(tag);\n      if (ans) {\n        result = result.concat(ans);\n      }\n    }\n    return result;\n  }\n\n  // overwrite change\n  animate(timepassed) {\n    // call super\n    let finished = super.animate(timepassed),\n      spriteFinished = false;\n    // animate all sprites\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        spriteFinished = spriteFinished || sprite.animate(timepassed) === true;\n      }\n    }\n\n    if (this.animation) {\n      return finished;\n    } else {\n      if (spriteFinished) {\n        this.enabled = false;\n      }\n      return spriteFinished;\n    }\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (this.animation) {\n      this.animation.play && this.animation.play(label, timelapsed);\n    }\n    for (const sprite of this.sprite) {\n      sprite.play && sprite.play(label, timelapsed);\n    }\n  }\n\n  resize(output, additionalModifier) {\n    for (const sprite of this.sprite) {\n      sprite.resize(output, additionalModifier);\n    }\n  }\n\n  callInit(context, additionalModifier) {\n    super.callInit(context, additionalModifier);\n    for (let sprite of this.sprite) {\n      sprite.callInit(context, additionalModifier);\n    }\n  }\n\n  detectImage(context, color) {\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        sprite.detectImage(context, color);\n      }\n    }\n  }\n\n  detect(context, x, y) {\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        const a = sprite.detect(context, x, y);\n        if (a) return a;\n      }\n    }\n    return false;\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (this.alpha < 1) {\n        additionalModifier = Object.assign({}, additionalModifier);\n        additionalModifier.alpha *= this.alpha;\n      }\n\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      // draw all sprites\n      for (const sprite of this.sprite) {\n        sprite.draw(context, additionalModifier);\n      }\n      context.restore();\n    }\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport Group from \"./Group.mjs\";\n\nexport default class Canvas extends Group {\n  constructor(givenParameter) {\n    super(givenParameter);\n    this._currentGridSize = false;\n    this._drawFrame = 2;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // x,y,width,height without default to enable norm\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      canvasWidth: undefined,\n      canvasHeight: undefined,\n      gridSize: undefined,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        ),\n      isDrawFrame: (value, givenParameter, setParameter) => ifNull(value, true)\n    });\n  }\n\n  _generateTempCanvas(additionalModifier) {\n    const w = additionalModifier.widthInPixel;\n    const h = additionalModifier.heightInPixel;\n    this._temp_canvas = document.createElement(\"canvas\");\n    if (this.canvasWidth && this.canvasHeight) {\n      this._temp_canvas.width = this.canvasWidth;\n      this._temp_canvas.height = this.canvasHeight;\n    } else if (this.gridSize) {\n      this._currentGridSize = this.gridSize;\n      this._temp_canvas.width = Math.round(this._currentGridSize);\n      this._temp_canvas.height = Math.round(this._currentGridSize);\n    } else {\n      this._temp_canvas.width = Math.round(w / this.scaleX);\n      this._temp_canvas.height = Math.round(h / this.scaleY);\n    }\n    this._tctx = this._temp_canvas.getContext(\"2d\");\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n    }\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n  }\n\n  resize(output, additionalModifier) {\n    if (\n      this._temp_canvas &&\n      this._currentGridSize !== this.gridSize &&\n      !this.canvasWidth\n    ) {\n      const oldTempCanvas = this._temp_canvas;\n      this._generateTempCanvas(additionalModifier);\n      this._tctx.globalCompositeOperation = \"copy\";\n      this._tctx.drawImage(\n        oldTempCanvas,\n        0,\n        0,\n        oldTempCanvas.width,\n        oldTempCanvas.height,\n        0,\n        0,\n        this._temp_canvas.width,\n        this._temp_canvas.height\n      );\n      this._tctx.globalCompositeOperation = \"source-over\";\n      this._drawFrame = 2;\n    }\n    this.normalizeFullScreen(additionalModifier);\n    super.resize(output, additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  init(context, additionalModifier) {\n    this._generateTempCanvas(additionalModifier);\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (this.gridSize && this._currentGridSize !== this.gridSize) {\n        this.resize(additionalModifier);\n      }\n      this._drawFrame = Math.max(\n        this._drawFrame - 1,\n        calc(this.isDrawFrame, context, additionalModifier)\n      );\n      const w = this.width,\n        h = this.height,\n        wh = w / 2,\n        hh = h / 2,\n        tw = this._temp_canvas.width,\n        th = this._temp_canvas.height;\n\n      if (this._drawFrame) {\n        this._tctx.textBaseline = \"middle\";\n        this._tctx.textAlign = \"center\";\n        this._tctx.globalAlpha = 1;\n        this._tctx.globalCompositeOperation = \"source-over\";\n        this._tctx.save();\n        // draw all sprites\n        const cam = additionalModifier.cam;\n        if (this.norm && cam) {\n          const scale = Math.max(tw, th) / 2;\n          this._tctx.translate(tw / 2, th / 2);\n          this._tctx.scale(scale, scale);\n          this._tctx.scale(cam.zoom, cam.zoom);\n          this._tctx.translate(-cam.x, -cam.y);\n        }\n        for (const sprite of this.sprite) {\n          sprite.draw(\n            this._tctx,\n            this.norm\n              ? Object.assign({}, additionalModifier, {\n                  alpha: 1,\n                  widthInPixel: tw,\n                  heightInPixel: th\n                })\n              : {\n                  alpha: 1,\n                  x: 0,\n                  y: 0,\n                  width: tw,\n                  height: th,\n                  widthInPixel: tw,\n                  heightInPixel: th,\n                  visibleScreen: {\n                    x: 0,\n                    y: 0,\n                    width: tw,\n                    height: th\n                  }\n                }\n          );\n        }\n        this._tctx.restore();\n      }\n\n      context.save();\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.translate(this.x + wh, this.y + hh);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.drawImage(this._temp_canvas, 0, 0, tw, th, -wh, -hh, w, h);\n      context.restore();\n    }\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Group from \"./Group.mjs\";\n\nexport default class Emitter extends Group {\n  constructor(givenParameter) {\n    super(givenParameter.self || {});\n\n    let count = ifNull(calc(givenParameter.count), 1);\n    this.sprite = [];\n    const classToEmit = givenParameter.class;\n\n    for (let i = 0; i < count; i++) {\n      let parameter = {};\n      for (let index in givenParameter) {\n        if (![\"self\", \"class\", \"count\"].includes(index)) {\n          if (typeof givenParameter[index] === \"function\") {\n            parameter[index] = givenParameter[index].call(givenParameter, i);\n          } else {\n            parameter[index] = givenParameter[index];\n          }\n        }\n      } \n      this.sprite[i] = new classToEmit(parameter);\n    }\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Circle from \"./Circle.mjs\";\n\nexport default class FastBlur extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n\n    this._currentGridSize = false;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // x,y,width,height without default to enable norm\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      gridSize: undefined,\n      darker: 0,\n      pixel: false,\n      clear: false,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        )\n    });\n  }\n\n  _generateTempCanvas(additionalModifier) {\n    const w = additionalModifier.widthInPixel;\n    const h = additionalModifier.heightInPixel;\n    this._temp_canvas = document.createElement(\"canvas\");\n    if (this.gridSize) {\n      this._currentGridSize = this.gridSize;\n      this._temp_canvas.width = Math.round(this._currentGridSize);\n      this._temp_canvas.height = Math.round(this._currentGridSize);\n    } else {\n      this._temp_canvas.width = Math.ceil(w / this.scaleX);\n      this._temp_canvas.height = Math.ceil(h / this.scaleY);\n    }\n    this._tctx = this._temp_canvas.getContext(\"2d\");\n    this._tctx.globalCompositeOperation = \"source-over\";\n    this._tctx.globalAlpha = 1;\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n    }\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n  }\n\n  resize(output, additionalModifier) {\n    if (this._temp_canvas && this._currentGridSize !== this.gridSize) {\n      const oldTempCanvas = this._temp_canvas;\n      this._generateTempCanvas(additionalModifier);\n      this._tctx.globalCompositeOperation = \"copy\";\n      this._tctx.drawImage(\n        oldTempCanvas,\n        0,\n        0,\n        oldTempCanvas.width,\n        oldTempCanvas.height,\n        0,\n        0,\n        this._temp_canvas.width,\n        this._temp_canvas.height\n      );\n      this._tctx.globalCompositeOperation = \"source-over\";\n    }\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  init(context, additionalModifier) {\n    this._generateTempCanvas(additionalModifier);\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled && this.alpha > 0) {\n      if (this.gridSize && this._currentGridSize !== this.gridSize) {\n        this.resize(context, additionalModifier);\n      }\n\n      const a = this.alpha * additionalModifier.alpha,\n        w = this.width,\n        h = this.height,\n        targetW = this._temp_canvas.width,\n        targetH = this._temp_canvas.height;\n\n      if (a > 0 && targetW && targetH) {\n        this._tctx.globalCompositeOperation = \"copy\";\n        this._tctx.globalAlpha = 1;\n        this._tctx.drawImage(\n          context.canvas,\n          0,\n          0,\n          context.canvas.width,\n          context.canvas.height,\n          0,\n          0,\n          targetW,\n          targetH\n        );\n\n        if (this.darker > 0) {\n          this._tctx.globalCompositeOperation = this.clear\n            ? \"source-atop\"\n            : \"source-over\"; // \"source-atop\"; source-atop works with transparent background but source-over is much faster\n          this._tctx.fillStyle = \"rgba(0,0,0,\" + this.darker + \")\";\n          this._tctx.fillRect(0, 0, targetW, targetH);\n        }\n\n        this.additionalBlur &&\n          this.additionalBlur(targetW, targetH, additionalModifier);\n\n        // optional: clear screen\n        if (this.clear) {\n          context.globalCompositeOperation = \"source-over\";\n          context.globalAlpha = 1;\n          context.clearRect(this.x, this.y, w, h);\n        }\n        context.globalCompositeOperation = this.compositeOperation;\n        context.globalAlpha = a;\n        const oldValue = context.imageSmoothingEnabled;\n        context.imageSmoothingEnabled = !this.pixel;\n        context.drawImage(\n          this._temp_canvas,\n          0,\n          0,\n          targetW,\n          targetH,\n          this.x,\n          this.y,\n          w,\n          h\n        );\n        context.imageSmoothingEnabled = oldValue;\n      }\n    } else {\n      // optional: clear screen\n      if (this.clear) {\n        if (!this.x) {\n          this.x = additionalModifier.x;\n        }\n        if (!this.y) {\n          this.y = additionalModifier.y;\n        }\n        if (!this.width) {\n          this.width = additionalModifier.width;\n        }\n        if (!this.height) {\n          this.height = additionalModifier.height;\n        }\n        context.clearRect(this.x, this.y, this.width, this.height);\n      }\n    }\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ImageManager from \"../ImageManager.mjs\";\nimport Circle from \"./Circle.mjs\";\n\n// Sprite\n// Draw a Image\nclass Image extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n    this._currentTint = false;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set image\n      image: v => ImageManager.getImage(calc(v)),\n      // relative position\n      position: Image.CENTER,\n      // cutting for sprite stripes\n      frameX: 0,\n      frameY: 0,\n      frameWidth: 0,\n      frameHeight: 0,\n      width: undefined,\n      height: undefined,\n      // autoscale to max\n      norm: false,\n      normCover: false,\n      normToScreen: false,\n      clickExact: false,\n      color: \"#FFF\",\n      tint: 0\n    });\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  init(context, additionalModifier) {\n    const frameWidth = this.frameWidth || this.image.width;\n    const frameHeight = this.frameHeight || this.image.height;\n\n    this._normScale = this.normToScreen\n      ? this.normCover\n        ? Math.max(\n            additionalModifier.fullScreen.width / frameWidth,\n            additionalModifier.fullScreen.height / frameHeight\n          )\n        : this.norm\n        ? Math.min(\n            additionalModifier.fullScreen.width / frameWidth,\n            additionalModifier.fullScreen.height / frameHeight\n          )\n        : 1\n      : this.normCover\n      ? Math.max(\n          additionalModifier.width / frameWidth,\n          additionalModifier.height / frameHeight\n        )\n      : this.norm\n      ? Math.min(\n          additionalModifier.width / frameWidth,\n          additionalModifier.height / frameHeight\n        )\n      : 1;\n  }\n\n  _tintCacheKey() {\n    const frameWidth = this.frameWidth || this.image.width;\n    const frameHeight = this.frameHeight || this.image.height;\n    return [\n      this.tint,\n      frameWidth,\n      frameHeight,\n      this.color,\n      this.frameX,\n      this.frameY\n    ].join(\";\");\n  }\n\n  _temp_context(frameWidth, frameHeight) {\n    if (!this._temp_canvas) {\n      this._temp_canvas = document.createElement(\"canvas\");\n      this._tctx = this._temp_canvas.getContext(\"2d\");\n    }\n    this._temp_canvas.width = frameWidth;\n    this._temp_canvas.height = frameHeight;\n    return this._tctx;\n  }\n\n  detectDraw(context, color) {\n    if (this.enabled && this.isClickable && this.clickExact) {\n      const frameWidth = this.frameWidth || this.image.width;\n      const frameHeight = this.frameHeight || this.image.height;\n      const sX =\n        (this.width ? this.width : frameWidth) * this._normScale * this.scaleX;\n      const sY =\n        (this.height ? this.height : frameHeight) *\n        this._normScale *\n        this.scaleY;\n      const isTopLeft = this.position === Image.LEFT_TOP;\n\n      const tctx = this._temp_context(frameWidth, frameHeight);\n      tctx.globalAlpha = 1;\n      tctx.globalCompositeOperation = \"source-over\";\n      tctx.fillStyle = color;\n      tctx.fillRect(0, 0, frameWidth, frameHeight);\n      tctx.globalCompositeOperation = \"destination-atop\";\n      tctx.drawImage(\n        this.image,\n        this.frameX,\n        this.frameY,\n        frameWidth,\n        frameHeight,\n        0,\n        0,\n        frameWidth,\n        frameHeight\n      );\n\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.drawImage(\n        this._temp_canvas,\n        0,\n        0,\n        frameWidth,\n        frameHeight,\n        isTopLeft ? 0 : -sX / 2,\n        isTopLeft ? 0 : -sY / 2,\n        sX,\n        sY\n      );\n      context.restore();\n      this._currentTint = false;\n    }\n  }\n\n  detect(context, x, y) {\n    if (this.enabled && this.isClickable && this.clickExact) return \"c\";\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled && this.image && this.alpha > 0) {\n      const frameWidth = this.frameWidth || this.image.width,\n        frameHeight = this.frameHeight || this.image.height;\n      const sX =\n          (this.width ? this.width : frameWidth) *\n          this._normScale *\n          this.scaleX,\n        sY =\n          (this.height ? this.height : frameHeight) *\n          this._normScale *\n          this.scaleY;\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      const isTopLeft = this.position === Image.LEFT_TOP;\n\n      if (this.tint && this._currentTint !== this._tintCacheKey()) {\n        const tctx = this._temp_context(frameWidth, frameHeight);\n        tctx.globalAlpha = 1;\n        tctx.globalCompositeOperation = \"source-over\";\n        tctx.clearRect(0, 0, frameWidth, frameHeight);\n        tctx.globalAlpha = this.tint;\n        tctx.fillStyle = this.color;\n        tctx.fillRect(0, 0, frameWidth, frameHeight);\n        tctx.globalAlpha = 1;\n        tctx.globalCompositeOperation = \"destination-atop\";\n        tctx.drawImage(\n          this.image,\n          this.frameX,\n          this.frameY,\n          frameWidth,\n          frameHeight,\n          0,\n          0,\n          frameWidth,\n          frameHeight\n        );\n        this._currentTint = this._tintCacheKey();\n      }\n\n      if (this.rotation == 0) {\n        if (isTopLeft) {\n          context.drawImage(\n            this.tint ? this._temp_canvas : this.image,\n            this.tint ? 0 : this.frameX,\n            this.tint ? 0 : this.frameY,\n            frameWidth,\n            frameHeight,\n            this.x,\n            this.y,\n            sX,\n            sY\n          );\n        } else {\n          context.drawImage(\n            this.tint ? this._temp_canvas : this.image,\n            this.tint ? 0 : this.frameX,\n            this.tint ? 0 : this.frameY,\n            frameWidth,\n            frameHeight,\n            this.x - sX / 2,\n            this.y - sY / 2,\n            sX,\n            sY\n          );\n        }\n      } else {\n        context.save();\n        context.translate(this.x, this.y);\n        context.rotate(this.rotation);\n        context.drawImage(\n          this.tint ? this._temp_canvas : this.image,\n          this.tint ? 0 : this.frameX,\n          this.tint ? 0 : this.frameY,\n          frameWidth,\n          frameHeight,\n          isTopLeft ? 0 : -sX / 2,\n          isTopLeft ? 0 : -sY / 2,\n          sX,\n          sY\n        );\n        context.restore();\n      }\n    }\n  }\n}\nImage.LEFT_TOP = 0;\nImage.CENTER = 1;\n\nexport default Image;\n","import Circle from './Circle.mjs';\n\nclass Text extends Circle {\n  constructor(givenParameters) {\n    super(givenParameters);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      text: undefined,\n      font: '2em monospace',\n      position: Text.CENTER,\n      color: undefined,\n      borderColor: undefined,\n      lineWidth: 1\n    });\n  }\n\n  detectDraw(context, color) {\n    if (this.enabled && this.isClickable) {\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      if (!this.position) {\n        context.textAlign = 'left';\n        context.textBaseline = 'top';\n      }\n      context.font = this.font;\n      context.fillStyle = color;\n      context.fillText(this.text, 0, 0);\n      context.restore();\n    }\n  }\n\n  detect(context, color) {\n    return \"c\"\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.save();\n      if (!this.position) {\n        context.textAlign = 'left';\n        context.textBaseline = 'top';\n      }\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.font = this.font;\n\n      if (this.color) {\n        context.fillStyle = this.color;\n        context.fillText(this.text, 0, 0);\n      }\n\n      if (this.borderColor) {\n        context.strokeStyle = this.borderColor;\n        context.lineWidth = this.lineWidth;\n        context.strokeText(this.text, 0, 0);\n      }\n\n      context.restore();\n    }\n  };\n}\n\n// const\nText.LEFT_TOP = 0;\nText.CENTER = 1;\n\nexport default Text;\n","import Circle from \"./Circle.mjs\";\r\nimport tinycolor from \"@ctrl/tinycolor\";\r\nconst tinycolorf = typeof(tinycolor) === 'function' ? tinycolor : tinycolor.tinycolor\r\n\r\nconst gradientSize = 64;\r\nconst gradientResolution = 4;\r\nconst gradientSizeHalf = gradientSize >> 1;\r\n\r\nclass Particle extends Circle {\r\n  constructor(givenParameter) {\r\n    super(givenParameter);\r\n    this._currentScaleX = undefined;\r\n    this._currentPixelSmoothing = false;\r\n  }\r\n\r\n  static getGradientImage(r, g, b) {\r\n    let rIndex,\r\n      gIndex,\r\n      cr = r >> gradientResolution,\r\n      cg = g >> gradientResolution,\r\n      cb = b >> gradientResolution;\r\n\r\n    if (!Particle._Gradient) {\r\n      const length = 256 >> gradientResolution;\r\n      Particle._Gradient = Array.from({ length }, a =>\r\n        Array.from({ length }, a => Array.from({ length }))\r\n      );\r\n    }\r\n    if (!Particle._Gradient[cr][cg][cb]) {\r\n      Particle._Gradient[cr][cg][cb] = Particle.generateGradientImage(\r\n        cr,\r\n        cg,\r\n        cb\r\n      );\r\n    }\r\n    return Particle._Gradient[cr][cg][cb];\r\n  }\r\n\r\n  static generateGradientImage(cr, cg, cb) {\r\n    let canvas = document.createElement(\"canvas\");\r\n    canvas.width = canvas.height = gradientSize;\r\n\r\n    let txtc = canvas.getContext(\"2d\");\r\n    txtc.globalAlpha = 1;\r\n    txtc.globalCompositeOperation = \"source-over\";\r\n    txtc.clearRect(0, 0, gradientSize, gradientSize);\r\n\r\n    let grad = txtc.createRadialGradient(\r\n      gradientSizeHalf,\r\n      gradientSizeHalf,\r\n      0,\r\n      gradientSizeHalf,\r\n      gradientSizeHalf,\r\n      gradientSizeHalf\r\n    );\r\n    grad.addColorStop(\r\n      0,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",1)\"\r\n    );\r\n    grad.addColorStop(\r\n      0.3,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",0.4)\"\r\n    );\r\n    grad.addColorStop(\r\n      1,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",0)\"\r\n    );\r\n\r\n    txtc.fillStyle = grad;\r\n    txtc.fillRect(0, 0, gradientSize, gradientSize);\r\n\r\n    return canvas;\r\n  }\r\n\r\n  resize(output, additionalModifier) {\r\n    this._currentScaleX = undefined;\r\n  }\r\n\r\n  // draw-methode\r\n  draw(context, additionalModifier) {\r\n    if (this.enabled) {\r\n      // faster than: if (!(this.color instanceof TinyColor && this.color.model === 'rgb')) {\r\n      if (!this.color || !this.color.r) {\r\n        this.color = tinycolorf(this.color).toRgb();\r\n      }\r\n      if (this._currentScaleX !== this.scaleX) {\r\n        this._currentScaleX = this.scaleX;\r\n        this._currentPixelSmoothing =\r\n          (this.scaleX * additionalModifier.widthInPixel) /\r\n            additionalModifier.width >\r\n          gradientSize;\r\n      }\r\n      const { r, g, b } = this.color;\r\n      context.globalCompositeOperation = this.compositeOperation;\r\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\r\n      context.imageSmoothingEnabled = this._currentPixelSmoothing;\r\n      context.drawImage(\r\n        Particle.getGradientImage(r, g, b),\r\n        0,\r\n        0,\r\n        gradientSize,\r\n        gradientSize,\r\n        this.x - this.scaleX / 2,\r\n        this.y - this.scaleY / 2,\r\n        this.scaleX,\r\n        this.scaleY\r\n      );\r\n      context.imageSmoothingEnabled = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Particle;\r\n","import Group from \"./Group.mjs\";\nimport pasition from \"pasition\";\n\nexport default class Path extends Group {\n  constructor(givenParameters) {\n    super(givenParameters);\n\n    this.oldPath = undefined;\n    this.path2D = new Path2D();\n    if (this.polyfill) {\n      if (typeof Path2D !== \"function\") {\n        let head = document.getElementsByTagName(\"head\")[0];\n        let script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src =\n          \"https://cdn.jsdelivr.net/npm/canvas-5-polyfill@0.1.5/canvas.min.js\";\n        head.appendChild(script);\n      } else {\n        // create a new context\n        let ctx = document.createElement(\"canvas\").getContext(\"2d\");\n        // stroke a simple path\n        ctx.stroke(new Path2D(\"M0,0H1\"));\n        // check it did paint something\n        if (ctx.getImageData(0, 0, 1, 1).data[3]) {\n          this.polyfill = false;\n        }\n      }\n    }\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set path\n      path: undefined,\n      color: undefined,\n      borderColor: undefined,\n      lineWidth: 1,\n      clip: false,\n      fixed: false,\n      polyfill: true\n    });\n  }\n\n  // helper function for changeTo\n  changeToPathInit(from, to) {\n    return pasition._preprocessing(\n      typeof from === \"string\" ? pasition.path2shapes(from) : from,\n      typeof to === \"string\" ? pasition.path2shapes(to) : to\n    );\n  }\n  changeToPath(progress, data, sprite) {\n    return pasition._lerp(data.pathFrom, data.pathTo, progress);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false, () => {\n      return context.isPath(this.path2D, x, y);\n    });\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      const a = this.alpha * additionalModifier.alpha;\n      if (this.oldPath !== this.path) {\n        if (this.polyfill && typeof this.path === \"string\") {\n          this.path = pasition.path2shapes(this.path);\n        }\n        if (Array.isArray(this.path)) {\n          this.path2D = new Path2D();\n          this.path.forEach(curve => {\n            this.path2D.moveTo(curve[0][0], curve[0][1]);\n            curve.forEach(points => {\n              this.path2D.bezierCurveTo(\n                points[2],\n                points[3],\n                points[4],\n                points[5],\n                points[6],\n                points[7]\n              );\n            });\n            this.path2D.closePath();\n          });\n        } else if (this.path instanceof Path2D) {\n          this.path2D = this.path;\n        } else {\n          this.path2D = new Path2D(this.path);\n        }\n        this.oldPath = this.path;\n      }\n\n      let scaleX = this.scaleX,\n        scaleY = this.scaleY;\n\n      if (this.fixed) {\n        if (scaleX == 0) {\n          scaleX = Number.EPSILON;\n        }\n        if (scaleY == 0) {\n          scaleY = Number.EPSILON;\n        }\n      }\n\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = a;\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(scaleX, scaleY);\n      context.rotate(this.rotation);\n\n      if (this.color) {\n        context.fillStyle = this.color;\n        context.fill(this.path2D);\n      }\n\n      context.save();\n\n      if (this.clip) {\n        context.clip(this.path2D);\n        if (this.fixed) {\n          context.rotate(-this.rotation);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.translate(-this.x, -this.y);\n        }\n      }\n\n      // draw all sprites\n      for (const sprite of this.sprite) {\n        sprite.draw(context, additionalModifier);\n      }\n\n      context.restore();\n\n      if (this.borderColor) {\n        context.strokeStyle = this.borderColor;\n        context.lineWidth = this.lineWidth;\n        context.stroke(this.path2D);\n      }\n\n      context.restore();\n    }\n  }\n}\n","import Circle from \"./Circle.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\n\n// Sprite\n// Draw a Circle\nclass Rect extends Circle {\n  constructor(givenParameters) {\n    super(givenParameters);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      borderColor: undefined,\n      color: undefined,\n      lineWidth: 1,\n      clear: false,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        ),\n      // relative position\n      position: Rect.CENTER\n    });\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n      if (this.position === Rect.CENTER) {\n        this.x += this.width / 2;\n      }\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n      if (this.position === Rect.CENTER) {\n        this.y += this.height / 2;\n      }\n    }\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  init(context, additionalModifier) {\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, this.position === Rect.LEFT_TOP);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled && this.alpha > 0) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      if (this.rotation === 0 && this.position === Rect.LEFT_TOP) {\n        if (this.clear) {\n          context.clearRect(this.x, this.y, this.width, this.height);\n        } else if (this.color) {\n          context.fillStyle = this.color;\n          context.fillRect(this.x, this.y, this.width, this.height);\n        }\n        if (this.borderColor) {\n          context.beginPath();\n          context.lineWidth = this.lineWidth;\n          context.strokeStyle = this.borderColor;\n          context.rect(this.x, this.y, this.width, this.height);\n          context.stroke();\n        }\n      } else {\n        let hw = this.width / 2;\n        let hh = this.height / 2;\n        context.save();\n        if (this.position === Rect.LEFT_TOP) {\n          context.translate(this.x + hw, this.y + hh);\n        } else {\n          context.translate(this.x, this.y);\n        }\n        context.scale(this.scaleX, this.scaleY);\n        context.rotate(this.rotation);\n        if (this.clear) {\n          context.clearRect(-hw, -hh, this.width, this.height);\n        } else if (this.color) {\n          context.fillStyle = this.color;\n          context.fillRect(-hw, -hh, this.width, this.height);\n        }\n        if (this.borderColor) {\n          context.beginPath();\n          context.lineWidth = this.lineWidth;\n          context.strokeStyle = this.borderColor;\n          context.rect(-hw, -hh, this.width, this.height);\n          context.stroke();\n        }\n        context.restore();\n      }\n    }\n  }\n}\nRect.LEFT_TOP = 0;\nRect.CENTER = 1;\n\nexport default Rect;\n","import FastBlur from \"./FastBlur.mjs\";\nimport * as stackblur from \"stackblur-canvas\";\nconst { imageDataRGBA } = stackblur.default || stackblur;\n\nexport default class StackBlur extends FastBlur {\n  constructor(givenParameter) {\n    super(givenParameter);\n\n    this._currentGridSize = false;\n    this._currentRadiusPart = undefined;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // work directly on the main canvas\n      onCanvas: false,\n      radius: undefined,\n      radiusPart: undefined,\n      radiusScale: true\n    });\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm && this.onCanvas) {\n      this.x = 0;\n      this.y = 0;\n      this.width = additionalModifier.widthInPixel;\n      this.height = additionalModifier.heightInPixel;\n    } else {\n      super.normalizeFullScreen(additionalModifier);\n    }\n  }\n\n  resize(output, additionalModifier) {\n    super.resize(output, additionalModifier);\n    if (this.radiusPart) {\n      this.radius = undefined;\n    }\n  }\n\n  additionalBlur(targetW, targetH, additionalModifier) {\n    const imageData = this._tctx.getImageData(0, 0, targetW, targetH);\n    imageDataRGBA(imageData, 0, 0, targetW, targetH, additionalModifier.radius);\n    this._tctx.putImageData(imageData, 0, 0);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (\n        this.radius === undefined ||\n        this._currentRadiusPart !== this.radiusPart\n      ) {\n        this.radius = Math.round(\n          (additionalModifier.widthInPixel + additionalModifier.heightInPixel) /\n            2 /\n            this.radiusPart\n        );\n        this._currentRadiusPart = this.radiusPart;\n      }\n      const radius = Math.round(\n        this.radius *\n          (this.radiusScale &&\n            (additionalModifier.cam ? additionalModifier.cam.zoom : 1) /\n              additionalModifier.scaleCanvas)\n      );\n      if (radius) {\n        if (this.onCanvas) {\n          if (this.width === undefined || this.height === undefined) {\n            this.normalizeFullScreen(additionalModifier);\n          }\n          const x = Math.round(this.x);\n          const y = Math.round(this.y);\n          const w = Math.round(this.width);\n          const h = Math.round(this.height);\n          this.imageData = context.getImageData(x, y, w, h);\n          imageDataRGBA(this.imageData, 0, 0, w - x, h - y, radius);\n          context.putImageData(this.imageData, x, y, 0, 0, w, h);\n        } else {\n          additionalModifier.radius = radius;\n          super.draw(context, additionalModifier);\n        }\n      }\n    } else {\n      super.draw(context, additionalModifier);\n    }\n  }\n}\n","import Callback from './Sprites/Callback.mjs';\nimport Canvas from './Sprites/Canvas.mjs';\nimport Circle from './Sprites/Circle.mjs';\nimport Emitter from './Sprites/Emitter.mjs';\nimport FastBlur from './Sprites/FastBlur.mjs';\nimport Group from './Sprites/Group.mjs';\nimport Image from './Sprites/Image.mjs';\nimport Text from './Sprites/Text.mjs';\nimport Particle from './Sprites/Particle.mjs';\nimport Path from './Sprites/Path.mjs';\nimport Rect from './Sprites/Rect.mjs';\nimport Scroller from './Sprites/Scroller.mjs';\nimport StackBlur from './Sprites/StackBlur.mjs';\nimport StarField from './Sprites/StarField.mjs';\n\nexport default {\n  Callback,\n  Canvas,\n  Circle,\n  Emitter,\n  FastBlur,\n  Group,\n  Image,\n  Text,\n  Particle,\n  Path,\n  Rect,\n  Scroller,\n  StackBlur,\n  StarField\n};\n","import calc from \"../func/calc.mjs\";\nimport Emitter from \"./Emitter.mjs\";\nimport Text from \"./Text.mjs\";\n\nexport default class Scroller extends Emitter {\n  constructor(givenParameters) {\n    let text = calc(givenParameters.text);\n    let characterList = Array.isArray(text) ? text : [...text];\n    super(\n      Object.assign({}, givenParameters, {\n        class: Text,\n        count: characterList.length,\n        text: index => characterList[index],\n        enabled: index =>\n          characterList[index] !== \" \" && calc(givenParameters.enabled, index)\n      })\n    );\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Rect from \"./Rect.mjs\";\n// Sprite\n// Draw a Circle\nexport default class StarField extends Rect {\n  constructor(givenParameters) {\n    super(givenParameters);\n\n    this._starsX = [];\n    this._starsY = [];\n    this._starsZ = [];\n    this._starsOldX = [];\n    this._starsOldY = [];\n    this._starsNewX = [];\n    this._starsNewY = [];\n    this._starsEnabled = [];\n    this._starsLineWidth = [];\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set image\n      count: 40,\n      // relative position\n      moveX: 0,\n      moveY: 0,\n      moveZ: 0,\n      lineWidth: undefined,\n      highScale: true,\n      color: \"#FFF\" // here default color is white\n    });\n  }\n\n  init(context, additionalModifier) {\n    this.width = this.width || additionalModifier.width;\n    this.height = this.height || additionalModifier.height;\n    this.x = this.x === undefined ? additionalModifier.x : this.x;\n    this.y = this.y === undefined ? additionalModifier.y : this.y;\n    this.lineWidth =\n      this.lineWidth ||\n      Math.min(\n        additionalModifier.height / additionalModifier.heightInPixel,\n        additionalModifier.width / additionalModifier.widthInPixel\n      ) / 2;\n    this._centerX = this.width / 2 + this.x;\n    this._centerY = this.height / 2 + this.y;\n    this._scaleZ = Math.max(this.width, this.height) / 2;\n    function clampOrRandom(val, min, max = -min) {\n      return val === undefined || val < min || val >= max\n        ? Math.random() * (max - min) + min\n        : val;\n    }\n    for (let i = 0; i < this.count; i++) {\n      this._starsX[i] = clampOrRandom(this._starsX[i], -this.width / 2);\n      this._starsY[i] = clampOrRandom(this._starsY[i], -this.height / 2);\n      this._starsZ[i] = clampOrRandom(this._starsZ[i], 0, this._scaleZ);\n    }\n  }\n\n  moveStar(i, scaled_timepassed, firstPass) {\n    if (firstPass) {\n      this._starsEnabled[i] = true;\n    }\n    const hw = this.width / 2;\n    const hh = this.height / 2;\n    let x = this._starsX[i] + this.moveX * scaled_timepassed,\n      y = this._starsY[i] + this.moveY * scaled_timepassed,\n      z = this._starsZ[i] + this.moveZ * scaled_timepassed;\n    while (x < -hw) {\n      x += this.width;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n    while (x > hw) {\n      x -= this.width;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n\n    while (y < -hh) {\n      y += this.height;\n      x = Math.random() * this.width - hw;\n      this._starsEnabled[i] = false;\n    }\n    while (y > hh) {\n      y -= this.height;\n      x = Math.random() * this.width - hw;\n      this._starsEnabled[i] = false;\n    }\n\n    while (z <= 0) {\n      z += this._scaleZ;\n      x = Math.random() * this.width - hw;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n    while (z > this._scaleZ) {\n      z -= this._scaleZ;\n      x = Math.random() * this.width - hw;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n\n    const projectX = this._centerX + (x / z) * hw;\n    const projectY = this._centerY + (y / z) * hh;\n    this._starsEnabled[i] =\n      this._starsEnabled[i] &&\n      projectX >= this.x &&\n      projectY >= this.y &&\n      projectX < this.x + this.width &&\n      projectY < this.y + this.height;\n    if (firstPass) {\n      this._starsX[i] = x;\n      this._starsY[i] = y;\n      this._starsZ[i] = z;\n      this._starsNewX[i] = projectX;\n      this._starsNewY[i] = projectY;\n    } else {\n      this._starsOldX[i] = projectX;\n      this._starsOldY[i] = projectY;\n      let lw = (1 - this._starsZ[i] / this._scaleZ) * 4;\n      if (!this.highScale) {\n        lw = Math.ceil(lw);\n      }\n      this._starsLineWidth[i] = lw;\n    }\n  }\n\n  animate(timepassed) {\n    let ret = super.animate(timepassed);\n    if (this.enabled && this._centerX !== undefined) {\n      let i = this.count;\n      while (i--) {\n        this.moveStar(i, timepassed / 16, true);\n        if (this._starsEnabled[i]) {\n          this.moveStar(i, -5, false);\n        }\n      }\n    }\n    return ret;\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n\n      if (this.moveY == 0 && this.moveZ == 0 && this.moveX < 0) {\n        context.fillStyle = this.color;\n        let i = this.count;\n        while (i--) {\n          if (this._starsEnabled[i]) {\n            context.fillRect(\n              this._starsNewX[i],\n              this._starsNewY[i] -\n                (this._starsLineWidth[i] * this.lineWidth) / 2,\n              this._starsOldX[i] - this._starsNewX[i],\n              this._starsLineWidth[i] * this.lineWidth\n            );\n          }\n        }\n      } else {\n        context.strokeStyle = this.color;\n        if (this.highScale) {\n          let i = this.count;\n          while (i--) {\n            if (this._starsEnabled[i]) {\n              context.beginPath();\n              context.lineWidth = this._starsLineWidth[i] * this.lineWidth;\n              context.moveTo(this._starsOldX[i], this._starsOldY[i]);\n              context.lineTo(this._starsNewX[i], this._starsNewY[i]);\n              context.stroke();\n              context.closePath();\n            }\n          }\n        } else {\n          let lw = 5,\n            i;\n          while (--lw) {\n            context.beginPath();\n            context.lineWidth = lw * this.lineWidth;\n            i = this.count;\n            while (i--) {\n              if (this._starsEnabled[i] && this._starsLineWidth[i] === lw) {\n                context.moveTo(this._starsOldX[i], this._starsOldY[i]);\n                context.lineTo(this._starsNewX[i], this._starsNewY[i]);\n              }\n            }\n            context.stroke();\n            context.closePath();\n          }\n        }\n      }\n    }\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class Callback {\n\n    constructor(callback, duration) {\n      this.callback = callback;\n      this.duration = ifNull(calc(duration), undefined);\n      this.initialized = false;\n    }\n\n    reset() {\n      this.initialized = false;\n    }\n\n    run(sprite, time) {\n      let result;\n\n      if (this.duration !== undefined) {\n        this.callback(sprite, Math.min(time, this.duration), !this.initialized);\n        this.initialized = true;\n        return time - this.duration;\n      } else {\n        result = this.callback(sprite, time, !this.initialized);\n        this.initialized = true;\n        return result;\n      }\n    };\n}","import calc from \"../func/calc.mjs\";\r\nimport ifNull from \"../func/ifNull.mjs\";\r\nimport tinycolor from \"@ctrl/tinycolor\";\r\nconst tinycolorf =  typeof(tinycolor) === 'function' ? tinycolor : tinycolor.tinycolor\r\n\r\nconst degToRad = 0.017453292519943295; //Math.PI / 180;\r\n\r\nfunction moveDefault(progress, data) {\r\n  return data.from + progress * data.delta;\r\n}\r\n\r\nfunction moveBezier(progress, data) {\r\n  var copy = [...data.values],\r\n    copyLength = copy.length,\r\n    i;\r\n\r\n  while (copyLength > 1) {\r\n    copyLength--;\r\n    for (i = 0; i < copyLength; i++) {\r\n      copy[i] = copy[i] + progress * (copy[i + 1] - copy[i]);\r\n    }\r\n  }\r\n  return copy[0];\r\n}\r\n\r\nfunction moveColor(progress, data, sprite) {\r\n  return data.colorFrom.mix(data.colorTo, progress * 100).toString();\r\n}\r\n\r\nfunction movePath(progress, data, sprite) {\r\n  return sprite.changeToPath(progress, data, sprite);\r\n}\r\n\r\n// to values of a object\r\nexport default class ChangeTo {\r\n  constructor(changeValues, duration, ease) {\r\n    this.initialized = false;\r\n    this.changeValues = [];\r\n    for (let k in changeValues) {\r\n      const orgValue = changeValues[k];\r\n      const value = k === \"rotationInDegree\" ? orgValue * degToRad : orgValue;\r\n      const isColor = k === \"color\" || k === \"borderColor\";\r\n      const isPath = k === \"path\";\r\n      const isFunction = typeof value === \"function\";\r\n      const isBezier = !isColor && Array.isArray(value);\r\n      const names =\r\n        k === \"scale\"\r\n          ? [\"scaleX\", \"scaleY\"]\r\n          : k === \"rotationInRadian\" || k === \"rotationInDegree\"\r\n          ? [\"rotation\"]\r\n          : [k];\r\n      for (const name of names) {\r\n        this.changeValues.push({\r\n          name,\r\n          to: isBezier ? value[value.length - 1] : calc(value, 1, {}),\r\n          bezier: isBezier ? value : false,\r\n          isColor,\r\n          isPath,\r\n          isFunction: isFunction ? value : false,\r\n          moveAlgorithm: isColor\r\n            ? moveColor\r\n            : isPath\r\n            ? movePath\r\n            : isBezier\r\n            ? moveBezier\r\n            : moveDefault\r\n        });\r\n      }\r\n    }\r\n    this.duration = ifNull(calc(duration), 0);\r\n    this.ease = ifNull(ease, t => t);\r\n  }\r\n\r\n  reset() {\r\n    this.initialized = false;\r\n  }\r\n\r\n  init(sprite, time) {\r\n    var l = this.changeValues.length,\r\n      data;\r\n    while (l--) {\r\n      data = this.changeValues[l];\r\n      if (data.isFunction) {\r\n        data.from = sprite[data.name];\r\n        data.to = data.isFunction(data.from);\r\n        if (data.isColor) {\r\n          data.colorFrom = tinycolorf(data.from);\r\n          data.colorTo = tinycolorf(data.to);\r\n          data.moveAlgorithm = moveColor;\r\n        } else if (data.isPath) {\r\n          [data.pathFrom, data.pathTo] = sprite.changeToPathInit(\r\n            data.from,\r\n            data.to\r\n          );\r\n          data.moveAlgorithm = movePath;\r\n        } else if (Array.isArray(data.to)) {\r\n          data.values = [sprite[data.name], ...data.to];\r\n          data.moveAlgorithm = moveBezier;\r\n        } else {\r\n          data.delta = data.to - data.from;\r\n          data.moveAlgorithm = moveDefault;\r\n        }\r\n      } else if (data.isColor) {\r\n        data.colorFrom = tinycolorf(sprite[data.name]);\r\n        data.colorTo = tinycolorf(data.to);\r\n      } else if (data.isPath) {\r\n        [data.pathFrom, data.pathTo] = sprite.changeToPathInit(\r\n          sprite[data.name],\r\n          data.to\r\n        );\r\n      } else if (data.bezier) {\r\n        data.values = [sprite[data.name], ...data.bezier];\r\n      } else {\r\n        data.from = sprite[data.name];\r\n        data.delta = data.to - data.from;\r\n      }\r\n    }\r\n  }\r\n\r\n  run(sprite, time) {\r\n    if (!this.initialized) {\r\n      this.initialized = true;\r\n      this.init(sprite, time);\r\n    }\r\n\r\n    // return time left\r\n    if (this.duration <= time) {\r\n      let l = this.changeValues.length;\r\n      let data;\r\n\r\n      // prevent round errors by applying end-data\r\n      while (l--) {\r\n        data = this.changeValues[l];\r\n        sprite[data.name] = data.to;\r\n      }\r\n    } else {\r\n      let l = this.changeValues.length;\r\n      let data;\r\n      const progress = this.ease(time / this.duration);\r\n\r\n      while (l--) {\r\n        data = this.changeValues[l];\r\n        sprite[data.name] = data.moveAlgorithm(progress, data, sprite);\r\n      }\r\n    }\r\n    return time - this.duration;\r\n  }\r\n}\r\n","import Sequence from './Sequence.mjs';\n\nexport default class End {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_FORCE_DISABLE;\n\t}\n}","import Sequence from './Sequence.mjs';\n\nexport default class EndDisabled {\n\n    constructor() {\n    }\n\n    run(sprite, time) {\n        sprite.enabled = false;\n        return Sequence._TIMELAPSE_TO_FORCE_DISABLE;\n    };\n}","import Sequence from \"./Sequence.mjs\";\n\nexport default class Forever {\n  constructor(...Aniobject) {\n    this.Aniobject =\n      Aniobject[0] instanceof Sequence\n        ? Aniobject[0]\n        : new Sequence(...Aniobject);\n  }\n\n  reset(timelapsed = 0) {\n    this.Aniobject.reset && this.Aniobject.reset(timelapsed);\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.Aniobject.play && this.Aniobject.play(label, timelapsed);\n  }\n\n  run(sprite, time, isDifference) {\n    let t = time;\n    while (t >= 0) {\n      t = this.Aniobject.run(sprite, t, isDifference);\n      isDifference = true;\n      if (t === true) {\n        return true;\n      }\n      if (t >= 0) {\n        this.Aniobject.reset && this.Aniobject.reset();\n      }\n    }\n    return t;\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\n\nexport default class If {\n  constructor(ifCallback, Aniobject, AniobjectElse) {\n    this.ifCallback = ifCallback;\n    this.Aniobject = Aniobject;\n    this.AniobjectElse = ifNull(AniobjectElse, () => 0);\n  }\n\n  run(sprite, time) {\n    const AniObject = calc(this.ifCallback)\n      ? this.Aniobject\n      : this.AniobjectElse;\n    return AniObject.run\n      ? AniObject.run(sprite, time)\n      : AniObject(sprite, time);\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\nimport ImageManager from '../ImageManager.mjs';\n\nexport default class Image {\n\n  constructor(image, durationBetweenFrames) {\n    this.initialized = false;\n    this.image = calc(image);\n    this.durationBetweenFrames = ifNull(calc(durationBetweenFrames), 0);\n    if (Array.isArray(this.image)) {\n      this.count = this.image.length;\n    } else {\n      this.image = [this.image];\n      this.count = 1;\n    }\n    this.duration = this.count * this.durationBetweenFrames;\n  }\n\n  reset() {\n    this.initialized = false;\n  };\n\n  run(sprite, time) {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.current = -1;\n    }\n\n    // return time left\n    if (time >= this.duration) {\n      sprite.image = ImageManager.getImage(this.image[this.image.length - 1]);\n    } else {\n      let currentFrame = Math.floor(time / this.durationBetweenFrames);\n      if (currentFrame !== this.current) {\n        this.current = currentFrame;\n        sprite.image = ImageManager.getImage(this.image[this.current]);\n      }\n    }\n    return time - this.duration;\n  }\n}","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class ImageFrame {\n\n    constructor(frameNumber, framesToRight, durationBetweenFrames) {\n        this.initialized = false;\n        this.frameNumber = calc(frameNumber);\n        this.framesToRight = ifNull(calc(framesToRight), true);\n        this.durationBetweenFrames = ifNull(calc(durationBetweenFrames), 0);\n        if (!Array.isArray(this.frameNumber)) {\n            this.frameNumber = [this.frameNumber];\n        }\n        this.duration = this.frameNumber.length * this.durationBetweenFrames;\n    }\n\n    run(sprite, time) {\n        let currentFrame = 0;\n        if (time >= this.duration) {\n            currentFrame = this.frameNumber[this.frameNumber.length - 1];\n        } else {\n            currentFrame = this.frameNumber[Math.floor(time / this.durationBetweenFrames)];\n        }\n        if (this.framesToRight) {\n            sprite.frameX = sprite.frameWidth * currentFrame;\n        } else {\n            sprite.frameY = sprite.frameHeight * currentFrame;\n        }\n\n        return time - this.duration;\n    }\n}","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport Sequence from \"./Sequence.mjs\";\n\nexport default class Loop {\n  constructor(times, ...Aniobject) {\n    this.Aniobject =\n      Aniobject[0] instanceof Sequence\n        ? Aniobject[0]\n        : new Sequence(...Aniobject);\n    this.times = this.timesOrg = ifNull(calc(times), 1);\n  }\n\n  reset(timelapsed = 0) {\n    this.times = this.timesOrg;\n    this.Aniobject.reset && this.Aniobject.reset(timelapsed);\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.times = this.timesOrg;\n    this.Aniobject.play && this.Aniobject.play(label, timelapsed);\n  }\n\n  run(sprite, time, isDifference) {\n    let t = time;\n    while (t >= 0 && this.times > 0) {\n      t = this.Aniobject.run(sprite, t, isDifference);\n      isDifference = true;\n      if (t === true) {\n        return true;\n      }\n      if (t >= 0) {\n        this.times--;\n        this.Aniobject.reset && this.Aniobject.reset();\n      }\n    }\n    return t;\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ChangeTo from './ChangeTo.mjs';\n\nconst DURATION_FOR_1PX = 10;\n\nexport default class Move extends ChangeTo {\n  constructor(x, y, speed, ease) {\n    super({\n      x,\n      y\n    }, 0, ease);\n    this.speed = calc(speed) || 1;\n  }\n\n  init(sprite, time) {\n    if (this.speed == 0 || (this.targetX === sprite.x && this.targetY === sprite.y)) {\n      this.duration = 0;\n    }\n    else {\n      let x = this.changeValues[0],\n        y = this.changeValues[1];\n\n      x.from = sprite.x;\n      y.from = sprite.y;\n\n      x.delta = x.to - x.from;\n      y.delta = y.to - y.from;\n\n      const hypotenuse = Math.sqrt(x.delta * x.delta + y.delta * y.delta);\n\n      this.duration = hypotenuse * DURATION_FOR_1PX / this.speed;\n    }\n\n    super.init(sprite, time);\n  };\n}\n","import Sequence from './Sequence.mjs';\n\nexport default class Remove {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_REMOVE;\n\t}\n}","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class Once {\n  constructor(Aniobject, times) {\n    this.Aniobject = Aniobject;\n    this.times = ifNull(calc(times), 1);\n  }\n\n  run(sprite, time) {\n    if (this.times <= 0) {\n      return time;\n    }\n    else {\n      let t = this.Aniobject.run(sprite, time);\n      if (t >= 0) {\n        this.times--;\n      }\n      return t;\n    }\n  };\n}","import calc from '../func/calc.mjs';\n\nexport default class Shake {\n\n  constructor(shakediff, duration) {\n    this.initialized = false;\n    this.duration = calc(duration);\n    this.shakeDiff = calc(shakediff);\n    this.shakeDiffHalf = this.shakeDiff / 2;\n  }\n\n  reset() {\n    this.initialized = false;\n  }\n\n  run(sprite, time) {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.x = sprite.x;\n      this.y = sprite.y;\n    }\n\n    // return time left\n    if (time >= this.duration) {\n      // prevent round errors\n      sprite.x = this.x;\n      sprite.y = this.y;\n    } else {\n      // shake sprite\n      sprite.x = this.x + Math.random() * this.shakeDiff - this.shakeDiffHalf;\n      sprite.y = this.y + Math.random() * this.shakeDiff - this.shakeDiffHalf;\n    }\n    return time - this.duration;\n  }\n}","export default class ShowOnce {\n\n    constructor() {\n        this.showOnce = true;\n    }\n\n    run(sprite, time) {\n        sprite.enabled = sprite.enabled && this.showOnce;\n        this.showOnce = false;\n        return 0;\n    }\n}","import Sequence from './Sequence.mjs';\n\nclass State {\n  constructor({\n    states = {},\n    transitions = {},\n    default: defaultState = undefined,\n    delegateTo = undefined\n  } = {}) {\n    // save possible states\n    this.states = states;\n    Object.keys(this.states).forEach(i => {\n      if (Array.isArray(this.states[i])) {\n        this.states[i] = new Sequence(this.states[i])\n      }\n    });\n    // save transitions\n    this.transitions = transitions;\n    // save delegateTo\n    this.delegateTo = delegateTo;\n    // set start state\n    this.currentStateName = defaultState;\n    this.currentState = this.states[defaultState];\n    this.isTransitioningToStateName = undefined;\n  }\n\n  setState(name, options) {\n    if (name !== this.currentStateName) {\n      this.isTransitioningToStateName = name;\n      const UCFirstName = `${name.charAt(0).toUpperCase()}${name.slice(1)}`;\n      const possibleTransitionNames = [\n        `${this.currentStateName}To${UCFirstName}`,\n        `${this.currentStateName}To`,\n        `to${UCFirstName}`\n      ];\n      const transitionName = possibleTransitionNames.find(\n        name => this.transitions[name]\n      );\n      if (transitionName) {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.transitions[transitionName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n      } else {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.states[this.currentStateName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n        this.isTransitioningToStateName = undefined;\n      }\n    }\n    // search through transitions\n    // delegateTo - search through list\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.currentState.play && this.currentState.play(label, timelapsed);\n  }\n\n  run(sprite, time, is_difference) {\n    let timeLeft = time;\n    let isDifference = is_difference;\n    if (this.currentState) {\n      timeLeft = this.currentState.run(sprite, timeLeft, isDifference);\n      if (timeLeft === true) {\n        return true\n      }\n      isDifference = true;\n    }\n    if (timeLeft >= 0 || !this.currentState) {\n      if (this.isTransitioningToStateName) {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.states[this.currentStateName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n        this.isTransitioningToStateName = undefined;\n        timeLeft = this.currentState.run(sprite, timeLeft, isDifference);\n        if (timeLeft === true) {\n          return true\n        }\n      } else {\n        this.currentState = undefined;\n      }\n    }\n    return -1;\n  }\n}\n\nexport default State;\n","import Sequence from './Sequence.mjs';\n\nexport default class End {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_STOP;\n\t}\n}","import Sequence from './Sequence.mjs';\n\nexport default class EndDisabled {\n\n    constructor() {\n    }\n\n    run(sprite, time) {\n        sprite.enabled = false;\n        return Sequence._TIMELAPSE_TO_STOP;\n    };\n}","import Callback from './Animations/Callback.mjs';\nimport ChangeTo from './Animations/ChangeTo.mjs';\nimport End from './Animations/End.mjs';\nimport EndDisabled from './Animations/EndDisabled.mjs';\nimport Forever from './Animations/Forever.mjs';\nimport If from './Animations/If.mjs';\nimport Image from './Animations/Image.mjs';\nimport ImageFrame from './Animations/ImageFrame.mjs';\nimport Loop from './Animations/Loop.mjs';\nimport Move from './Animations/Move.mjs';\nimport Remove from './Animations/Remove.mjs';\nimport Sequence from './Animations/Sequence.mjs';\nimport Once from './Animations/Once.mjs';\nimport Shake from './Animations/Shake.mjs';\nimport ShowOnce from './Animations/ShowOnce.mjs';\nimport State from './Animations/State.mjs';\nimport Stop from './Animations/Stop.mjs';\nimport StopDisabled from './Animations/StopDisabled.mjs';\nimport Wait from './Animations/Wait.mjs';\nimport WaitDisabled from './Animations/WaitDisabled.mjs';\n\nexport default {\n  Callback,\n  ChangeTo,\n  End,\n  EndDisabled,\n  Forever,\n  If,\n  Image,\n  ImageFrame,\n  Loop,\n  Move,\n  Once,\n  Remove,\n  Sequence,\n  Shake,\n  ShowOnce,\n  State,\n  Stop,\n  StopDisabled,\n  Wait,\n  WaitDisabled\n};\n","import calc from '../func/calc.mjs';\nimport ifNull from \"../func/ifNull.mjs\";\n\nexport default class WaitDisabled {\n\n  constructor(duration) {\n    this.duration = ifNull(calc(duration), 0);\n  }\n\n  run(sprite, time) {\n    // return time left\n    sprite.enabled = (time >= this.duration);\n    return time - this.duration;\n  }\n}","export default class Camera {\r\n  enabled = true;\r\n  type = \"camera\";\r\n  cam = {\r\n    zoom: 1,\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  viewport({}, matrix) {\r\n    return matrix\r\n      .scale(this.cam.zoom, this.cam.zoom)\r\n      .translate(-this.cam.x, -this.cam.y);\r\n  }\r\n\r\n  viewportByCam({ engine }, cam) {\r\n    const hw = engine.getWidth() / 2;\r\n    const hh = engine.getHeight() / 2;\r\n    const scale = engine.getRatio() > 1 ? hw : hh;\r\n    return new Transform()\r\n      .translate(hw, hh)\r\n      .scale(scale, scale)\r\n      .scale(cam.zoom, cam.zoom)\r\n      .translate(-cam.x, -cam.y);\r\n  }\r\n\r\n  additionalModifier({}, additionalModifier) {\r\n    additionalModifier.cam = this.cam;\r\n    cl = {\r\n      x1: additionalModifier.x,\r\n      y1: additionalModifier.y,\r\n      x2: additionalModifier.x + additionalModifier.width,\r\n      y2: additionalModifier.y + additionalModifier.height,\r\n      _w: additionalModifier.width,\r\n      _h: additionalModifier.height\r\n    };\r\n    return additionalModifier;\r\n  }\r\n\r\n  clampView({ engine, scene, clampLimits }, cam) {\r\n    const cl = clampLimits || {\r\n      x1: scene.additionalModifier.x,\r\n      y1: scene.additionalModifier.y,\r\n      x2: scene.additionalModifier.x + scene.additionalModifier.width,\r\n      y2: scene.additionalModifier.y + scene.additionalModifier.height\r\n    };\r\n    const invert = this.viewportByCam({ engine }, cam).invert();\r\n    const [x1, y1] = invert.transformPoint(0, 0);\r\n    const [x2, y2] = invert.transformPoint(\r\n      engine.getWidth(),\r\n      engine.getHeight()\r\n    );\r\n\r\n    // check for x\r\n    // is there a zoom in?\r\n    if (x2 - x1 <= cl.x2 - cl.x1) {\r\n      if (x1 < cl.x1) {\r\n        if (x2 <= cl.x2) {\r\n          cam.x += cl.x1 - x1;\r\n        }\r\n      } else {\r\n        if (x2 > cl.x2) {\r\n          cam.x += cl.x2 - x2;\r\n        }\r\n      }\r\n    } else {\r\n      if (x1 > cl.x1) {\r\n        cam.x += cl.x1 - x1;\r\n      } else {\r\n        if (x2 < cl.x2) {\r\n          cam.x += cl.x2 - x2;\r\n        }\r\n      }\r\n    }\r\n\r\n    // check for y\r\n    // zoom in?\r\n    if (y2 - y1 <= cl.y2 - cl.y1) {\r\n      if (y1 < cl.y1) {\r\n        if (y2 <= cl.y2) {\r\n          cam.y += cl.y1 - y1;\r\n        }\r\n      } else {\r\n        if (y2 > cl.y2) {\r\n          cam.y += cl.y2 - y2;\r\n        }\r\n      }\r\n    } else {\r\n      if (y1 > cl.y1) {\r\n        cam.y += cl.y1 - y1;\r\n      } else {\r\n        if (y2 < cl.y2) {\r\n          cam.y += cl.y2 - y2;\r\n        }\r\n      }\r\n    }\r\n    return cam;\r\n  }\r\n\r\n  set zoom(value) {\r\n    this.cam.zoom = value;\r\n  }\r\n\r\n  set camX(v) {\r\n    this.cam.x = v;\r\n  }\r\n\r\n  set camY(v) {\r\n    this.cam.y = v;\r\n  }\r\n\r\n  get zoom() {\r\n    return this.cam.zoom;\r\n  }\r\n\r\n  get camX() {\r\n    return this.cam.x;\r\n  }\r\n\r\n  get camY() {\r\n    return this.cam.y;\r\n  }\r\n\r\n  zoomToFullScreen({ scene }) {\r\n    return Math.min(\r\n      scene.additionalModifier.fullScreen.width /\r\n        scene.additionalModifier.width,\r\n      scene.additionalModifier.fullScreen.height /\r\n        scene.additionalModifier.height\r\n    );\r\n  }\r\n  \r\n  zoomTo({ scene, engine, cam, x1, y1, x2, y2 }) {\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    const invert = this.viewportByCam({ engine }, cam).invert();\r\n    const [sx1, sy1] = invert.transformPoint(0, 0);\r\n    const [sx2, sy2] = invert.transformPoint(\r\n      engine.getWidth() * scale,\r\n      engine.getHeight() * scale\r\n    );\r\n    const sw = sx2 - sx1;\r\n    const sh = sy2 - sy1;\r\n    const w = x2 - x1;\r\n    const h = y2 - y1;\r\n    const mx = x1 + w / 2;\r\n    const my = y1 + h / 2;\r\n    const zoomX = sw / w;\r\n    const zoomY = sh / h;\r\n    return {\r\n      x: mx,\r\n      y: my,\r\n      zoom: this.toCam.zoom * Math.max(Math.min(zoomX, zoomY), Number.MIN_VALUE)\r\n    };\r\n  }\r\n}\r\n","export default class CameraControl {\r\n  enabled = true;\r\n\r\n  constructor(config = {}) {\r\n    this._mousePos = {};\r\n    this.toCam = {};\r\n    this.config = Object.assign(\r\n      {},\r\n      {\r\n        zoomMax: 10,\r\n        zoomMin: 0.5,\r\n        zoomFactor: 1.2,\r\n        tween: 2,\r\n        callResize: true,\r\n      },\r\n      config\r\n    );\r\n  }\r\n\r\n  init({ scene }) {\r\n    this._scene = scene;\r\n    this.toCam = scene.camera.cam;\r\n  }\r\n\r\n  mouseDown({ event: e, position: [mx, my], button: i }) {\r\n    this._mousePos[i] = Object.assign({}, this._mousePos[i], {\r\n      x: mx,\r\n      y: my,\r\n      _cx: this.toCam.x,\r\n      _cy: this.toCam.y,\r\n      _isDown: true,\r\n      _numOfFingers: (e.touches && e.touches.length) || 1,\r\n      _distance: undefined,\r\n      _timestamp: Date.now(),\r\n    });\r\n  }\r\n\r\n  mouseUp({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (!this._mousePos[i]) {\r\n      this._mousePos[i] = {};\r\n    }\r\n    const down = this._mousePos[i]._isDown;\r\n    const numCurrentFingers =\r\n      (e.changedTouches && e.changedTouches.length) || 1;\r\n    const numOfFingers = Math.max(\r\n      this._mousePos[i]._numOfFingers,\r\n      numCurrentFingers\r\n    );\r\n    this._mousePos[i]._isDown = false;\r\n    this._mousePos[i]._numOfFingers -= numCurrentFingers;\r\n\r\n    if (!down || numOfFingers > 1) {\r\n      scene.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !(\r\n        (\r\n          Date.now() - this._mousePos[i]._timestamp < clickTime &&\r\n          Math.abs(this._mousePos[i].x - mx) < 5 &&\r\n          Math.abs(this._mousePos[i].y - my) < 5 &&\r\n          !i\r\n        ) // i === 0\r\n      )\r\n    ) {\r\n      scene.stopPropagation();\r\n    }\r\n  }\r\n\r\n  mouseOut({ button: i }) {\r\n    if (this._mousePos[i]) this._mousePos[i]._isDown = false;\r\n  }\r\n\r\n  mouseMove({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (\r\n      !this._mousePos[i] ||\r\n      !this._mousePos[i]._isDown ||\r\n      (e.which === 0 && !e.touches)\r\n    ) {\r\n      return;\r\n    }\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    if (e.touches && e.touches.length >= 2) {\r\n      const t = e.touches;\r\n      // get distance of two finger\r\n      const distance = Math.sqrt(\r\n        (t[0].pageX - t[1].pageX) * (t[0].pageX - t[1].pageX) +\r\n          (t[0].pageY - t[1].pageY) * (t[0].pageY - t[1].pageY)\r\n      );\r\n      if (this._mousePos[i]._distance === undefined) {\r\n        if (distance > 0) {\r\n          this._mousePos[i]._distance = distance;\r\n          this._mousePos[i]._czoom = this.toCam.zoom;\r\n        }\r\n      } else {\r\n        this.toCam.zoom = Math.max(\r\n          this.config.zoomMin,\r\n          Math.min(\r\n            this.config.zoomMax,\r\n            (this._mousePos[i]._czoom * distance) / this._mousePos[i]._distance\r\n          )\r\n        );\r\n\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n      return;\r\n    } else {\r\n      this._mousePos[i]._distance = undefined;\r\n      const viewMatrix = scene.camera\r\n        .viewportByCam(arguments[0], this.toCam)\r\n        .invert();\r\n      const [ox, oy] = viewMatrix.transformPoint(\r\n        this._mousePos[i].x * scale,\r\n        this._mousePos[i].y * scale\r\n      );\r\n      const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n      this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n      this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n      this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n    }\r\n  }\r\n\r\n  mouseWheel({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (this.config.preventDefault) e.preventDefault();\r\n    if (this.config.enabled) {\r\n      const scale = scene.additionalModifier.scaleCanvas;\r\n      const [ox, oy] = scene.camera\r\n        .viewportByCam(arguments[0], this.toCam)\r\n        .invert()\r\n        .transformPoint(mx * scale, my * scale);\r\n      const wheelData = e.wheelDelta || e.deltaY * -1;\r\n      if (wheelData / 120 > 0) {\r\n        this.zoomIn();\r\n        const [nx, ny] = this._getViewportByCam(this.toCam)\r\n          .invert()\r\n          .transformPoint(mx * scale, my * scale);\r\n        this.toCam.x -= nx - ox;\r\n        this.toCam.y -= ny - oy;\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      } else {\r\n        this.zoomOut(arguments[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  hasCamChanged() {\r\n    const t = this.config.tween || 1;\r\n    return (\r\n      Math.abs(this.toCam.x - this._scene.camera.cam.x) >= Number.EPSILON * t ||\r\n      Math.abs(this.toCam.y - this._scene.camera.cam.y) >= Number.EPSILON * t ||\r\n      Math.abs(this.toCam.zoom - this._scene.camera.cam.zoom) >= Number.EPSILON * t\r\n    );\r\n  }\r\n\r\n  fixedUpdate({ scene, output, timePassed, lastCall }) {\r\n    if (this.config.tween && !this._instant && this.hasCamChanged()) {\r\n      scene.camera.cam.x += (this.toCam.x - scene.camera.cam.x) / this.config.tween;\r\n      scene.camera.cam.y += (this.toCam.y - scene.camera.cam.y) / this.config.tween;\r\n      scene.camera.cam.zoom += (this.toCam.zoom - scene.camera.cam.zoom) / this.config.tween;\r\n      if (lastCall) {\r\n        scene.additionalModifier.cam = this.cam;\r\n        if (this.config.callResize) {\r\n          scene.resize();\r\n        } else {\r\n          scene.cacheClear();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  update({ scene }) {\r\n    if ((!this.config.tween || this._instant) && this.hasCamChanged()) {\r\n      this._instant = false;\r\n      scene.camera.cam = Object.assign({}, this.toCam);\r\n      if (this.config.callResize) {\r\n        scene.resize();\r\n      } else {\r\n        scene.cacheClear();\r\n      }\r\n    }\r\n  }\r\n\r\n  camInstant() {\r\n    this._instant = true;\r\n  }\r\n\r\n  resize(args) {\r\n    this.toCam = scene.camera.clampView(args, this.toCam);\r\n  }\r\n\r\n  zoomToNorm() {\r\n    this.toCam.zoom = 1;\r\n    return this;\r\n  }\r\n  zoomIn() {\r\n    this.toCam.zoom = Math.min(\r\n      this.config.zoomMax,\r\n      this.toCam.zoom * this.config.zoomFactor\r\n    );\r\n    return this;\r\n  }\r\n  zoomOut(args) {\r\n    this.toCam.zoom = Math.max(\r\n      this.config.zoomMin,\r\n      this.toCam.zoom / this.config.zoomFactor\r\n    );\r\n    this.toCam = this._scene.camera.clampView(args, this.toCam);\r\n    return this;\r\n  }\r\n}\r\n","import Callback from \"./Middleware/Camera.mjs\";\r\nimport CameraControl from \"./Middleware/CameraControl.mjs\";\r\nimport CameraControlSecondButton from \"./Middleware/CameraControlSecondButton.mjs\";\r\nimport Click from \"./Middleware/Click.mjs\";\r\nimport Element from \"./Middleware/Element.mjs\";\r\nimport Events from \"./Middleware/Events.mjs\";\r\nimport LoadingScreen from \"./Middleware/LoadingScreen.mjs\";\r\nimport Norm from \"./Middleware/Norm.mjs\";\r\nimport TimingAudio from \"./Middleware/TimingAudio.mjs\";\r\nimport TimingDefault from \"./Middleware/TimingDefault.mjs\";\r\n\r\nexport default {\r\n  Callback,\r\n  CameraControl,\r\n  CameraControlSecondButton,\r\n  Click,\r\n  Element,\r\n  Events,\r\n  LoadingScreen,\r\n  Norm,\r\n  TimingAudio,\r\n  TimingDefault,\r\n};\r\n","import CameraControl from \"./CameraControl.mjs\";\r\n\r\nexport default class CameraControlSecondButton extends CameraControl {\r\n  enabled = true;\r\n\r\n  mouseUp({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (!this._mousePos[i]) {\r\n      this._mousePos[i] = {};\r\n    }\r\n    const down = this._mousePos[i]._isDown;\r\n    const numCurrentFingers =\r\n      (e.changedTouches && e.changedTouches.length) || 1;\r\n    const numOfFingers = Math.max(\r\n      this._mousePos[i]._numOfFingers,\r\n      numCurrentFingers\r\n    );\r\n    this._mousePos[i]._isDown = false;\r\n    this._mousePos[i]._numOfFingers -= numCurrentFingers;\r\n\r\n\r\n    if (!down || numOfFingers > 1) {\r\n      scene.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    if (!(\r\n      Date.now() - this._mousePos[i]._timestamp < clickTime &&\r\n      Math.abs(this._mousePos[i].x - mx) < 5 &&\r\n      Math.abs(this._mousePos[i].y - my) < 5 &&\r\n      !i // i === 0\r\n    )) {\r\n      scene.stopPropagation();\r\n      const [x, y] = this.transformPoint(mx, my);\r\n      const [ox, oy] = this.transformPoint(\r\n        this._mousePos[i].x,\r\n        this._mousePos[i].y\r\n      );\r\n      scene.map('region',{\r\n          event: e,\r\n          x1: Math.min(ox, x),\r\n          y1: Math.min(oy, y),\r\n          x2: Math.max(ox, x),\r\n          y2: Math.max(oy, y),\r\n          fromX: ox,\r\n          fromY: oy,\r\n          toX: x,\r\n          toY: y\r\n        });\r\n    }\r\n  }\r\n  \r\n  mouseMove({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (\r\n      !this._mousePos[i] ||\r\n      !this._mousePos[i]._isDown ||\r\n      (e.which === 0 && !e.touches)\r\n    ) {\r\n      return;\r\n    }\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    if (e.touches && e.touches.length >= 2) {\r\n      const t = e.touches;\r\n      // get distance of two finger\r\n      const distance = Math.sqrt(\r\n        (t[0].pageX - t[1].pageX) * (t[0].pageX - t[1].pageX) +\r\n          (t[0].pageY - t[1].pageY) * (t[0].pageY - t[1].pageY)\r\n      );\r\n      if (this._mousePos[i]._distance === undefined) {\r\n        if (distance > 0) {\r\n          this._mousePos[i]._distance = distance;\r\n          this._mousePos[i]._czoom = this.toCam.zoom;\r\n        }\r\n      } else {\r\n        this.toCam.zoom = Math.max(\r\n          this.config.zoomMin,\r\n          Math.min(\r\n            this.config.zoomMax,\r\n            (this._mousePos[i]._czoom * distance) / this._mousePos[i]._distance\r\n          )\r\n        );\r\n\r\n        const viewMatrix = scene.camera.viewportByCam(arguments[0], this.toCam).invert();\r\n        const [ox, oy] = viewMatrix.transformPoint(\r\n          this._mousePos[i].x * scale,\r\n          this._mousePos[i].y * scale\r\n        );\r\n        const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n        this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n        this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n      return;\r\n    } else {\r\n      this._mousePos[i]._distance = undefined;\r\n      \r\n      if (i === 2) {\r\n      const viewMatrix = scene.camera\r\n        .viewportByCam(arguments[0], this.toCam)\r\n        .invert();\r\n      const [ox, oy] = viewMatrix.transformPoint(\r\n        this._mousePos[i].x * scale,\r\n        this._mousePos[i].y * scale\r\n      );\r\n      const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n      this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n      this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n      this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n    }\r\n    \r\n    if (\r\n      i === 0 &&\r\n      scene.has('regionMove') &&\r\n      !(\r\n        Date.now() - this._mousePos[i]._timestamp < clickTime &&\r\n        Math.abs(this._mousePos[i].x - mx) < 5 &&\r\n        Math.abs(this._mousePos[i].y - my) < 5\r\n      ) &&\r\n      (!e.touches || e.touches.length === 1)\r\n    ) {\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n      const [ox, oy] = scene.transformPoint(\r\n        this._mousePos[i].x,\r\n        this._mousePos[i].y\r\n      );\r\n      scene.map('regionMove', {\r\n        event: e,\r\n        x1: Math.min(ox, x),\r\n        y1: Math.min(oy, y),\r\n        x2: Math.max(ox, x),\r\n        y2: Math.max(oy, y),\r\n        fromX: ox,\r\n        fromY: oy,\r\n        toX: x,\r\n        toY: y\r\n      });\r\n    }\r\n  }\r\n}","export default class Click {\r\n  enabled = true;\r\n  /*\r\n    _doubleClickElementTimer = undefined;\r\n  */\r\n  constructor({ doubleClickDetectInterval = 350 }) {\r\n    this._doubleClickDetectInterval = doubleClickDetectInterval;\r\n  }\r\n\r\n  mouseUp({ event, position }) {\r\n    const param = { event, position };\r\n    if (scene.has(\"doubleClick\")) {\r\n      if (this._doubleClickElementTimer) {\r\n        clearTimeout(this._doubleClickElementTimer);\r\n        this._doubleClickElementTimer = 0;\r\n        scene.map(\"doubleClick\", param);\r\n      } else {\r\n        this._doubleClickElementTimer = setTimeout(() => {\r\n          this._doubleClickElementTimer = 0;\r\n          scene.map(\"click\", param);\r\n        }, this._doubleClickDetectInterval);\r\n      }\r\n    } else {\r\n      scene.map(\"click\", param);\r\n    }\r\n  }\r\n}\r\n","export default class Element {\r\n  enabled = true;\r\n  /*\r\n  _clickIntend = false;\r\n  _hoverIntend = false;\r\n  _hasDetectImage = false;\r\n  _doubleClickElementTimer = undefined;\r\n  */\r\n  constructor({ doubleClickDetectInterval = 350 }) {\r\n    this._doubleClickDetectInterval = doubleClickDetectInterval;\r\n  }\r\n\r\n  isDrawFrame() {\r\n    return this._hasDetectImage ? 1 : 0;\r\n  }\r\n\r\n  _dispatchEvent(scene, isClick, param) {\r\n    if (isClick) {\r\n      if (scene.has('doubleClickElement')) {\r\n        if (this._doubleClickElementTimer) {\r\n          clearTimeout(this._doubleClickElementTimer);\r\n          this._doubleClickElementTimer = 0;\r\n          scene.map('doubleClickElement', param);\r\n        } else {\r\n          this._doubleClickElementTimer = setTimeout(() => {\r\n            this._doubleClickElementTimer = 0;\r\n            scene.map('clickElement', param);\r\n          }, this._doubleClickDetectInterval);\r\n        }\r\n      } else {\r\n        scene.map('clickElement', param);\r\n      }\r\n    } else {\r\n      scene.map('hoverElement', param);\r\n    }\r\n  }\r\n\r\n  _dispatchNonEvent(scene, isClick, param) {\r\n    if (isClick) {\r\n      if (scene.has('doubleClickNonElement')) {\r\n        if (this._doubleClickElementTimer) {\r\n          clearTimeout(this._doubleClickElementTimer);\r\n          this._doubleClickElementTimer = undefined;\r\n          scene.map('doubleClickNonElement', param);\r\n        } else {\r\n          this._doubleClickElementTimer = setTimeout(() => {\r\n            this._doubleClickElementTimer = undefined;\r\n            scene.map('clickNonElement', param);\r\n          }, this._doubleClickDetectInterval);\r\n        }\r\n      } else {\r\n        scene.map('clickNonElement', param);\r\n      }\r\n    } else {\r\n      scene.map('hoverNonElement', param);\r\n    }\r\n  }\r\n\r\n  initSprite({ scene, output, layerManager, canvasId }) {\r\n    this._hasDetectImage = false;\r\n    if (this._clickIntend || this._hoverIntend) {\r\n      const isClick = !!this._clickIntend;\r\n      const { mx, my } = this._clickIntend || this._hoverIntend;\r\n      const scale = scene.additionalModifier.scaleCanvas;\r\n      const ctx = output.context[canvasId];\r\n      const cx = Math.round(mx / scale);\r\n      const cy = Math.round(my / scale);\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n\r\n      ctx.save();\r\n      ctx.setTransform(...scene.viewport().m);\r\n      let found = 0;\r\n      layerManager.forEach(\r\n        ({ layerId, element, isFunction, elementId }) => {\r\n          if (!isFunction) {\r\n            const a = element.detect(ctx, cx, cy);\r\n            if (a === \"c\") {\r\n              found = \"c\";\r\n            } else if (a) {\r\n              found = { layerId, element: a, elementId };\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      );\r\n      ctx.restore();\r\n\r\n      if (found === \"c\") {\r\n        this._hasDetectImage = true;\r\n      } else {\r\n        this._clickIntend = false;\r\n        this._hoverIntend = false;\r\n        const param = {\r\n          mx,\r\n          my,\r\n          x,\r\n          y\r\n        };\r\n        if (found) {\r\n          Object.assign(param, found);\r\n          this._dispatchEvent(scene, isClick, param);\r\n        } else {\r\n          this._dispatchNonEvent(scene, isClick, param);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  draw({\r\n    engine,\r\n    scene,\r\n    layerManager,\r\n    output,\r\n    canvasId\r\n  }) {\r\n    if (!canvasId && this._hasDetectImage) {\r\n      const isClick = !!this._clickIntend;\r\n      const { mx, my } = this._clickIntend || this._hoverIntend;\r\n      const scale = scene.additionalModifier.scaleCanvas;\r\n      const ctx = output.context[canvasId];\r\n      const cx = Math.round(mx / scale);\r\n      const cy = Math.round(my / scale);\r\n      const [x, y] = this.transformPoint(mx, my);\r\n      const param = {\r\n        mx,\r\n        my,\r\n        x,\r\n        y\r\n      };\r\n\r\n      const oldISE = ctx.imageSmoothingEnabled;\r\n      ctx.imageSmoothingEnabled = false;\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n      ctx.save();\r\n\r\n      ctx.setTransform(...scene.viewport().m);\r\n\r\n      layerManager.forEach(({ layerId, element, isFunction, elementId }) => {\r\n        if (!isFunction) {\r\n          const color = `rgb(${elementId & 0xff}, ${(elementId & 0xff00) >>\r\n            8}, ${layerId & 0xff})`;\r\n          element.detectDraw(ctx, color);\r\n        }\r\n      }, 0);\r\n      ctx.restore();\r\n      ctx.imageSmoothingEnabled = oldISE;\r\n      engine.normContext(ctx);\r\n\r\n      this._clickIntend = false;\r\n      this._hoverIntend = false;\r\n\r\n      const p = ctx.getImageData(cx, cy, 1, 1).data;\r\n      if (p[3]) {\r\n        param.layerId = p[2];\r\n        param.elementId = p[0] + (p[1] << 8);\r\n        param.element = layerManager\r\n          .getById(param.layerId)\r\n          .getById(param.elementId);\r\n        this._dispatchEvent(scene, isClick, param);\r\n      } else {\r\n        this._dispatchNonEvent(scene, isClick, param);\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseUp({scene, position: [mx, my]}) {\r\n    this._clickIntend = scene.has('clickElement') && { mx, my };\r\n  }\r\n\r\n  mouseMove({scene, position: [mx, my]}) {\r\n    this._hoverIntend = scene.has('hoverElement') && { mx, my };\r\n  }\r\n}\r\n","export default class Events {\r\n  enabled = true;\r\n  type = \"events\";\r\n\r\n  init({ output, scene }) {\r\n    const element = output.canvas[0];\r\n\r\n    const events = scene.map(\"events\");\r\n    events.push(\r\n      [\r\n        scene.value(\"preventDefault\") && [\r\n          [\"contextmenu\"],\r\n          e => e.preventDefault()\r\n        ],\r\n        scene.has(\"mouseDown\") && [\r\n          [\"touchstart\", \"mousedown\"],\r\n          event => {\r\n            if (scene.value(\"preventDefault\")) event.preventDefault();\r\n            scene.pipeBack(\"mouseDown\", {\r\n              event,\r\n              position: this.getMousePosition({event}),\r\n              button: this.getMouseButton({event})\r\n            });\r\n          }\r\n        ],\r\n        scene.has(\"mouseUp\") && [\r\n          [\"touchend\", \"mouseup\"],\r\n          event =>{\r\n            if (scene.value(\"preventDefault\")) event.preventDefault();\r\n            scene.pipeBack(\"mouseUp\", {\r\n              event,\r\n              position: this.getMousePosition({event}),\r\n              button: this.getMouseButton({event})\r\n            })\r\n          }\r\n        ],\r\n        scene.has(\"mouseOut\") && [\r\n          [\"touchendoutside\", \"mouseout\"],\r\n          event =>{\r\n            if (scene.value(\"preventDefault\")) event.preventDefault();\r\n            scene.pipeBack(\"mouseOut\", {\r\n              event,\r\n              position: this.getMousePosition({event}),\r\n              button: this.getMouseButton({event})\r\n            })\r\n          }\r\n        ],\r\n        scene.has(\"mouseMove\") && [\r\n          [\"touchmove\", \"mousemove\"],\r\n          event =>{\r\n            if (scene.value(\"preventDefault\")) event.preventDefault();\r\n            scene.pipeBack(\"mouseMove\", {\r\n              event,\r\n              position: this.getMousePosition({event}),\r\n              button: this.getMouseButton({event})\r\n            })\r\n          }\r\n        ],\r\n        scene.has(\"mouseWheel\") && [\r\n          [\"wheel\"],\r\n          event =>{\r\n            if (scene.value(\"preventDefault\")) event.preventDefault();\r\n            scene.pipeBack(\"mouseWheel\", {\r\n              event,\r\n              position: this.getMousePosition({event}),\r\n              button: this.getMouseButton({event})\r\n            })\r\n          }\r\n        ]\r\n      ].filter(v => v)\r\n    );\r\n\r\n    this._events = events\r\n      .filter(Array.isArray)\r\n      .reduce((acc, cur) => {\r\n        acc.push.apply(acc, cur);\r\n      }, [])\r\n      .map(([events, func]) =>\r\n        events.map(e => ({\r\n          n: element,\r\n          e: e,\r\n          f: func\r\n        }))\r\n      )\r\n      // workaround for .flat(1) for edge\r\n      .reduce((acc, cur) => {\r\n        if (Array.isArray(cur)) {\r\n          acc.push.apply(acc, cur);\r\n        } else {\r\n          acc.push(cur);\r\n        }\r\n        return acc;\r\n      }, []);\r\n\r\n    this._events.forEach(v => {\r\n      v.n.addEventListener(v.e, v.f, true);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._events.forEach(v => {\r\n      v.n.removeEventListener(v.e, v.f, true);\r\n    });\r\n    this._events = [];\r\n  }\r\n\r\n  getMousePosition({event: e}) {\r\n    let touches;\r\n    if (e.touches && e.touches.length > 0) {\r\n      touches = e.targetTouches;\r\n    } else if (e.changedTouches && e.changedTouches.length > 0) {\r\n      touches = e.changedTouches;\r\n    }\r\n    if (touches) {\r\n      const rect = e.target.getBoundingClientRect();\r\n      const length = touches.length;\r\n      touches = Array.from(touches);\r\n      return [\r\n        touches.reduce((sum, v) => sum + v.pageX, 0) / length - rect.left,\r\n        touches.reduce((sum, v) => sum + v.pageY, 0) / length - rect.top\r\n      ];\r\n    }\r\n    if (e.offsetX === undefined) {\r\n      const rect = e.target.getBoundingClientRect();\r\n      return [e.clientX - rect.left, e.clientY - rect.top];\r\n    }\r\n    return [e.offsetX, e.offsetY];\r\n  }\r\n\r\n  \r\n  getMouseButton({event: e}) {\r\n    return this.camConfig.alternative\r\n      ? e.which\r\n        ? e.which - 1\r\n        : e.button || 0\r\n      : 0;\r\n  }\r\n\r\n\r\n}\r\n","export default class LoadingScreen {\r\n  enabled = true;\r\n  loading({ output, progress }) {\r\n    const ctx = output.context[0];\r\n    const loadedHeight =\r\n      typeof progress === \"number\"\r\n        ? Math.max(1, progress * output.height)\r\n        : output.height;\r\n    ctx.globalCompositeOperation = \"source-over\";\r\n    ctx.globalAlpha = 1;\r\n    ctx.clearRect(0, 0, output.width, output.height);\r\n    ctx.fillStyle = \"#aaa\";\r\n    ctx.fillRect(\r\n      0,\r\n      output.height / 2 - loadedHeight / 2,\r\n      output.width,\r\n      loadedHeight\r\n    );\r\n    ctx.font = \"20px Georgia\";\r\n    ctx.fillStyle = \"#fff\";\r\n    ctx.textAlign = \"left\";\r\n    ctx.textBaseline = \"bottom\";\r\n\r\n    ctx.fillText(\r\n      isNaN(parseFloat(progress))\r\n        ? progress\r\n        : \"Loading \" + Math.round(100 * progress) + \"%\",\r\n      10 + Math.random() * 3,\r\n      output.height - 10 + Math.random() * 3\r\n    );\r\n  }\r\n}\r\n","export default class Norm {\r\n  enabled = true;\r\n  viewport({ engine }, matrix) {\r\n    const hw = engine.getWidth() / 2;\r\n    const hh = engine.getHeight() / 2;\r\n    const scale = engine.getRatio() > 1 ? hw : hh;\r\n    return matrix.translate(hw, hh).scale(scale, scale);\r\n  }\r\n\r\n  additionalModifier({output, scene}) {\r\n    scene.cacheClear()\r\n    const additionalModifier = {\r\n      alpha: 1,\r\n      x: -1,\r\n      y: -1,\r\n      width: 2,\r\n      height: 2,\r\n      widthInPixel: output.width,\r\n      heightInPixel: output.height,\r\n      scaleCanvas: output.width / output.canvas[0].clientWidth\r\n    };\r\n    const [x1, y1] = scene.transformPoint(0, 0, 1);\r\n    const [x2, y2] = scene.transformPoint(output.width, output.height, 1);\r\n    additionalModifier.visibleScreen = {\r\n      x: x1,\r\n      y: y1,\r\n      width: x2 - x1,\r\n      height: y2 - y1\r\n    };\r\n    const transformInvert = scene.viewport({\r\n      x: 0,\r\n      y: 0,\r\n      zoom: 1\r\n    }).invert();\r\n    const [sx1, sy1] = transformInvert.transformPoint(0, 0, 1);\r\n    const [sx2, sy2] = transformInvert.transformPoint(\r\n      output.width,\r\n      output.height,\r\n      1\r\n    );\r\n    additionalModifier.fullScreen = {\r\n      x: sx1,\r\n      y: sy1,\r\n      width: sx2 - sx1,\r\n      height: sy2 - sy1\r\n    };\r\n  }\r\n}\r\n","import TimingDefault from \"./TimingDefault.mjs\";\r\n\r\nexport default class TimingAudio extends TimingDefault {\r\n  enabled = true;\r\n  constructor(configuration = {}) {\r\n    super(configuration);\r\n    this._maxSkippedTickChunk = Number.POSITIVE_INFINITY;\r\n    this._audioStartTime = null;\r\n    this._audioPosition = null;\r\n    this._enableAndroidHack = false;\r\n    this._audioElement = this._configuration.audioElement;\r\n  }\r\n\r\n  get audioElement() {\r\n    return this._audioElement;\r\n  }\r\n\r\n  init() {\r\n    if (this._audioElement) {\r\n      // Android hack\r\n      if (typeof MediaController === \"function\") {\r\n        this._audioElement.controller = new MediaController();\r\n        this._enableAndroidHack = true;\r\n      }\r\n      this._audioElement.preload = \"auto\";\r\n      return new Promise(resolve => {\r\n        let canplaythrough = () => {\r\n          this._audioElement.removeEventListener(\r\n            \"canplaythrough\",\r\n            canplaythrough\r\n          );\r\n          let playPromise = this._audioElement.play();\r\n          if (playPromise) {\r\n            playPromise.catch(e => {});\r\n          }\r\n          resolve();\r\n        };\r\n        this._audioElement.addEventListener(\"canplaythrough\", canplaythrough);\r\n        this._audioElement.load();\r\n      });\r\n    }\r\n  }\r\n\r\n  endTime() {\r\n    return this._audioElement.duration * 1000;\r\n  }\r\n\r\n  currentTime() {\r\n    let currentTime = super.currentTime();\r\n    if (this._audioElement) {\r\n      const currentAudioTime =\r\n        (this._audioElement.ended\r\n          ? this._audioElement.duration\r\n          : this._audioElement.currentTime) * 1000;\r\n      // Android workaround\r\n      if (this._enableAndroidHack) {\r\n        if (this._audioStartTime === null) {\r\n          this._audioStartTime = currentTime;\r\n          this._audioPosition = currentAudioTime;\r\n          return currentAudioTime;\r\n        } else {\r\n          if (this._audioElement.controller.playbackState === \"playing\") {\r\n            if (currentAudioTime === this._audioPosition) {\r\n              return (\r\n                this._audioPosition +\r\n                Math.min(260, currentTime - this._audioStartTime)\r\n              );\r\n            } else if (\r\n              currentAudioTime - this._audioPosition < 500 &&\r\n              currentAudioTime > this._audioPosition &&\r\n              currentTime - this._audioStartTime < 350\r\n            ) {\r\n              this._audioStartTime =\r\n                this._audioStartTime + (currentAudioTime - this._audioPosition);\r\n              this._audioPosition = currentAudioTime;\r\n              return this._audioPosition + currentTime - this._audioStartTime;\r\n            }\r\n          }\r\n          this._audioStartTime = currentTime;\r\n          this._audioPosition = currentAudioTime;\r\n          return this._audioPosition;\r\n        }\r\n      } else {\r\n        return currentAudioTime;\r\n      }\r\n    } else {\r\n      return currentTime;\r\n    }\r\n  }\r\n\r\n  clampTime(timePassed) {\r\n    return timePassed;\r\n  }\r\n\r\n  shiftTime(timePassed) {\r\n    return 0;\r\n  }\r\n}\r\n"],"names":["_Pact","prototype","then","onFulfilled","onRejected","result","state","this","s","callback","_settle","v","e","o","_this","value","pact","bind","observer","_isSettledPact","thenable","_iteratorSymbol","Symbol","iterator","calc","c","obj","params","apply","toArray","Array","isArray","asyncIterator","Engine","canvasOrOptions","givenOptions","Error","getContext","canvas","options","Object","assign","_output","context","width","height","ratio","_events","_scene","_isSceneInitialized","_lastTimestamp","_recalculateCanvasIntend","_referenceRequestAnimationFrame","autoSize","defaultAutoSizeSettings","enabled","scaleLimitMin","scaleLimitMax","scaleFactor","referenceWidth","clientWidth","referenceHeight","clientHeight","currentScale","waitTime","currentWaitedTime","currentOffsetTime","offsetTimeLimitUp","offsetTimeLimitDown","registerResizeEvents","registerVisibilityEvents","setCanvasStyle","_autoSize","map","n","window","f","recalculateCanvas","push","document","handleVisibilityChange","_recalculateCanvas","forEach","index","_canvasCount","length","_drawFrame","from","clickToPlayAudio","playAudioOfScene","_reduceFramerate","reduceFramerate","addEventListener","switchScene","scene","sceneParameter","visibilityState","timing","audioElement","play","normContext","ctx","textBaseline","textAlign","globalAlpha","globalCompositeOperation","getWidth","getHeight","getRatio","getOutput","Math","round","_this2","style","resize","recalculateFPS","_this4","cancelAnimationFrame","Promise","resolve","requestAnimationFrame","timeBetweenFrames","_now","start","count","offsetTimeTarget","offsetTimeDelta","_realLastTimestamp","_mainLoop","i","test","update","body","stage","shouldContinue","reject","_resumeAfterTest","_resumeAfterBody","updateValue","_newScene","_sceneParameter","performance","now","Date","timestamp","isRecalculatedCanvas","_isOddFrame","max","_initializedStartTime","_promiseSceneDestroying","destroy","destroyParameterForNewScene","_this5","callInit","run","_runParameter","undefined","currentTime","timePassed","clampTime","shiftTime","moveFrame","_moveOnce","nowAutoSize","initSprites","drawFrame","isDrawFrame","detectFrame","move","draw","deltaTimestamp","targetTime","deltaFrame","delta","abs","min","callLoading","totalTimePassed","reset","runParameter","_this7","stop","_this11","removeEventListener","ImageManager","Images","loaded","add","Callbacks","self","Image","onload","isLoaded","substr","DOMURL","URL","webkitURL","svg","Blob","type","src","createObjectURL","onerror","img","crossOrigin","getLoaded","getCount","getImage","nameOrImage","isLoadedPromise","Layer","canvasIds","_layer","_isFunction","_start","_nextFree","_canvasIds","addElement","element","addElementForId","addElements","arrayOfElements","addElementsForIds","len","id","nextFree","concat","k","getById","elementId","getIdByElement","indexOf","deleteByElement","deleteById","isCanvasId","canvasId","includes","layerId","l","isFunction","layer","getElementsByTag","tag","ans","label","timelapsed","clear","LayerManager","_layers","addLayer","addLayers","numberOfLayer","newLayers","addLayerForId","addLayersForIds","ifNull","alternative","TimingDefault","configuration","_configuration","_tickChunk","tickChunk","_maxSkippedTickChunk","maxSkippedTickChunk","_tickChunkTolerance","tickChunkTolerance","init","maxTime","isChunked","hasOneChunkedFrame","calcFrames","floor","Scene","_layerManager","_totalTimePassed","_imageManager","configurationClassOrObjects","middlewares","middlewareByType","middleware","objs","_middleware","_all","filter","has","command","defaultValue","func","_param","fullParams","pipe","res","_stopPropagation","pipeBack","pipeMax","_this3","newRes","pipeAsync","target","check","step","_cycle","next","done","return","_fixup","TypeError","values","array","_forTo","stopPropagation","cacheClear","_transform","_transformInvert","viewport","_engine","Transform","transformPoint","x","y","scale","_additionalModifier","scaleCanvas","clone","invert","parameter","engine","images","all","_initDone","updateAdditionalModifier","alpha","output","widthInPixel","heightInPixel","visibleScreen","fullScreen","_this6","_this8","_destroyEvents","additionalParameter","imageManager","layerManager","args","_endTime","progress","fixedUpdate","lastCall","_resetIntend","frames","calcFrame","animate","save","setTransform","m","_this9","restore","_this10","_callMiddleware","resetIntend","layers","configurationClassOrObject","reduce","middlewareCommandList","keys","_camera","_timing","events","additionalModifier","Wait","duration","sprite","time","Sequence","timeWait","sequences","shift","sequence","thisTimeWait","position","arr","lastTimestamp","sequencePosition","b","hasOwnProperty","find","seq","runSequence","timeLeft","_TIMELAPSE_TO_FORCE_DISABLE","_TIMELAPSE_TO_STOP","_TIMELAPSE_TO_REMOVE","is_difference","disableVote","restTime","Infinity","Circle","givenParameter","_parseParameterList","_getParameterList","_needInit","parameterList","name","d","_getBaseParameterList","animation","isClickable","rotation","rotationInRadian","rotationInDegree","scaleX","scaleY","compositeOperation","color","timepassed","_detectHelper","moveToCenter","a","hw","hh","translate","rotate","beginPath","rect","closePath","isPointInPath","detectDraw","detect","arc","PI","fillStyle","fill","Callback","_timePassed","_deltaTime","Group","finished","spriteFinished","_Circle","detectImage","Canvas","_currentGridSize","canvasWidth","canvasHeight","gridSize","norm","setParameter","_generateTempCanvas","w","h","_temp_canvas","createElement","_tctx","normalizeFullScreen","oldTempCanvas","drawImage","_Group","wh","tw","th","cam","zoom","Emitter","classToEmit","call","FastBlur","darker","pixel","ceil","targetW","targetH","fillRect","additionalBlur","clearRect","oldValue","imageSmoothingEnabled","_currentTint","image","CENTER","frameX","frameY","frameWidth","frameHeight","normCover","normToScreen","clickExact","tint","_normScale","_tintCacheKey","join","_temp_context","sX","sY","isTopLeft","LEFT_TOP","tctx","Text","givenParameters","text","font","borderColor","lineWidth","fillText","strokeStyle","strokeText","tinycolorf","tinycolor","Particle","_currentScaleX","_currentPixelSmoothing","getGradientImage","r","g","cr","cg","cb","_Gradient","generateGradientImage","txtc","grad","createRadialGradient","gradientSize","addColorStop","toRgb","Path","oldPath","path2D","Path2D","polyfill","head","getElementsByTagName","script","appendChild","stroke","getImageData","data","path","clip","fixed","changeToPathInit","to","pasition","_preprocessing","path2shapes","changeToPath","_lerp","pathFrom","pathTo","isPath","curve","moveTo","points","bezierCurveTo","Number","EPSILON","Rect","imageDataRGBA","stackblur","Scroller","characterList","class","StackBlur","_currentRadiusPart","onCanvas","radius","radiusPart","radiusScale","_FastBlur","imageData","putImageData","StarField","_starsX","_starsY","_starsZ","_starsOldX","_starsOldY","_starsNewX","_starsNewY","_starsEnabled","_starsLineWidth","moveX","moveY","moveZ","highScale","clampOrRandom","val","random","_centerX","_centerY","_scaleZ","moveStar","scaled_timepassed","firstPass","z","projectX","projectY","lw","ret","lineTo","initialized","moveDefault","moveBezier","copy","copyLength","moveColor","colorFrom","mix","colorTo","toString","movePath","ChangeTo","changeValues","ease","orgValue","isColor","isBezier","bezier","moveAlgorithm","t","End","EndDisabled","Forever","Aniobject","isDifference","If","ifCallback","AniobjectElse","AniObject","durationBetweenFrames","current","currentFrame","ImageFrame","frameNumber","framesToRight","Loop","times","timesOrg","Move","speed","targetX","targetY","hypotenuse","sqrt","_ChangeTo","Remove","Once","Shake","shakediff","shakeDiff","shakeDiffHalf","ShowOnce","showOnce","State","states","transitions","defaultState","delegateTo","currentStateName","currentState","isTransitioningToStateName","setState","UCFirstName","charAt","toUpperCase","slice","transitionName","Stop","StopDisabled","WaitDisabled","Camera","matrix","viewportByCam","cl","x1","y1","x2","y2","_w","_h","clampView","clampLimits","zoomToFullScreen","zoomTo","sx1","sy1","toCam","MIN_VALUE","CameraControl","config","_mousePos","zoomMax","zoomMin","zoomFactor","tween","callResize","camera","mouseDown","event","button","_cx","_cy","_isDown","_numOfFingers","touches","_distance","_timestamp","mouseUp","mx","my","down","numCurrentFingers","changedTouches","numOfFingers","clickTime","mouseOut","mouseMove","which","distance","pageX","pageY","_czoom","arguments","viewMatrix","ox","oy","nx","ny","mouseWheel","preventDefault","wheelData","wheelDelta","deltaY","zoomIn","_getViewportByCam","zoomOut","hasCamChanged","_instant","camInstant","zoomToNorm","CameraControlSecondButton","fromX","fromY","toX","toY","Click","doubleClickDetectInterval","_doubleClickDetectInterval","param","_doubleClickElementTimer","clearTimeout","setTimeout","Element","_hasDetectImage","_dispatchEvent","isClick","_dispatchNonEvent","initSprite","_clickIntend","_hoverIntend","cx","cy","found","oldISE","p","Events","getMousePosition","getMouseButton","acc","cur","targetTouches","getBoundingClientRect","sum","left","top","offsetX","clientX","clientY","offsetY","camConfig","LoadingScreen","loading","loadedHeight","isNaN","parseFloat","Norm","transformInvert","TimingAudio","POSITIVE_INFINITY","_audioStartTime","_audioPosition","_enableAndroidHack","_audioElement","MediaController","controller","preload","canplaythrough","playPromise","load","endTime","currentAudioTime","ended","playbackState"],"mappings":"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"}