{"version":3,"file":"animationvideo.mjs","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../func/calc.mjs","../func/toArray.mjs","../Engine.mjs","../ImageManager.mjs","../Layer.mjs","../LayerManager.mjs","../func/transform.mjs","../func/ifNull.mjs","../Middleware/TimingDefault.mjs","../Scene.mjs","../Animations/Wait.mjs","../Animations/Sequence.mjs","../Sprites/Circle.mjs","../Sprites/Callback.mjs","../Sprites/Group.mjs","../Sprites/Canvas.mjs","../Sprites/Emitter.mjs","../Sprites/FastBlur.mjs","../Sprites/Image.mjs","../Sprites/Text.mjs","../Sprites/Particle.mjs","../Sprites/Path.mjs","../Sprites/Rect.mjs","../Sprites/StackBlur.mjs","../Sprites.mjs","../Sprites/Scroller.mjs","../Sprites/StarField.mjs","../Animations/Callback.mjs","../Animations/ChangeTo.mjs","../Animations/End.mjs","../Animations/EndDisabled.mjs","../Animations/Forever.mjs","../Animations/If.mjs","../Animations/Image.mjs","../Animations/ImageFrame.mjs","../Animations/Loop.mjs","../Animations/Move.mjs","../Animations/Remove.mjs","../Animations/Once.mjs","../Animations/Shake.mjs","../Animations/ShowOnce.mjs","../Animations/State.mjs","../Animations/Stop.mjs","../Animations/StopDisabled.mjs","../Animations.mjs","../Animations/WaitDisabled.mjs","../func/Transform.mjs","../Middleware/Camera.mjs","../Middleware/CameraControl.mjs","../Middleware.mjs","../Middleware/CameraControlSecondButton.mjs","../Middleware/Click.mjs","../Middleware/Element.mjs","../Middleware/Event.mjs","../Middleware/LoadingScreen.mjs","../Middleware/Norm.mjs","../Middleware/TimingAudio.mjs"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","export default function calc(c, obj = null, ...params) {\n\treturn typeof(c) === \"function\" ? c.apply(obj,params) : c;\n}","export default function toArray(value)\t{\r\n\treturn (value === undefined || value === null ? [] : Array.isArray(value) ? value : [value]);\r\n}","import calc from \"./func/calc.mjs\";\nimport toArray from \"./func/toArray.mjs\";\n\nclass Engine {\n  constructor(canvasOrOptions) {\n    let givenOptions = canvasOrOptions;\n    if (typeof canvasOrOptions !== \"object\") {\n      throw new Error(\"No canvas given for Engine constructor\");\n    }\n    if (canvasOrOptions.getContext) {\n      givenOptions = {\n        canvas: canvasOrOptions,\n      };\n    } else if (!canvasOrOptions.canvas) {\n      throw new Error(\"No canvas given for Engine constructor\");\n    }\n    let options = Object.assign(\n      {},\n      /*\n      {\n         undefined is falsy - saves a few bytes\n        scene: null,\n        canvas: null,\n        autoSize: false,\n        clickToPlayAudio: false,\n        reduceFramerate: false\n      },\n      */\n      givenOptions\n    );\n\n    this._output = {\n      canvas: [],\n      context: [],\n      width: 0,\n      height: 0,\n      ratio: 1,\n    };\n\n    // list of binded events\n    this._events = [];\n\n    // the current _scene-object\n    this._scene = null;\n    // is a _scene ready for action?\n    this._isSceneInitialized = false;\n    // new _scene to initialize\n    // this._newScene = undefined;\n    // this._promiseSceneDestroying = undefined;\n\n    // time measurement\n    this._lastTimestamp = 0;\n    this._recalculateCanvasIntend = false;\n\n    // reference to\n    this._referenceRequestAnimationFrame = null;\n\n    // data about the output canvas\n    this._output.canvas = toArray(options.canvas);\n\n    if (options.autoSize) {\n      const defaultAutoSizeSettings = {\n        enabled: true,\n        scaleLimitMin: 1,\n        scaleLimitMax: 2.5,\n        scaleFactor: 1.07,\n        referenceWidth: () => this._output.canvas[0].clientWidth,\n        referenceHeight: () => this._output.canvas[0].clientHeight,\n        currentScale: 1,\n        waitTime: 100,\n        currentWaitedTime: 0,\n        currentOffsetTime: 0,\n        offsetTimeLimitUp: 300,\n        offsetTimeLimitDown: 300,\n        // undefined will be autodetect timing\n        // offsetTimeTarget: 25,\n        // offsetTimeDelta: 10,\n        registerResizeEvents: true,\n        registerVisibilityEvents: true,\n        setCanvasStyle: false,\n      };\n      if (typeof options.autoSize === \"object\") {\n        this._autoSize = Object.assign(\n          {},\n          defaultAutoSizeSettings,\n          options.autoSize\n        );\n      } else {\n        this._autoSize = defaultAutoSizeSettings;\n      }\n      if (this._autoSize.registerResizeEvents) {\n        this._events = [\"resize\", \"orientationchange\"].map((e) => ({\n          n: window,\n          e: e,\n          f: this.recalculateCanvas.bind(this),\n        }));\n      }\n      if (this._autoSize.registerVisibilityEvents) {\n        this._events.push({\n          n: document,\n          e: \"visibilitychange\",\n          f: this.handleVisibilityChange.bind(this),\n        });\n      }\n      this._recalculateCanvas();\n    } else {\n      this._output.width = this._output.canvas[0].width;\n      this._output.height = this._output.canvas[0].height;\n      this._output.ratio = this._output.width / this._output.height;\n    }\n    this._output.canvas.forEach((canvas, index) => {\n      this._output.context[index] = canvas.getContext(\"2d\");\n    });\n    this._canvasCount = this._output.canvas.length;\n    this._drawFrame = Array.from({ length: this._canvasCount }, (v) => 0);\n\n    if (options.clickToPlayAudio) {\n      this._events.push({\n        n: this._output.canvas[0],\n        e: \"click\",\n        f: this.playAudioOfScene.bind(this),\n      });\n    }\n\n    this._reduceFramerate = options.reduceFramerate;\n    // not needed because undefined is falsy\n    // this._isOddFrame = true\n\n    this._events.forEach((v) => {\n      v.n.addEventListener(v.e, v.f);\n    });\n\n    this.switchScene(options.scene, options.sceneParameter || {});\n  }\n\n  handleVisibilityChange() {\n    this._autoSize.enabled = !(document.visibilityState == \"hidden\");\n  }\n\n  playAudioOfScene() {\n    if (\n      this._isSceneInitialized &&\n      this._scene &&\n      this._scene.timing.audioElement\n    ) {\n      this._scene.timing.audioElement.play();\n    }\n  }\n\n  normContext(ctx) {\n    ctx.textBaseline = \"middle\";\n    ctx.textAlign = \"center\";\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n  }\n\n  getWidth() {\n    return this._output.width;\n  }\n\n  getHeight() {\n    return this._output.height;\n  }\n\n  getRatio() {\n    return this._output.ratio;\n  }\n\n  getOutput() {\n    return this._output;\n  }\n\n  recalculateCanvas() {\n    this._recalculateCanvasIntend = true;\n    return this;\n  }\n\n  _recalculateCanvas() {\n    if (this._autoSize) {\n      const width = calc(this._autoSize.referenceWidth);\n      const height = calc(this._autoSize.referenceHeight);\n      if (width <= 0 || height <= 0) {\n        return;\n      }\n      this._output.canvas.forEach((canvas) => {\n        canvas.width = Math.round(width / this._autoSize.currentScale);\n        canvas.height = Math.round(height / this._autoSize.currentScale);\n        if (this._autoSize.setCanvasStyle) {\n          canvas.style.width = `${width}px`;\n          canvas.style.height = `${height}px`;\n        }\n      });\n      this._autoSize.currentWaitedTime = 0;\n      this._autoSize.currentOffsetTime = 0;\n    }\n\n    this._output.width = this._output.canvas[0].width;\n    this._output.height = this._output.canvas[0].height;\n    this._output.ratio = this._output.width / this._output.height;\n\n    this.resize();\n  }\n\n  async recalculateFPS() {\n    if (this._referenceRequestAnimationFrame) {\n      window.cancelAnimationFrame(this._referenceRequestAnimationFrame);\n      this._referenceRequestAnimationFrame = false;\n    }\n    await new Promise((resolve) => requestAnimationFrame(resolve));\n    const start = this._now();\n    const count = 3;\n    for (let i = count; i--; ) {\n      await new Promise((resolve) => requestAnimationFrame(resolve));\n    }\n\n    const timeBetweenFrames = (this._now() - start) / count;\n    this._autoSize.offsetTimeTarget = timeBetweenFrames;\n    this._autoSize.offsetTimeDelta = timeBetweenFrames / 3;\n\n    if (this._referenceRequestAnimationFrame === false) {\n      this._realLastTimestamp = false;\n      this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n        this._mainLoop.bind(this)\n      );\n    }\n  }\n\n  resize() {\n    if (this._scene && this._scene.resize) {\n      this._scene.resize();\n    }\n    return this;\n  }\n\n  switchScene(scene, sceneParameter) {\n    if (scene) {\n      this._newScene = scene;\n      this._sceneParameter = sceneParameter;\n    }\n    return this;\n  }\n\n  _now() {\n    return window.performance ? performance.now() : Date.now();\n  }\n\n  _mainLoop(timestamp) {\n    if (!this._referenceRequestAnimationFrame) return;\n    this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n      this._mainLoop.bind(this)\n    );\n\n    let isRecalculatedCanvas =\n      this._recalculateCanvasIntend &&\n      (!this._reduceFramerate || !this._isOddFrame);\n\n    if (isRecalculatedCanvas) {\n      this._recalculateCanvas();\n      this._recalculateCanvasIntend = false;\n    }\n\n    for (let i = 0; i < this._canvasCount; i++) {\n      this._drawFrame[i] = Math.max(\n        this._drawFrame[i] - 1,\n        isRecalculatedCanvas ? 1 : 0\n      );\n    }\n\n    if (!this._realLastTimestamp) {\n      this._realLastTimestamp = timestamp;\n    }\n    if (!this._initializedStartTime) {\n      this._initializedStartTime = timestamp;\n    }\n\n    if (this._newScene && !this._promiseSceneDestroying) {\n      this._promiseSceneDestroying = Promise.resolve(\n        this._scene ? this._scene.destroy() : {}\n      );\n      this._promiseSceneDestroying.then((destroyParameterForNewScene) => {\n        this._newScene.callInit(\n          {\n            run: this._runParameter,\n            scene: this._sceneParameter,\n            destroy: destroyParameterForNewScene,\n          },\n          this\n        );\n        this._scene = this._newScene;\n        this._newScene = undefined;\n        this._promiseSceneDestroying = undefined;\n        this._isSceneInitialized = false;\n        this._lastTimestamp = this._scene.currentTime();\n        this._initializedStartTime = timestamp;\n      });\n    }\n\n    if (this._scene) {\n      if (this._reduceFramerate) {\n        this._isOddFrame = !this._isOddFrame;\n      }\n\n      if (!this._reduceFramerate || this._isOddFrame) {\n        let now = this._scene.currentTime();\n\n        // modify time by scene\n        // first set a min/max\n        let timePassed = this._scene.clampTime(now - this._lastTimestamp);\n        // then maybe shift to fit a framerate\n        const shiftTime = this._scene.shiftTime(timePassed);\n        timePassed = timePassed + shiftTime;\n        this._lastTimestamp = now + shiftTime;\n\n        if (this._isSceneInitialized) {\n          const moveFrame = timePassed !== 0 || this._moveOnce;\n          this._moveOnce = false;\n\n          const nowAutoSize = this._now();\n\n          if (this._output.canvas[0].width) {\n            for (let index = 0; index < this._canvasCount; index++) {\n              const ctx = this._output.context[index];\n              this.normContext(ctx);\n              this._scene.initSprites(index);\n              //this.normContext(ctx);\n            }\n          }\n\n          const drawFrame = this._scene.isDrawFrame(timePassed);\n          if (Array.isArray(drawFrame)) {\n            for (let i = 0; i < this._canvasCount; i++) {\n              this._drawFrame[i] = Math.max(\n                this._drawFrame[i],\n                drawFrame[i],\n                0\n              );\n            }\n          } else {\n            for (let i = 0; i < this._canvasCount; i++) {\n              this._drawFrame[i] = Math.max(this._drawFrame[i], drawFrame, 0);\n            }\n          }\n\n          if (moveFrame) {\n            this._scene.move(timePassed);\n          }\n\n          if (this._output.canvas[0].width) {\n            for (let index = 0; index < this._canvasCount; index++) {\n              if (this._drawFrame[index]) {\n                this._scene.draw(index);\n              }\n            }\n          }\n\n          if (this._autoSize && this._autoSize.enabled) {\n            const deltaTimestamp = timestamp - this._realLastTimestamp;\n\n            if (this._autoSize.currentWaitedTime < this._autoSize.waitTime) {\n              this._autoSize.currentWaitedTime += deltaTimestamp;\n            } else if (moveFrame) {\n              const targetTime =\n                this._autoSize.offsetTimeTarget *\n                (this._reduceFramerate ? 2 : 1);\n              const deltaFrame = this._now() - nowAutoSize;\n              const delta =\n                (Math.abs(deltaTimestamp - targetTime) >\n                Math.abs(deltaFrame - targetTime)\n                  ? deltaTimestamp\n                  : deltaFrame) - targetTime;\n              if (Math.abs(delta) <= this._autoSize.offsetTimeDelta) {\n                this._autoSize.currentOffsetTime =\n                  this._autoSize.currentOffsetTime >= 0\n                    ? Math.max(\n                        0,\n                        this._autoSize.currentOffsetTime -\n                          this._autoSize.offsetTimeDelta\n                      )\n                    : Math.min(\n                        0,\n                        this._autoSize.currentOffsetTime +\n                          this._autoSize.offsetTimeDelta\n                      );\n              } else {\n                if (\n                  delta < 0 &&\n                  this._autoSize.currentScale > this._autoSize.scaleLimitMin\n                ) {\n                  this._autoSize.currentOffsetTime += delta;\n                  if (\n                    this._autoSize.currentOffsetTime <=\n                    -this._autoSize.offsetTimeLimitDown\n                  ) {\n                    this._autoSize.currentScale = Math.max(\n                      this._autoSize.scaleLimitMin,\n                      this._autoSize.currentScale / this._autoSize.scaleFactor\n                    );\n                    this._recalculateCanvasIntend = true;\n                  }\n                } else if (\n                  delta > 0 &&\n                  this._autoSize.currentScale < this._autoSize.scaleLimitMax\n                ) {\n                  this._autoSize.currentOffsetTime += delta;\n                  if (\n                    this._autoSize.currentOffsetTime >=\n                    this._autoSize.offsetTimeLimitUp\n                  ) {\n                    this._autoSize.currentScale = Math.min(\n                      this._autoSize.scaleLimitMax,\n                      this._autoSize.currentScale * this._autoSize.scaleFactor\n                    );\n                    this._recalculateCanvasIntend = true;\n                  }\n                }\n              }\n            }\n          }\n        } else {\n          for (let i = 0; i < this._canvasCount; i++) {\n            this.normContext(this._output.context[i]);\n          }\n          this._isSceneInitialized = this._scene.callLoading({\n            timePassed: timestamp - this._realLastTimestamp,\n            totalTimePassed: timestamp - this._initializedStartTime,\n          });\n          if (this._isSceneInitialized) {\n            this._scene.reset();\n            this._lastTimestamp = this._scene.currentTime();\n            this._moveOnce = true;\n            if (this._autoSize) {\n              this._autoSize.currentWaitedTime = 0;\n            }\n          }\n        }\n      }\n    }\n    this._realLastTimestamp = timestamp;\n  }\n\n  async run(runParameter) {\n    this._runParameter = runParameter || {};\n\n    await this.stop();\n\n    this._realLastTimestamp = this._initializedStartTime = false;\n\n    if (this._autoSize && !this._autoSize.offsetTimeTarget) {\n      await this.recalculateFPS();\n    }\n\n    // First call ever\n    this._referenceRequestAnimationFrame = window.requestAnimationFrame(\n      this._mainLoop.bind(this)\n    );\n\n    return this;\n  }\n\n  async stop() {\n    window.cancelAnimationFrame(this._referenceRequestAnimationFrame);\n    this._referenceRequestAnimationFrame = null;\n    this._scene && (await this._scene.destroy());\n  }\n\n  async destroy() {\n    await this.stop();\n    this._events.forEach((v) => {\n      v.n.removeEventListener(v.e, v.f);\n    });\n    this._events = [];\n\n    return this;\n  }\n}\n\nexport default Engine;\n","class ImageManager {\n  constructor() {\n    this.Images = {};\n    this.count = 0;\n    this.loaded = 0;\n  }\n\n  static add(Images, Callbacks) {\n    const self = this || ImageManager;\n    for (const i in Images) {\n      if (!self.Images[i]) {\n        self.Images[i] = new window.Image();\n        self.Images[i].onload = function() {\n          self.loaded++;\n          if (Callbacks && typeof Callbacks === \"function\") {\n            if (self.isLoaded()) {\n              Callbacks();\n            }\n          } else if (Callbacks && typeof Callbacks[i] === \"function\") {\n            Callbacks[i](i, self.Images[i]);\n          }\n          if (self.resolve && self.isLoaded()) {\n            self.resolve();\n            self.resolve = null;\n          }\n        };\n        // crossOrigin makes more trouble in the browser and seems to cause slow downs\n        // self.Images[i].crossOrigin = \"anonymous\";\n        if (Images[i].substr(0, 4) === \"<svg\") {\n          const DOMURL = window.URL || window.webkitURL || window;\n          const svg = new window.Blob([Images[i]], { type: \"image/svg+xml\" });\n          self.Images[i].src = DOMURL.createObjectURL(svg);\n        } else {\n          if (/^(https?:)?\\/\\//.test(Images[i])) {\n            self.Images[i].onerror = () => {\n              // load again without crossOrigin\n              const img = new window.Image();\n              img.onload = self.Images[i].onload;\n              self.Images[i] = img;\n              self.Images[i].src = Images[i];\n            };\n            self.Images[i].crossOrigin = \"anonymous\";\n          }\n          self.Images[i].src = Images[i];\n        }\n        self.count++;\n      } else {\n        if (Callbacks && typeof Callbacks[i] === \"function\") {\n          Callbacks[i](i, self.Images[i]);\n        }\n      }\n    }\n    if (Callbacks && typeof Callbacks === \"function\" && self.isLoaded()) {\n      Callbacks();\n    }\n    if (self.resolve && self.isLoaded()) {\n      self.resolve();\n      self.resolve = null;\n    }\n    return self;\n  }\n\n  static reset() {\n    const self = this || ImageManager;\n    self.Images = {};\n    self.count = 0;\n    self.loaded = 0;\n    return self;\n  }\n\n  static getLoaded() {\n    return (this || ImageManager).loaded;\n  }\n\n  static getCount() {\n    return (this || ImageManager).count;\n  }\n\n  static isLoaded() {\n    const self = this || ImageManager;\n    return self.loaded === self.count;\n  }\n\n  static getImage(nameOrImage) {\n    return typeof nameOrImage === \"object\"\n      ? nameOrImage\n      : (this || ImageManager).Images[nameOrImage];\n  }\n\n  static isLoadedPromise() {\n    const self = this || ImageManager;\n    return self.isLoaded()\n      ? true\n      : new Promise((resolve, reject) => {\n          self.resolve = resolve;\n        });\n  }\n}\n\nImageManager.Images = {};\nImageManager.count = 0;\nImageManager.loaded = 0;\n\nexport default ImageManager;\n","class Layer {\n  constructor(canvasIds) {\n    this._layer = [];\n    this._isFunction = [];\n    this._start = 0;\n    this._nextFree = 0;\n    this._canvasIds =\n      canvasIds === undefined\n        ? []\n        : Array.isArray(canvasIds)\n        ? canvasIds\n        : [canvasIds];\n  }\n\n  addElement(element) {\n    this.addElementForId(element);\n    return element;\n  }\n\n  addElements(arrayOfElements) {\n    this.addElementsForIds(arrayOfElements);\n    return arrayOfElements;\n  }\n\n  addElementForId(element) {\n    let len = this._layer.length;\n    let id = this._nextFree;\n    this._layer[id] = element;\n    this._isFunction[id] = typeof element === \"function\";\n    if (len === id) {\n      len++;\n    }\n    let nextFree = this._nextFree + 1;\n    while (nextFree !== len && this._layer[nextFree]) {\n      nextFree++;\n    }\n    this._nextFree = nextFree;\n    if (this._start > id) {\n      this._start = id;\n    }\n    return id;\n  }\n\n  addElementsForIds(arrayOfElements) {\n    let len = this._layer.length;\n    let id = this._nextFree;\n    if (len === id) {\n      this._layer = this._layer.concat(arrayOfElements);\n      this._nextFree = this._layer.length;\n      arrayOfElements.forEach((v, k) => {\n        this._isFunction[len + k] = typeof v === \"function\";\n      });\n      return Array.from({ length: arrayOfElements.length }, (v, k) => k + len);\n    } else {\n      return arrayOfElements.map(element => this.addElement(element));\n    }\n  }\n\n  getById(elementId) {\n    return this._layer[elementId];\n  }\n\n  getIdByElement(element) {\n    return this._layer.indexOf(element);\n  }\n\n  deleteByElement(element) {\n    const elementId = this.getIdByElement(element);\n    if (elementId >= 0) {\n      this.deleteById(elementId);\n    }\n  }\n\n  deleteById(elementId) {\n    let len = this._layer.length - 1;\n    if (len > 0 && elementId === len) {\n      this._layer[elementId] = null;\n      while (len && !this._layer[len - 1]) {\n        len--;\n      }\n      this._layer.length = len;\n      this._isFunction.length = len;\n      this._nextFree = Math.min(this._nextFree, len);\n      this._start = Math.min(this._start, len);\n    } else if (this._layer[elementId]) {\n      this._layer[elementId] = null;\n      this._nextFree = Math.min(this._nextFree, elementId);\n      if (this._start === elementId) {\n        this._start = elementId + 1;\n      }\n    }\n  }\n\n  isCanvasId(canvasId) {\n    return (\n      canvasId === undefined ||\n      !this._canvasIds.length ||\n      this._canvasIds.includes(canvasId)\n    );\n  }\n\n  forEach(callback, layerId = 0) {\n    let index, element;\n    const l = this._layer.length;\n    for (index = this._start; index < l; index++) {\n      element = this._layer[index];\n      if (element) {\n        if (callback({\n          elementId: index,\n          layerId,\n          element,\n          isFunction: this._isFunction[index],\n          layer: this\n        }) === false) {\n          return\n        }\n      }\n    }\n  }\n\n  getElementsByTag (tag) {\n    let result = []\n    this.forEach(({element, isFunction}) => {\n      if (!isFunction) {\n        const ans = element.getElementsByTag(tag)\n        if (ans) {\n          result = result.concat(ans)\n        }\n      }\n    })\n    return result\n  }\n  \n  play(label = \"\", timelapsed = 0) {\n    this.forEach(\n      ({ element, isFunction }) =>\n        !isFunction && element.play(label, timelapsed)\n    );\n  }\n\n  count() {\n    let count = 0;\n    const l = this._layer.length;\n    for (let index = this._start; index < l; index++) {\n      if (this._layer[index]) count++;\n    }\n    return count;\n  }\n\n  clear() {\n    this._layer = [];\n    this._isFunction = [];\n    this._start = 0;\n    this._nextFree = 0;\n  }\n}\n\nexport default Layer;\n","import Layer from \"./Layer.mjs\";\n\nclass LayerManager {\n  constructor() {\n    this._layers = [];\n  }\n\n  addLayer(canvasIds) {\n    this._layers[this._layers.length] = new Layer(canvasIds);\n    return this._layers[this._layers.length - 1];\n  }\n\n  addLayers(numberOfLayer = 1, canvasIds) {\n    let newLayers = Array.from({ length: numberOfLayer }, v => new Layer(canvasIds));\n    this._layers = this._layers.concat(newLayers);\n    return newLayers;\n  }\n\n  addLayerForId(canvasIds) {\n    this._layers[this._layers.length] = new Layer(canvasIds);\n    return this._layers.length - 1;\n  }\n\n  addLayersForIds(numberOfLayer = 1, canvasIds) {\n    const result = Array.from(\n      { length: numberOfLayer },\n      (v, k) => k + this._layers.length\n    );\n    this._layers = this._layers.concat(\n      Array.from({ length: numberOfLayer }, v => new Layer(canvasIds))\n    );\n    return result;\n  }\n\n  getById(layerId) {\n    return this._layers[layerId];\n  }\n\n  forEach(callback, canvasId) {\n    let i;\n    const l = this._layers.length;\n    for (i = 0; i < l; i++) {\n      if (this._layers[i].isCanvasId(canvasId)) {\n        if (this._layers[i].forEach(callback, i) === false) {\n          break;\n        }\n      }\n    }\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.forEach(\n      ({ element, isFunction }) =>\n        !isFunction && element.play(label, timelapsed)\n    );\n  }\n\n  getElementsByTag (tag) {\n    let result = []\n    this.forEach(({element, isFunction}) => {\n      if (!isFunction) {\n        const ans = element.getElementsByTag(tag)\n        if (ans) {\n          result = result.concat(ans)\n        }\n      }\n    })\n    return result\n  }\n\n  count() {\n    return this._layers.length;\n  }\n\n  clear() {\n    this._layers = [];\n  }\n}\n\nexport default LayerManager;","// https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js\n// Last updated November 2011\n// By Simon Sarris\n// www.simonsarris.com\n// sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    var t = new Transform();\n//    t.rotate(5);\n//    var m = t.m;\n//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n// Remember that this does not account for any CSS transforms applied to the canvas\n//https://www.npmjs.com/package/canvas-get-transform\nfunction Transform() {\n  this.reset();\n}\n\nTransform.prototype.reset = function() {\n  this.m = [1,0,0,1,0,0];\n  return this;\n};\n\nTransform.prototype.multiply = function(matrix) {\n  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  this.m[4] = dx;\n  this.m[5] = dy;\n  return this;\n};\n\nTransform.prototype.invert = function() {\n  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n  var m0 = this.m[3] * d;\n  var m1 = -this.m[1] * d;\n  var m2 = -this.m[2] * d;\n  var m3 = this.m[0] * d;\n  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n  this.m[0] = m0;\n  this.m[1] = m1;\n  this.m[2] = m2;\n  this.m[3] = m3;\n  this.m[4] = m4;\n  this.m[5] = m5;\n  return this;\n};\n\nTransform.prototype.rotate = function(rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  return this;\n};\n\nTransform.prototype.translate = function(x, y) {\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n  return this;\n};\n\nTransform.prototype.scale = function(sx, sy) {\n  this.m[0] *= sx;\n  this.m[1] *= sx;\n  this.m[2] *= sy;\n  this.m[3] *= sy;\n  return this;\n};\n\nTransform.prototype.transformPoint = function(px, py) {\n  var x = px;\n  var y = py;\n  px = x * this.m[0] + y * this.m[2] + this.m[4];\n  py = x * this.m[1] + y * this.m[3] + this.m[5];\n  return [px, py];\n};\n\nTransform.prototype.clone = function() {\n  var n = new Transform();\n  n.m = this.m.slice(0);\n  return n;\n}\n\nexport default Transform;\n","export default function ifNull(value, alternative)\t{\n\treturn (value === undefined || value === null || value === \"\" ? alternative : value);\n}","import calc from \"../func/calc.mjs\";\r\nimport ifNull from \"../func/ifNull.mjs\";\r\n\r\nexport default class TimingDefault {\r\n  constructor(configuration = {}) {\r\n    this.type = \"timing\";\r\n    this._configuration = configuration;\r\n    this._tickChunk = ifNull(calc(this._configuration.tickChunk), 100 / 6);\r\n    this._maxSkippedTickChunk = ifNull(\r\n      calc(this._configuration.maxSkippedTickChunk),\r\n      120\r\n    );\r\n    this._tickChunkTolerance = ifNull(\r\n      calc(this._configuration.tickChunkTolerance),\r\n      0.1\r\n    );\r\n\r\n    this.totalTimePassed = 0;\r\n  }\r\n\r\n  init() {}\r\n\r\n  currentTime() {\r\n    return window.performance ? performance.now() : Date.now();\r\n  }\r\n\r\n  clampTime({ timePassed }) {\r\n    const maxTime = this._tickChunk\r\n      ? this._tickChunk * this._maxSkippedTickChunk\r\n      : 2000;\r\n    if (timePassed > maxTime) {\r\n      return maxTime;\r\n    }\r\n    return timePassed;\r\n  }\r\n\r\n  shiftTime({ timePassed }) {\r\n    return this._tickChunk ? -(timePassed % this._tickChunk) : 0;\r\n  }\r\n\r\n  get tickChunk() {\r\n    return this._tickChunk;\r\n  }\r\n\r\n  isChunked() {\r\n    return this._tickChunk;\r\n  }\r\n\r\n  hasOneChunkedFrame({ timePassed }) {\r\n    return timePassed >= this._tickChunk - this._tickChunkTolerance;\r\n  }\r\n\r\n  calcFrames({ timePassed }) {\r\n    return Math.min(\r\n      this._maxSkippedTickChunk,\r\n      Math.floor((timePassed + this._tickChunkTolerance) / this._tickChunk)\r\n    );\r\n  }\r\n}\r\n","import ImageManager from \"./ImageManager.mjs\";\nimport LayerManager from \"./LayerManager.mjs\";\nimport calc from \"./func/calc.mjs\";\nimport toArray from \"./func/toArray.mjs\";\nimport Transform from \"./func/transform.mjs\";\nimport TimingDefault from \"./Middleware/TimingDefault.mjs\";\n\nclass Scene {\n  constructor(...configurationClassOrObjects) {\n    // Layer consists of Sprites\n    this._layerManager = new LayerManager();\n    this._totalTimePassed = 0;\n    //this._transform = null;\n    //this._transformInvert = null;\n    //this._engine = null;\n    //this._initDone = false;\n    //this._additionalModifier = undefined;\n    this._imageManager = ImageManager;\n    //this._resetIntend = false;\n    //this._endTime = undefined;\n\n    this.middlewares = configurationClassOrObjects;\n    if (!this.middlewareByType(\"timing\")) {\n      this.middlewares = [TimingDefault, ...this.middlewares];\n    }\n  }\n\n  get _output() {\n    return this._engine.getOutput();\n  }\n\n  set middlewares(middlewares) {\n    this._middleware = toArray(middlewares)\n      .map((configurationClassOrObject) =>\n        typeof configurationClassOrObject === \"function\"\n          ? new configurationClassOrObject()\n          : configurationClassOrObject\n      )\n      .reduce(\n        (middlewareCommandList, c) => {\n          for (let command of Object.keys(middlewareCommandList)) {\n            if (command in c) {\n              middlewareCommandList[command].push(c);\n            }\n          }\n          middlewareCommandList._all.push(c);\n          if (!(\"enabled\" in c)) c.enabled = true;\n          if (c.type) middlewareCommandList[`t_${c.type}`] = c;\n          return middlewareCommandList;\n        },\n        {\n          _all: [],\n          init: [],\n          isDrawFrame: [],\n          initSprites: [],\n          fixedUpdate: [],\n          update: [],\n          draw: [],\n          destroy: [],\n          reset: [],\n          resize: [],\n          currentTime: [],\n          clampTime: [],\n          shiftTime: [],\n          isChunked: [],\n          hasOneChunkedFrame: [],\n          calcFrames: [],\n          tickChunk: [],\n          additionalModifier: [],\n        }\n      );\n  }\n  get middlewares() {\n    return this._middleware._all;\n  }\n\n  middlewareByType(type) {\n    const objs = this._middleware._all.filter((c) => c.type == type);\n    if (objs.length) {\n      return objs[objs.length - 1];\n    }\n  }\n\n  has(command) {\n    return (\n      command in this._middleware ||\n      this._middleware._all.filter((c) => command in c).length > 0\n    );\n  }\n\n  do(command, params, defaultValue, func) {\n    let objs =\n      this._middleware[command] ||\n      this._middleware._all.filter((c) => command in c);\n    objs = objs.filter((v) => v.enabled);\n    if (!objs.length) {\n      return defaultValue;\n    }\n    const fullParams = this._param(params);\n    return func(objs, fullParams, defaultValue);\n  }\n\n  map(command, params = {}) {\n    return this.do(command, params, [], (objs, fullParams) =>\n      objs.map((c) => c[command](fullParams))\n    );\n  }\n\n  pipe(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        res = c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeBack(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let i = objs.length - 1; i >= 0; i--) {\n        const c = objs[i];\n        res = c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeMax(command, params = {}, pipe) {\n    return this.do(command, params, pipe, (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        let newRes = c[command](fullParams, res);\n        if (Array.isArray(newRes)) {\n          if (Array.isArray(res)) {\n            res = res.map((v, i) => Math.max(v, newRes[i]));\n          } else {\n            res = newRes.map((v) => Math.max(v, res));\n          }\n        } else {\n          if (Array.isArray(res)) {\n            res = res.map((v, i) => Math.max(v, newRes));\n          } else {\n            res = Math.max(newRes, res);\n          }\n        }\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  pipeAsync(command, params = {}, pipe) {\n    return this.do(command, params, pipe, async (objs, fullParams) => {\n      let res = pipe;\n      this._stopPropagation = false;\n      for (let c of objs) {\n        res = await c[command](fullParams, res);\n        if (this._stopPropagation) break;\n      }\n      return res;\n    });\n  }\n\n  value(command, params = {}) {\n    let objs =\n      this._middleware[command] ||\n      this._middleware._all.filter((c) => command in c);\n    objs.filter((v) => v.enabled);\n    if (!objs.length) {\n      return undefined;\n    }\n    const obj = objs[objs.length - 1];\n    return calc(obj[command], obj, this._param(params));\n  }\n\n  stopPropagation() {\n    this._stopPropagation = true;\n  }\n\n  currentTime() {\n    return this.pipe(\"currentTime\");\n  }\n\n  clampTime(timePassed) {\n    return this.pipe(\"clampTime\", { timePassed });\n  }\n\n  shiftTime(timePassed) {\n    return this.pipe(\"shiftTime\", { timePassed });\n  }\n\n  cacheClear() {\n    this._transform = 0;\n    this._transformInvert = 0;\n  }\n\n  viewport() {\n    if (!this._engine) return new Transform();\n\n    if (!this._transform) {\n      this._transform = this.pipe(\"viewport\", {}, new Transform());\n      this._transformInvert = null;\n    }\n    return this._transform;\n  }\n\n  transformPoint(x, y, scale = this._additionalModifier.scaleCanvas) {\n    if (!this._transformInvert) {\n      this._transformInvert = this.viewport().clone().invert();\n    }\n    return this._transformInvert.transformPoint(x * scale, y * scale);\n  }\n\n  callInit(parameter, engine) {\n    this._engine = engine;\n    this.resize();\n    const images = this.value(\"images\");\n    if (images) {\n      this._imageManager.add(images);\n    }\n    Promise.all(\n      this.map(\"init\", {\n        parameter,\n      })\n    ).then((res) => (this._initDone = true));\n  }\n\n  get additionalModifier() {\n    return this._additionalModifier;\n  }\n\n  updateAdditionalModifier() {\n    const output = this._output;\n    this._additionalModifier = this.pipe(\n      \"additionalModifier\",\n      {},\n      {\n        alpha: 1,\n        x: 0,\n        y: 0,\n        width: output.width,\n        height: output.height,\n        widthInPixel: output.width,\n        heightInPixel: output.height,\n        scaleCanvas: 1,\n        visibleScreen: {\n          x: 0,\n          y: 0,\n          width: output.width,\n          height: output.height,\n        },\n        fullScreen: {\n          x: 0,\n          y: 0,\n          width: output.width,\n          height: output.height,\n        },\n      }\n    );\n  }\n\n  resize() {\n    const output = this._output;\n    this.updateAdditionalModifier();\n    this.pipe(\"resize\");\n    this._layerManager.forEach(({ element, isFunction }) => {\n      if (!isFunction) {\n        element.resize(output, this._additionalModifier);\n      }\n    });\n  }\n\n  async destroy() {\n    const parameter = await this.pipeAsync(\"destroy\");\n    this._initDone = false;\n    return parameter;\n  }\n\n  get timing() {\n    return this._middleware.t_timing;\n  }\n\n  get camera() {\n    return this._middleware.t_camera;\n  }\n\n  get control() {\n    return this._middleware.t_control;\n  }\n\n  get totalTimePassed() {\n    return this._totalTimePassed;\n  }\n\n  _param(additionalParameter) {\n    return {\n      engine: this._engine,\n      scene: this,\n      imageManager: this._imageManager,\n      layerManager: this._layerManager,\n      totalTimePassed: this._totalTimePassed,\n      output: this._engine && this._output,\n      ...additionalParameter,\n    };\n  }\n\n  callLoading(args) {\n    if (this._imageManager.isLoaded() && this._initDone) {\n      this._endTime = this.value(\"endTime\");\n      args.progress = \"Click to play\";\n      this.value(\"loading\", args);\n      return true;\n    }\n    args.progress = this._imageManager.getCount()\n      ? this._imageManager.getLoaded() / this._imageManager.getCount()\n      : \"Loading...\";\n\n    this.value(\"loading\", args);\n    return false;\n  }\n\n  fixedUpdate(timePassed, lastCall) {\n    this.map(\"fixedUpdate\", {\n      timePassed,\n      lastCall,\n    });\n  }\n\n  isDrawFrame(timePassed) {\n    return this.pipeMax(\"isDrawFrame\", { timePassed }, timePassed !== 0);\n  }\n\n  move(timePassed) {\n    // calc total time\n    this._totalTimePassed += timePassed;\n\n    if (this._resetIntend) {\n      this.reset();\n      // Jump back?\n    } else if (timePassed < 0) {\n      // Back to the beginning\n      timePassed = this._totalTimePassed;\n      this.reset();\n      this.initSprites();\n      this._totalTimePassed = timePassed;\n    } else if (this._endTime && this._endTime <= this._totalTimePassed) {\n      // set timepassed to match endtime\n      timePassed -= this._totalTimePassed - this._endTime;\n      this._totalTimePassed = this._endTime;\n      // End Engine\n      this.map(\"end\", { timePassed });\n    }\n    if (this.value(\"isChunked\")) {\n      if (this.value(\"hasOneChunkedFrame\", { timePassed })) {\n        // how many frames should be skipped. Maximum is a skip of 2 frames\n        const frames = this.value(\"calcFrames\", { timePassed }) - 1;\n        for (let calcFrame = 0; calcFrame <= frames; calcFrame++) {\n          this.fixedUpdate(this.value(\"tickChunk\"), calcFrame === frames);\n        }\n      }\n    } else {\n      this.fixedUpdate(timePassed, true);\n    }\n\n    this.map(\"update\", { timePassed });\n\n    this._layerManager.forEach(({ element, isFunction, layer, elementId }) => {\n      if (!isFunction) {\n        if (element.animate(timePassed)) {\n          layer.deleteById(elementId);\n        }\n      }\n    });\n  }\n\n  draw(canvasId) {\n    this.map(\"draw\", { canvasId });\n    const context = this._output.context[canvasId];\n    context.save();\n\n    context.setTransform(...this.viewport().m);\n\n    this._layerManager.forEach(\n      ({ layer, layerId, element, isFunction, elementId }) => {\n        if (isFunction) {\n          if (\n            element(\n              this._param({\n                layerId,\n                elementId,\n                layer,\n                context,\n              })\n            )\n          ) {\n            layer.deleteById(elementId);\n          }\n        } else {\n          element.draw(context, this._additionalModifier);\n        }\n      },\n      canvasId\n    );\n\n    context.restore();\n  }\n\n  initSprites(canvasId) {\n    const context = this._output.context[canvasId];\n    this._layerManager.forEach(({ element, isFunction }) => {\n      if (!isFunction) {\n        element.callInit(context, this._additionalModifier);\n      }\n    }, canvasId);\n    this.map(\"initSprites\", { canvasId });\n  }\n\n  resetIntend() {\n    this._resetIntend = true;\n  }\n\n  reset() {\n    this._totalTimePassed = 0;\n    this._resetIntend = false;\n    let result = this.pipe(\n      \"reset\",\n      {\n        engine: this._engine,\n        scene: this,\n        layerManager: this._layerManager,\n        imageManager: this._imageManager,\n      },\n      new LayerManager()\n    );\n\n    if (Array.isArray(result)) {\n      const layers = result;\n      result = new LayerManager();\n      layers.forEach((v) => {\n        result.addLayer().addElements(v);\n      });\n    }\n\n    if (result) {\n      this._layerManager = result;\n    }\n  }\n}\n\nexport default Scene;\n","import calc from \"../func/calc.mjs\";\n\nexport default class Wait {\n  constructor(duration) {\n    this.duration = calc(duration) - 0;\n  }\n\n  run(sprite, time) {\n    // return time left\n    return time - this.duration;\n  }\n}\n","import Wait from \"./Wait.mjs\";\n\nclass Sequence {\n  constructor(...sequences) {\n    let timeWait = 0;\n    if (typeof sequences[0] === \"number\") {\n      timeWait = sequences.shift();\n    }\n    \n    // init position-array\n    this.sequences = sequences.map(sequence => {\n      if (!Array.isArray(sequence)) {\n        sequence = [sequence];\n      }\n      let thisTimeWait = timeWait;\n      if (typeof sequence[0] === \"number\") {\n        thisTimeWait = sequence.shift();\n      }\n\n      return {\n        position: 0,\n        timelapsed: -thisTimeWait,\n        sequence: sequence\n          .map(command =>\n            typeof command.run !== \"function\"\n              ? typeof command === \"number\"\n                ? new Wait(command)\n                : { run: command }\n              : command\n          )\n          .filter(command => typeof command.run === \"function\"),\n        label: sequence.reduce((arr, command, index) => {\n          if (typeof command === \"string\") {\n            arr[command] = index - Object.keys(arr).length;\n          }\n          return arr;\n        }, {}),\n        enabled: true\n      };\n    });\n    // init time\n    this.lastTimestamp = 0;\n    this.enabled = true;\n  }\n\n  reset(timelapsed = 0) {\n    this.sequences.forEach(sequencePosition => {\n      sequencePosition.enabled = true;\n      sequencePosition.position = 0;\n      sequencePosition.timelapsed = timelapsed;\n      sequencePosition.sequence[0] &&\n        sequencePosition.sequence[0].reset &&\n        sequencePosition.sequence[0].reset(timelapsed);\n    });\n    this.enabled = true;\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (label) {\n      const b = this.sequences.reduce((b, sequencePosition) => {\n        if (sequencePosition.label.hasOwnProperty(label)) {\n          b = true;\n          sequencePosition.position = sequencePosition.label[label];\n          sequencePosition.enabled = true;\n          sequencePosition.timelapsed = timelapsed;\n          sequencePosition.sequence[sequencePosition.position] &&\n            sequencePosition.sequence[sequencePosition.position].reset &&\n            sequencePosition.sequence[sequencePosition.position].reset();\n        } else {\n          b |=\n            sequencePosition.sequence.find(seq => {\n              return seq.play && seq.play(label, timelapsed);\n            }) >= 0;\n        }\n        return b;\n      }, false);\n      if (b) {\n        this.enabled = true;\n      }\n      return b;\n    } else {\n      this.sequences.forEach(\n        sequencePosition => (sequencePosition.enabled = true)\n      );\n      this.enabled = true;\n      return true;\n    }\n  }\n\n  runSequence(sprite, sequencePosition, timePassed) {\n    let timeLeft = timePassed;\n    while (\n      sequencePosition.sequence[sequencePosition.position] &&\n      timeLeft >= 0\n    ) {\n      sequencePosition.timelapsed += timeLeft;\n      if (sequencePosition.timelapsed < 0) {\n        return -1;\n      }\n\n      timeLeft = sequencePosition.sequence[sequencePosition.position].run(\n        sprite,\n        sequencePosition.timelapsed\n      );\n\n      if (timeLeft === true) {\n        timeLeft = 0;\n      } else if (timeLeft === false) {\n        return -1;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_FORCE_DISABLE) {\n        sequencePosition.enabled = false;\n        this.enabled = false;\n        return timePassed;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_STOP) {\n        sequencePosition.enabled = false;\n        return timePassed;\n      } else if (timeLeft === Sequence._TIMELAPSE_TO_REMOVE) {\n        return true;\n      }\n\n      if (timeLeft >= 0) {\n        // next animation\n        sequencePosition.position =\n          (sequencePosition.position + 1) % sequencePosition.sequence.length;\n        sequencePosition.sequence[sequencePosition.position] &&\n          sequencePosition.sequence[sequencePosition.position].reset &&\n          sequencePosition.sequence[sequencePosition.position].reset();\n        sequencePosition.timelapsed = 0;\n\n        // loop animation?\n        if (sequencePosition.position === 0) {\n          sequencePosition.enabled = false;\n          return timeLeft;\n        }\n      }\n    }\n    return timeLeft;\n  }\n\n  // call other animations\n  run(sprite, time, is_difference) {\n    // Calculate timedifference\n    let timePassed = time;\n    if (!is_difference) {\n      timePassed = time - this.lastTimestamp;\n      this.lastTimestamp = time;\n    }\n    if (!this.enabled) {\n      return timePassed;\n    }\n    const length = this.sequences.length;\n    let disableVote = 0;\n    let restTime = Infinity;\n    for (let i = 0; i < length; i++) {\n      if (this.sequences[i].enabled) {\n        const timeLeft = this.runSequence(\n          sprite,\n          this.sequences[i],\n          timePassed\n        );\n        if (timeLeft === true) {\n          return true;\n        }\n        restTime = Math.min(restTime, timeLeft);\n      } else {\n        disableVote++;\n      }\n    }\n    if (disableVote === length) {\n      this.enabled = false;\n      return timePassed;\n    }\n    return restTime;\n  }\n}\n\nSequence._TIMELAPSE_TO_FORCE_DISABLE = \"F\";\nSequence._TIMELAPSE_TO_STOP = \"S\";\nSequence._TIMELAPSE_TO_REMOVE = \"R\";\nexport default Sequence;\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Sequence from \"../Animations/Sequence.mjs\";\n\nconst degToRad = 0.017453292519943295; //Math.PI / 180;\n\n// Sprite\n// Draw a Circle\nexport default class Circle {\n  constructor(givenParameter) {\n    this._parseParameterList(this, this._getParameterList(), givenParameter);\n    this._needInit = true;\n  }\n\n  _parseParameterList(obj, parameterList, givenParameter) {\n    Object.keys(parameterList).forEach(name => {\n      const d = parameterList[name];\n      obj[name] =\n        typeof d === \"function\"\n          ? d(givenParameter[name], givenParameter, obj)\n          : ifNull(calc(givenParameter[name]), d);\n    });\n  }\n\n  _getBaseParameterList() {\n    return {\n      // animation\n      animation: (value, givenParameter) => {\n        let result = calc(value);\n        return Array.isArray(result) ? new Sequence(result) : result;\n      },\n      // if it's rendering or not\n      enabled: true,\n      // if you can click it or not\n      isClickable: false,\n      // tags to mark the sprites\n      tag: value => {\n        return Array.isArray(value) ? value : value ? [value] : [];\n      }\n    };\n  }\n\n  _getParameterList() {\n    return Object.assign({}, this._getBaseParameterList(), {\n      // position\n      x: 0,\n      y: 0,\n      // rotation\n      rotation: (value, givenParameter) => {\n        return ifNull(\n          calc(value),\n          ifNull(\n            calc(givenParameter.rotationInRadian),\n            ifNull(calc(givenParameter.rotationInDegree), 0) * degToRad\n          )\n        );\n      },\n      // scalling\n      scaleX: (value, givenParameter) => {\n        return ifNull(calc(value), ifNull(calc(givenParameter.scale), 1));\n      },\n      scaleY: (value, givenParameter) => {\n        return ifNull(calc(value), ifNull(calc(givenParameter.scale), 1));\n      },\n      // alpha\n      alpha: 1,\n      // blending\n      compositeOperation: \"source-over\",\n      // color\n      color: \"#fff\"\n    });\n  }\n\n  getElementsByTag(tag) {\n    if (typeof tag === \"function\") {\n      if (this.tag.filter(tag).length) {\n        return [this];\n      }\n    } else {\n      const aTag = Array.isArray(tag) ? tag : [tag];\n      if (aTag.filter(tag => this.tag.includes(tag)).length) {\n        return [this];\n      }\n    }\n    return [];\n  }\n\n  // Animation-Funktion\n  animate(timepassed) {\n    if (this.animation) {\n      // run animation\n      if (this.animation.run(this, timepassed, true) === true) {\n        // disable\n        this.enabled = false;\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (this.animation) {\n      this.animation.play && this.animation.play(label, timelapsed);\n    }\n  }\n\n  init(context, additionalModifier) {}\n\n  callInit(context, additionalModifier) {\n    if (this._needInit) {\n      this.init(context, additionalModifier);\n      this._needInit = false;\n    }\n  }\n\n  resize(output, additionalModifier) {}\n\n  _detectHelper(context, x, y, moveToCenter, callback) {\n    let a = false;\n    if (this.enabled && this.isClickable) {\n      const hw = this.width / 2;\n      const hh = this.height / 2;\n      context.save();\n      if (moveToCenter) {\n        context.translate(this.x + hw, this.y + hh);\n      } else {\n        context.translate(this.x, this.y);\n      }\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.beginPath();\n      if (callback) {\n        a = callback(hw, hh);\n      } else {\n        context.rect(-hw, -hh, this.width, this.height);\n        context.closePath();\n        a = context.isPointInPath(x, y);\n      }\n      context.restore();\n    }\n    return a ? this : false;\n  }\n\n  detectDraw(context, color) {}\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false, () => {\n      context.arc(\n        0,\n        0,\n        1,\n        Math.PI / 2 + this.rotation,\n        Math.PI * 2.5 - this.rotation,\n        false\n      );\n      return context.isPointInPath(x, y);\n    });\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.beginPath();\n      context.fillStyle = this.color;\n      context.arc(\n        0,\n        0,\n        1,\n        Math.PI / 2 + this.rotation,\n        Math.PI * 2.5 - this.rotation,\n        false\n      );\n      context.fill();\n      context.restore();\n    }\n  }\n}\n","import Circle from \"./Circle.mjs\";\n\nexport default class Callback extends Circle {\n  constructor(givenParameter) {\n    if (typeof givenParameter === \"function\") {\n      givenParameter = { callback: givenParameter };\n    }\n    super(givenParameter);\n\n    // set start value to count\n    this._timePassed = 0;\n    this._deltaTime = 0;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, this._getBaseParameterList(), {\n      callback: v => (typeof v === undefined ? () => {} : v)\n    });\n  }\n\n  animate(timePassed) {\n    if (this.enabled) {\n      this._timePassed += timePassed;\n      this._deltaTime += timePassed;\n    }\n    return super.animate(timePassed);\n  }\n\n  detect(context, color) {}\n\n  draw(context, additionalParameter) {\n    if (this.enabled) {\n      this.callback(context, this._timePassed, additionalParameter, this);\n    }\n    this._deltaTime = 0;\n  }\n}\n","import Circle from \"./Circle.mjs\";\n\nexport default class Group extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      sprite: []\n    });\n  }\n\n  getElementsByTag(tag) {\n    let result = super.getElementsByTag(tag);\n    for (const sprite of this.sprite) {\n      const ans = sprite.getElementsByTag(tag);\n      if (ans) {\n        result = result.concat(ans);\n      }\n    }\n    return result;\n  }\n\n  // overwrite change\n  animate(timepassed) {\n    // call super\n    let finished = super.animate(timepassed),\n      spriteFinished = false;\n    // animate all sprites\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        spriteFinished = spriteFinished || sprite.animate(timepassed) === true;\n      }\n    }\n\n    if (this.animation) {\n      return finished;\n    } else {\n      if (spriteFinished) {\n        this.enabled = false;\n      }\n      return spriteFinished;\n    }\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    if (this.animation) {\n      this.animation.play && this.animation.play(label, timelapsed);\n    }\n    for (const sprite of this.sprite) {\n      sprite.play && sprite.play(label, timelapsed);\n    }\n  }\n\n  resize(output, additionalModifier) {\n    for (const sprite of this.sprite) {\n      sprite.resize(output, additionalModifier);\n    }\n  }\n\n  callInit(context, additionalModifier) {\n    super.callInit(context, additionalModifier);\n    for (let sprite of this.sprite) {\n      sprite.callInit(context, additionalModifier);\n    }\n  }\n\n  detectImage(context, color) {\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        sprite.detectImage(context, color);\n      }\n    }\n  }\n\n  detect(context, x, y) {\n    if (this.enabled) {\n      for (const sprite of this.sprite) {\n        const a = sprite.detect(context, x, y);\n        if (a) return a;\n      }\n    }\n    return false;\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (this.alpha < 1) {\n        additionalModifier = Object.assign({}, additionalModifier);\n        additionalModifier.alpha *= this.alpha;\n      }\n\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      // draw all sprites\n      for (const sprite of this.sprite) {\n        sprite.draw(context, additionalModifier);\n      }\n      context.restore();\n    }\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport Group from \"./Group.mjs\";\n\nexport default class Canvas extends Group {\n  constructor(givenParameter) {\n    super(givenParameter);\n    this._currentGridSize = false;\n    this._drawFrame = 2;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // x,y,width,height without default to enable norm\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      canvasWidth: undefined,\n      canvasHeight: undefined,\n      gridSize: undefined,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        ),\n      isDrawFrame: (value, givenParameter, setParameter) => ifNull(value, true)\n    });\n  }\n\n  _generateTempCanvas(additionalModifier) {\n    const w = additionalModifier.widthInPixel;\n    const h = additionalModifier.heightInPixel;\n    this._temp_canvas = document.createElement(\"canvas\");\n    if (this.canvasWidth && this.canvasHeight) {\n      this._temp_canvas.width = this.canvasWidth;\n      this._temp_canvas.height = this.canvasHeight;\n    } else if (this.gridSize) {\n      this._currentGridSize = this.gridSize;\n      this._temp_canvas.width = Math.round(this._currentGridSize);\n      this._temp_canvas.height = Math.round(this._currentGridSize);\n    } else {\n      this._temp_canvas.width = Math.round(w / this.scaleX);\n      this._temp_canvas.height = Math.round(h / this.scaleY);\n    }\n    this._tctx = this._temp_canvas.getContext(\"2d\");\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n    }\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n  }\n\n  resize(output, additionalModifier) {\n    if (\n      this._temp_canvas &&\n      this._currentGridSize !== this.gridSize &&\n      !this.canvasWidth\n    ) {\n      const oldTempCanvas = this._temp_canvas;\n      this._generateTempCanvas(additionalModifier);\n      this._tctx.globalCompositeOperation = \"copy\";\n      this._tctx.drawImage(\n        oldTempCanvas,\n        0,\n        0,\n        oldTempCanvas.width,\n        oldTempCanvas.height,\n        0,\n        0,\n        this._temp_canvas.width,\n        this._temp_canvas.height\n      );\n      this._tctx.globalCompositeOperation = \"source-over\";\n      this._drawFrame = 2;\n    }\n    this.normalizeFullScreen(additionalModifier);\n    super.resize(output, additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  init(context, additionalModifier) {\n    this._generateTempCanvas(additionalModifier);\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (this.gridSize && this._currentGridSize !== this.gridSize) {\n        this.resize(additionalModifier);\n      }\n      this._drawFrame = Math.max(\n        this._drawFrame - 1,\n        calc(this.isDrawFrame, context, additionalModifier)\n      );\n      const w = this.width,\n        h = this.height,\n        wh = w / 2,\n        hh = h / 2,\n        tw = this._temp_canvas.width,\n        th = this._temp_canvas.height;\n\n      if (this._drawFrame) {\n        this._tctx.textBaseline = \"middle\";\n        this._tctx.textAlign = \"center\";\n        this._tctx.globalAlpha = 1;\n        this._tctx.globalCompositeOperation = \"source-over\";\n        this._tctx.save();\n        // draw all sprites\n        const cam = additionalModifier.cam;\n        if (this.norm && cam) {\n          const scale = Math.max(tw, th) / 2;\n          this._tctx.translate(tw / 2, th / 2);\n          this._tctx.scale(scale, scale);\n          this._tctx.scale(cam.zoom, cam.zoom);\n          this._tctx.translate(-cam.x, -cam.y);\n        }\n        for (const sprite of this.sprite) {\n          sprite.draw(\n            this._tctx,\n            this.norm\n              ? Object.assign({}, additionalModifier, {\n                  alpha: 1,\n                  widthInPixel: tw,\n                  heightInPixel: th\n                })\n              : {\n                  alpha: 1,\n                  x: 0,\n                  y: 0,\n                  width: tw,\n                  height: th,\n                  widthInPixel: tw,\n                  heightInPixel: th,\n                  visibleScreen: {\n                    x: 0,\n                    y: 0,\n                    width: tw,\n                    height: th\n                  }\n                }\n          );\n        }\n        this._tctx.restore();\n      }\n\n      context.save();\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.translate(this.x + wh, this.y + hh);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.drawImage(this._temp_canvas, 0, 0, tw, th, -wh, -hh, w, h);\n      context.restore();\n    }\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Group from \"./Group.mjs\";\n\nexport default class Emitter extends Group {\n  constructor(givenParameter) {\n    super(givenParameter.self || {});\n\n    let count = ifNull(calc(givenParameter.count), 1);\n    this.sprite = [];\n    const classToEmit = givenParameter.class;\n\n    for (let i = 0; i < count; i++) {\n      let parameter = {};\n      for (let index in givenParameter) {\n        if (![\"self\", \"class\", \"count\"].includes(index)) {\n          if (typeof givenParameter[index] === \"function\") {\n            parameter[index] = givenParameter[index].call(givenParameter, i);\n          } else {\n            parameter[index] = givenParameter[index];\n          }\n        }\n      } \n      this.sprite[i] = new classToEmit(parameter);\n    }\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Circle from \"./Circle.mjs\";\n\nexport default class FastBlur extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n\n    this._currentGridSize = false;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // x,y,width,height without default to enable norm\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      gridSize: undefined,\n      darker: 0,\n      pixel: false,\n      clear: false,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        )\n    });\n  }\n\n  _generateTempCanvas(additionalModifier) {\n    const w = additionalModifier.widthInPixel;\n    const h = additionalModifier.heightInPixel;\n    this._temp_canvas = document.createElement(\"canvas\");\n    if (this.gridSize) {\n      this._currentGridSize = this.gridSize;\n      this._temp_canvas.width = Math.round(this._currentGridSize);\n      this._temp_canvas.height = Math.round(this._currentGridSize);\n    } else {\n      this._temp_canvas.width = Math.ceil(w / this.scaleX);\n      this._temp_canvas.height = Math.ceil(h / this.scaleY);\n    }\n    this._tctx = this._temp_canvas.getContext(\"2d\");\n    this._tctx.globalCompositeOperation = \"source-over\";\n    this._tctx.globalAlpha = 1;\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n    }\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n  }\n\n  resize(output, additionalModifier) {\n    if (this._temp_canvas && this._currentGridSize !== this.gridSize) {\n      const oldTempCanvas = this._temp_canvas;\n      this._generateTempCanvas(additionalModifier);\n      this._tctx.globalCompositeOperation = \"copy\";\n      this._tctx.drawImage(\n        oldTempCanvas,\n        0,\n        0,\n        oldTempCanvas.width,\n        oldTempCanvas.height,\n        0,\n        0,\n        this._temp_canvas.width,\n        this._temp_canvas.height\n      );\n      this._tctx.globalCompositeOperation = \"source-over\";\n    }\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  init(context, additionalModifier) {\n    this._generateTempCanvas(additionalModifier);\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled && this.alpha > 0) {\n      if (this.gridSize && this._currentGridSize !== this.gridSize) {\n        this.resize(context, additionalModifier);\n      }\n\n      const a = this.alpha * additionalModifier.alpha,\n        w = this.width,\n        h = this.height,\n        targetW = this._temp_canvas.width,\n        targetH = this._temp_canvas.height;\n\n      if (a > 0 && targetW && targetH) {\n        this._tctx.globalCompositeOperation = \"copy\";\n        this._tctx.globalAlpha = 1;\n        this._tctx.drawImage(\n          context.canvas,\n          0,\n          0,\n          context.canvas.width,\n          context.canvas.height,\n          0,\n          0,\n          targetW,\n          targetH\n        );\n\n        if (this.darker > 0) {\n          this._tctx.globalCompositeOperation = this.clear\n            ? \"source-atop\"\n            : \"source-over\"; // \"source-atop\"; source-atop works with transparent background but source-over is much faster\n          this._tctx.fillStyle = \"rgba(0,0,0,\" + this.darker + \")\";\n          this._tctx.fillRect(0, 0, targetW, targetH);\n        }\n\n        this.additionalBlur &&\n          this.additionalBlur(targetW, targetH, additionalModifier);\n\n        // optional: clear screen\n        if (this.clear) {\n          context.globalCompositeOperation = \"source-over\";\n          context.globalAlpha = 1;\n          context.clearRect(this.x, this.y, w, h);\n        }\n        context.globalCompositeOperation = this.compositeOperation;\n        context.globalAlpha = a;\n        const oldValue = context.imageSmoothingEnabled;\n        context.imageSmoothingEnabled = !this.pixel;\n        context.drawImage(\n          this._temp_canvas,\n          0,\n          0,\n          targetW,\n          targetH,\n          this.x,\n          this.y,\n          w,\n          h\n        );\n        context.imageSmoothingEnabled = oldValue;\n      }\n    } else {\n      // optional: clear screen\n      if (this.clear) {\n        if (!this.x) {\n          this.x = additionalModifier.x;\n        }\n        if (!this.y) {\n          this.y = additionalModifier.y;\n        }\n        if (!this.width) {\n          this.width = additionalModifier.width;\n        }\n        if (!this.height) {\n          this.height = additionalModifier.height;\n        }\n        context.clearRect(this.x, this.y, this.width, this.height);\n      }\n    }\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ImageManager from \"../ImageManager.mjs\";\nimport Circle from \"./Circle.mjs\";\n\n// Sprite\n// Draw a Image\nclass Image extends Circle {\n  constructor(givenParameter) {\n    super(givenParameter);\n    this._currentTint = false;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set image\n      image: v => ImageManager.getImage(calc(v)),\n      // relative position\n      position: Image.CENTER,\n      // cutting for sprite stripes\n      frameX: 0,\n      frameY: 0,\n      frameWidth: 0,\n      frameHeight: 0,\n      width: undefined,\n      height: undefined,\n      // autoscale to max\n      norm: false,\n      normCover: false,\n      normToScreen: false,\n      clickExact: false,\n      color: \"#FFF\",\n      tint: 0\n    });\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  init(context, additionalModifier) {\n    const frameWidth = this.frameWidth || this.image.width;\n    const frameHeight = this.frameHeight || this.image.height;\n\n    this._normScale = this.normToScreen\n      ? this.normCover\n        ? Math.max(\n            additionalModifier.fullScreen.width / frameWidth,\n            additionalModifier.fullScreen.height / frameHeight\n          )\n        : this.norm\n        ? Math.min(\n            additionalModifier.fullScreen.width / frameWidth,\n            additionalModifier.fullScreen.height / frameHeight\n          )\n        : 1\n      : this.normCover\n      ? Math.max(\n          additionalModifier.width / frameWidth,\n          additionalModifier.height / frameHeight\n        )\n      : this.norm\n      ? Math.min(\n          additionalModifier.width / frameWidth,\n          additionalModifier.height / frameHeight\n        )\n      : 1;\n  }\n\n  _tintCacheKey() {\n    const frameWidth = this.frameWidth || this.image.width;\n    const frameHeight = this.frameHeight || this.image.height;\n    return [\n      this.tint,\n      frameWidth,\n      frameHeight,\n      this.color,\n      this.frameX,\n      this.frameY\n    ].join(\";\");\n  }\n\n  _temp_context(frameWidth, frameHeight) {\n    if (!this._temp_canvas) {\n      this._temp_canvas = document.createElement(\"canvas\");\n      this._tctx = this._temp_canvas.getContext(\"2d\");\n    }\n    this._temp_canvas.width = frameWidth;\n    this._temp_canvas.height = frameHeight;\n    return this._tctx;\n  }\n\n  detectDraw(context, color) {\n    if (this.enabled && this.isClickable && this.clickExact) {\n      const frameWidth = this.frameWidth || this.image.width;\n      const frameHeight = this.frameHeight || this.image.height;\n      const sX =\n        (this.width ? this.width : frameWidth) * this._normScale * this.scaleX;\n      const sY =\n        (this.height ? this.height : frameHeight) *\n        this._normScale *\n        this.scaleY;\n      const isTopLeft = this.position === Image.LEFT_TOP;\n\n      const tctx = this._temp_context(frameWidth, frameHeight);\n      tctx.globalAlpha = 1;\n      tctx.globalCompositeOperation = \"source-over\";\n      tctx.fillStyle = color;\n      tctx.fillRect(0, 0, frameWidth, frameHeight);\n      tctx.globalCompositeOperation = \"destination-atop\";\n      tctx.drawImage(\n        this.image,\n        this.frameX,\n        this.frameY,\n        frameWidth,\n        frameHeight,\n        0,\n        0,\n        frameWidth,\n        frameHeight\n      );\n\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.drawImage(\n        this._temp_canvas,\n        0,\n        0,\n        frameWidth,\n        frameHeight,\n        isTopLeft ? 0 : -sX / 2,\n        isTopLeft ? 0 : -sY / 2,\n        sX,\n        sY\n      );\n      context.restore();\n      this._currentTint = false;\n    }\n  }\n\n  detect(context, x, y) {\n    if (this.enabled && this.isClickable && this.clickExact) return \"c\";\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled && this.image && this.alpha > 0) {\n      const frameWidth = this.frameWidth || this.image.width,\n        frameHeight = this.frameHeight || this.image.height;\n      const sX =\n          (this.width ? this.width : frameWidth) *\n          this._normScale *\n          this.scaleX,\n        sY =\n          (this.height ? this.height : frameHeight) *\n          this._normScale *\n          this.scaleY;\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      const isTopLeft = this.position === Image.LEFT_TOP;\n\n      if (this.tint && this._currentTint !== this._tintCacheKey()) {\n        const tctx = this._temp_context(frameWidth, frameHeight);\n        tctx.globalAlpha = 1;\n        tctx.globalCompositeOperation = \"source-over\";\n        tctx.clearRect(0, 0, frameWidth, frameHeight);\n        tctx.globalAlpha = this.tint;\n        tctx.fillStyle = this.color;\n        tctx.fillRect(0, 0, frameWidth, frameHeight);\n        tctx.globalAlpha = 1;\n        tctx.globalCompositeOperation = \"destination-atop\";\n        tctx.drawImage(\n          this.image,\n          this.frameX,\n          this.frameY,\n          frameWidth,\n          frameHeight,\n          0,\n          0,\n          frameWidth,\n          frameHeight\n        );\n        this._currentTint = this._tintCacheKey();\n      }\n\n      if (this.rotation == 0) {\n        if (isTopLeft) {\n          context.drawImage(\n            this.tint ? this._temp_canvas : this.image,\n            this.tint ? 0 : this.frameX,\n            this.tint ? 0 : this.frameY,\n            frameWidth,\n            frameHeight,\n            this.x,\n            this.y,\n            sX,\n            sY\n          );\n        } else {\n          context.drawImage(\n            this.tint ? this._temp_canvas : this.image,\n            this.tint ? 0 : this.frameX,\n            this.tint ? 0 : this.frameY,\n            frameWidth,\n            frameHeight,\n            this.x - sX / 2,\n            this.y - sY / 2,\n            sX,\n            sY\n          );\n        }\n      } else {\n        context.save();\n        context.translate(this.x, this.y);\n        context.rotate(this.rotation);\n        context.drawImage(\n          this.tint ? this._temp_canvas : this.image,\n          this.tint ? 0 : this.frameX,\n          this.tint ? 0 : this.frameY,\n          frameWidth,\n          frameHeight,\n          isTopLeft ? 0 : -sX / 2,\n          isTopLeft ? 0 : -sY / 2,\n          sX,\n          sY\n        );\n        context.restore();\n      }\n    }\n  }\n}\nImage.LEFT_TOP = 0;\nImage.CENTER = 1;\n\nexport default Image;\n","import Circle from './Circle.mjs';\n\nclass Text extends Circle {\n  constructor(givenParameters) {\n    super(givenParameters);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      text: undefined,\n      font: '2em monospace',\n      position: Text.CENTER,\n      color: undefined,\n      borderColor: undefined,\n      lineWidth: 1\n    });\n  }\n\n  detectDraw(context, color) {\n    if (this.enabled && this.isClickable) {\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      if (!this.position) {\n        context.textAlign = 'left';\n        context.textBaseline = 'top';\n      }\n      context.font = this.font;\n      context.fillStyle = color;\n      context.fillText(this.text, 0, 0);\n      context.restore();\n    }\n  }\n\n  detect(context, color) {\n    return \"c\"\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      context.save();\n      if (!this.position) {\n        context.textAlign = 'left';\n        context.textBaseline = 'top';\n      }\n      context.translate(this.x, this.y);\n      context.scale(this.scaleX, this.scaleY);\n      context.rotate(this.rotation);\n      context.font = this.font;\n\n      if (this.color) {\n        context.fillStyle = this.color;\n        context.fillText(this.text, 0, 0);\n      }\n\n      if (this.borderColor) {\n        context.strokeStyle = this.borderColor;\n        context.lineWidth = this.lineWidth;\n        context.strokeText(this.text, 0, 0);\n      }\n\n      context.restore();\n    }\n  };\n}\n\n// const\nText.LEFT_TOP = 0;\nText.CENTER = 1;\n\nexport default Text;\n","import Circle from \"./Circle.mjs\";\r\nimport tinycolor from \"@ctrl/tinycolor\";\r\nconst tinycolorf = typeof(tinycolor) === 'function' ? tinycolor : tinycolor.tinycolor\r\n\r\nconst gradientSize = 64;\r\nconst gradientResolution = 4;\r\nconst gradientSizeHalf = gradientSize >> 1;\r\n\r\nclass Particle extends Circle {\r\n  constructor(givenParameter) {\r\n    super(givenParameter);\r\n    this._currentScaleX = undefined;\r\n    this._currentPixelSmoothing = false;\r\n  }\r\n\r\n  static getGradientImage(r, g, b) {\r\n    let rIndex,\r\n      gIndex,\r\n      cr = r >> gradientResolution,\r\n      cg = g >> gradientResolution,\r\n      cb = b >> gradientResolution;\r\n\r\n    if (!Particle._Gradient) {\r\n      const length = 256 >> gradientResolution;\r\n      Particle._Gradient = Array.from({ length }, a =>\r\n        Array.from({ length }, a => Array.from({ length }))\r\n      );\r\n    }\r\n    if (!Particle._Gradient[cr][cg][cb]) {\r\n      Particle._Gradient[cr][cg][cb] = Particle.generateGradientImage(\r\n        cr,\r\n        cg,\r\n        cb\r\n      );\r\n    }\r\n    return Particle._Gradient[cr][cg][cb];\r\n  }\r\n\r\n  static generateGradientImage(cr, cg, cb) {\r\n    let canvas = document.createElement(\"canvas\");\r\n    canvas.width = canvas.height = gradientSize;\r\n\r\n    let txtc = canvas.getContext(\"2d\");\r\n    txtc.globalAlpha = 1;\r\n    txtc.globalCompositeOperation = \"source-over\";\r\n    txtc.clearRect(0, 0, gradientSize, gradientSize);\r\n\r\n    let grad = txtc.createRadialGradient(\r\n      gradientSizeHalf,\r\n      gradientSizeHalf,\r\n      0,\r\n      gradientSizeHalf,\r\n      gradientSizeHalf,\r\n      gradientSizeHalf\r\n    );\r\n    grad.addColorStop(\r\n      0,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",1)\"\r\n    );\r\n    grad.addColorStop(\r\n      0.3,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",0.4)\"\r\n    );\r\n    grad.addColorStop(\r\n      1,\r\n      \"rgba(\" +\r\n        ((cr << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cg << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",\" +\r\n        ((cb << gradientResolution) + (1 << gradientResolution) - 1) +\r\n        \",0)\"\r\n    );\r\n\r\n    txtc.fillStyle = grad;\r\n    txtc.fillRect(0, 0, gradientSize, gradientSize);\r\n\r\n    return canvas;\r\n  }\r\n\r\n  resize(output, additionalModifier) {\r\n    this._currentScaleX = undefined;\r\n  }\r\n\r\n  // draw-methode\r\n  draw(context, additionalModifier) {\r\n    if (this.enabled) {\r\n      // faster than: if (!(this.color instanceof TinyColor && this.color.model === 'rgb')) {\r\n      if (!this.color || !this.color.r) {\r\n        this.color = tinycolorf(this.color).toRgb();\r\n      }\r\n      if (this._currentScaleX !== this.scaleX) {\r\n        this._currentScaleX = this.scaleX;\r\n        this._currentPixelSmoothing =\r\n          (this.scaleX * additionalModifier.widthInPixel) /\r\n            additionalModifier.width >\r\n          gradientSize;\r\n      }\r\n      const { r, g, b } = this.color;\r\n      context.globalCompositeOperation = this.compositeOperation;\r\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\r\n      context.imageSmoothingEnabled = this._currentPixelSmoothing;\r\n      context.drawImage(\r\n        Particle.getGradientImage(r, g, b),\r\n        0,\r\n        0,\r\n        gradientSize,\r\n        gradientSize,\r\n        this.x - this.scaleX / 2,\r\n        this.y - this.scaleY / 2,\r\n        this.scaleX,\r\n        this.scaleY\r\n      );\r\n      context.imageSmoothingEnabled = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Particle;\r\n","import Group from \"./Group.mjs\";\nimport pasition from \"pasition\";\n\nexport default class Path extends Group {\n  constructor(givenParameters) {\n    super(givenParameters);\n\n    this.oldPath = undefined;\n    this.path2D = new Path2D();\n    if (this.polyfill) {\n      if (typeof Path2D !== \"function\") {\n        let head = document.getElementsByTagName(\"head\")[0];\n        let script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src =\n          \"https://cdn.jsdelivr.net/npm/canvas-5-polyfill@0.1.5/canvas.min.js\";\n        head.appendChild(script);\n      } else {\n        // create a new context\n        let ctx = document.createElement(\"canvas\").getContext(\"2d\");\n        // stroke a simple path\n        ctx.stroke(new Path2D(\"M0,0H1\"));\n        // check it did paint something\n        if (ctx.getImageData(0, 0, 1, 1).data[3]) {\n          this.polyfill = false;\n        }\n      }\n    }\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set path\n      path: undefined,\n      color: undefined,\n      borderColor: undefined,\n      lineWidth: 1,\n      clip: false,\n      fixed: false,\n      polyfill: true\n    });\n  }\n\n  // helper function for changeTo\n  changeToPathInit(from, to) {\n    return pasition._preprocessing(\n      typeof from === \"string\" ? pasition.path2shapes(from) : from,\n      typeof to === \"string\" ? pasition.path2shapes(to) : to\n    );\n  }\n  changeToPath(progress, data, sprite) {\n    return pasition._lerp(data.pathFrom, data.pathTo, progress);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false, () => {\n      return context.isPath(this.path2D, x, y);\n    });\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      const a = this.alpha * additionalModifier.alpha;\n      if (this.oldPath !== this.path) {\n        if (this.polyfill && typeof this.path === \"string\") {\n          this.path = pasition.path2shapes(this.path);\n        }\n        if (Array.isArray(this.path)) {\n          this.path2D = new Path2D();\n          this.path.forEach(curve => {\n            this.path2D.moveTo(curve[0][0], curve[0][1]);\n            curve.forEach(points => {\n              this.path2D.bezierCurveTo(\n                points[2],\n                points[3],\n                points[4],\n                points[5],\n                points[6],\n                points[7]\n              );\n            });\n            this.path2D.closePath();\n          });\n        } else if (this.path instanceof Path2D) {\n          this.path2D = this.path;\n        } else {\n          this.path2D = new Path2D(this.path);\n        }\n        this.oldPath = this.path;\n      }\n\n      let scaleX = this.scaleX,\n        scaleY = this.scaleY;\n\n      if (this.fixed) {\n        if (scaleX == 0) {\n          scaleX = Number.EPSILON;\n        }\n        if (scaleY == 0) {\n          scaleY = Number.EPSILON;\n        }\n      }\n\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = a;\n      context.save();\n      context.translate(this.x, this.y);\n      context.scale(scaleX, scaleY);\n      context.rotate(this.rotation);\n\n      if (this.color) {\n        context.fillStyle = this.color;\n        context.fill(this.path2D);\n      }\n\n      context.save();\n\n      if (this.clip) {\n        context.clip(this.path2D);\n        if (this.fixed) {\n          context.rotate(-this.rotation);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.translate(-this.x, -this.y);\n        }\n      }\n\n      // draw all sprites\n      for (const sprite of this.sprite) {\n        sprite.draw(context, additionalModifier);\n      }\n\n      context.restore();\n\n      if (this.borderColor) {\n        context.strokeStyle = this.borderColor;\n        context.lineWidth = this.lineWidth;\n        context.stroke(this.path2D);\n      }\n\n      context.restore();\n    }\n  }\n}\n","import Circle from \"./Circle.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\n\n// Sprite\n// Draw a Circle\nclass Rect extends Circle {\n  constructor(givenParameters) {\n    super(givenParameters);\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      x: undefined,\n      y: undefined,\n      width: undefined,\n      height: undefined,\n      borderColor: undefined,\n      color: undefined,\n      lineWidth: 1,\n      clear: false,\n      norm: (value, givenParameter, setParameter) =>\n        ifNull(\n          calc(value),\n          setParameter.x === undefined &&\n            setParameter.y === undefined &&\n            setParameter.width === undefined &&\n            setParameter.height === undefined\n        ),\n      // relative position\n      position: Rect.CENTER\n    });\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm || this.width === undefined) {\n      this.width = additionalModifier.visibleScreen.width;\n    }\n    if (this.norm || this.height === undefined) {\n      this.height = additionalModifier.visibleScreen.height;\n    }\n    if (this.norm || this.x === undefined) {\n      this.x = additionalModifier.visibleScreen.x;\n      if (this.position === Rect.CENTER) {\n        this.x += this.width / 2;\n      }\n    }\n    if (this.norm || this.y === undefined) {\n      this.y = additionalModifier.visibleScreen.y;\n      if (this.position === Rect.CENTER) {\n        this.y += this.height / 2;\n      }\n    }\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  init(context, additionalModifier) {\n    this.normalizeFullScreen(additionalModifier);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, this.position === Rect.LEFT_TOP);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled && this.alpha > 0) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n      if (this.rotation === 0 && this.position === Rect.LEFT_TOP) {\n        if (this.clear) {\n          context.clearRect(this.x, this.y, this.width, this.height);\n        } else if (this.color) {\n          context.fillStyle = this.color;\n          context.fillRect(this.x, this.y, this.width, this.height);\n        }\n        if (this.borderColor) {\n          context.beginPath();\n          context.lineWidth = this.lineWidth;\n          context.strokeStyle = this.borderColor;\n          context.rect(this.x, this.y, this.width, this.height);\n          context.stroke();\n        }\n      } else {\n        let hw = this.width / 2;\n        let hh = this.height / 2;\n        context.save();\n        if (this.position === Rect.LEFT_TOP) {\n          context.translate(this.x + hw, this.y + hh);\n        } else {\n          context.translate(this.x, this.y);\n        }\n        context.scale(this.scaleX, this.scaleY);\n        context.rotate(this.rotation);\n        if (this.clear) {\n          context.clearRect(-hw, -hh, this.width, this.height);\n        } else if (this.color) {\n          context.fillStyle = this.color;\n          context.fillRect(-hw, -hh, this.width, this.height);\n        }\n        if (this.borderColor) {\n          context.beginPath();\n          context.lineWidth = this.lineWidth;\n          context.strokeStyle = this.borderColor;\n          context.rect(-hw, -hh, this.width, this.height);\n          context.stroke();\n        }\n        context.restore();\n      }\n    }\n  }\n}\nRect.LEFT_TOP = 0;\nRect.CENTER = 1;\n\nexport default Rect;\n","import FastBlur from \"./FastBlur.mjs\";\nimport * as stackblur from \"stackblur-canvas\";\nconst { imageDataRGBA } = stackblur.default || stackblur;\n\nexport default class StackBlur extends FastBlur {\n  constructor(givenParameter) {\n    super(givenParameter);\n\n    this._currentGridSize = false;\n    this._currentRadiusPart = undefined;\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // work directly on the main canvas\n      onCanvas: false,\n      radius: undefined,\n      radiusPart: undefined,\n      radiusScale: true\n    });\n  }\n\n  normalizeFullScreen(additionalModifier) {\n    if (this.norm && this.onCanvas) {\n      this.x = 0;\n      this.y = 0;\n      this.width = additionalModifier.widthInPixel;\n      this.height = additionalModifier.heightInPixel;\n    } else {\n      super.normalizeFullScreen(additionalModifier);\n    }\n  }\n\n  resize(output, additionalModifier) {\n    super.resize(output, additionalModifier);\n    if (this.radiusPart) {\n      this.radius = undefined;\n    }\n  }\n\n  additionalBlur(targetW, targetH, additionalModifier) {\n    const imageData = this._tctx.getImageData(0, 0, targetW, targetH);\n    imageDataRGBA(imageData, 0, 0, targetW, targetH, additionalModifier.radius);\n    this._tctx.putImageData(imageData, 0, 0);\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // draw-methode\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      if (\n        this.radius === undefined ||\n        this._currentRadiusPart !== this.radiusPart\n      ) {\n        this.radius = Math.round(\n          (additionalModifier.widthInPixel + additionalModifier.heightInPixel) /\n            2 /\n            this.radiusPart\n        );\n        this._currentRadiusPart = this.radiusPart;\n      }\n      const radius = Math.round(\n        this.radius *\n          (this.radiusScale &&\n            (additionalModifier.cam ? additionalModifier.cam.zoom : 1) /\n              additionalModifier.scaleCanvas)\n      );\n      if (radius) {\n        if (this.onCanvas) {\n          if (this.width === undefined || this.height === undefined) {\n            this.normalizeFullScreen(additionalModifier);\n          }\n          const x = Math.round(this.x);\n          const y = Math.round(this.y);\n          const w = Math.round(this.width);\n          const h = Math.round(this.height);\n          this.imageData = context.getImageData(x, y, w, h);\n          imageDataRGBA(this.imageData, 0, 0, w - x, h - y, radius);\n          context.putImageData(this.imageData, x, y, 0, 0, w, h);\n        } else {\n          additionalModifier.radius = radius;\n          super.draw(context, additionalModifier);\n        }\n      }\n    } else {\n      super.draw(context, additionalModifier);\n    }\n  }\n}\n","import Callback from './Sprites/Callback.mjs';\nimport Canvas from './Sprites/Canvas.mjs';\nimport Circle from './Sprites/Circle.mjs';\nimport Emitter from './Sprites/Emitter.mjs';\nimport FastBlur from './Sprites/FastBlur.mjs';\nimport Group from './Sprites/Group.mjs';\nimport Image from './Sprites/Image.mjs';\nimport Text from './Sprites/Text.mjs';\nimport Particle from './Sprites/Particle.mjs';\nimport Path from './Sprites/Path.mjs';\nimport Rect from './Sprites/Rect.mjs';\nimport Scroller from './Sprites/Scroller.mjs';\nimport StackBlur from './Sprites/StackBlur.mjs';\nimport StarField from './Sprites/StarField.mjs';\n\nexport default {\n  Callback,\n  Canvas,\n  Circle,\n  Emitter,\n  FastBlur,\n  Group,\n  Image,\n  Text,\n  Particle,\n  Path,\n  Rect,\n  Scroller,\n  StackBlur,\n  StarField\n};\n","import calc from \"../func/calc.mjs\";\nimport Emitter from \"./Emitter.mjs\";\nimport Text from \"./Text.mjs\";\n\nexport default class Scroller extends Emitter {\n  constructor(givenParameters) {\n    let text = calc(givenParameters.text);\n    let characterList = Array.isArray(text) ? text : [...text];\n    super(\n      Object.assign({}, givenParameters, {\n        class: Text,\n        count: characterList.length,\n        text: index => characterList[index],\n        enabled: index =>\n          characterList[index] !== \" \" && calc(givenParameters.enabled, index)\n      })\n    );\n  }\n}\n","import ifNull from \"../func/ifNull.mjs\";\nimport calc from \"../func/calc.mjs\";\nimport Rect from \"./Rect.mjs\";\n// Sprite\n// Draw a Circle\nexport default class StarField extends Rect {\n  constructor(givenParameters) {\n    super(givenParameters);\n\n    this._starsX = [];\n    this._starsY = [];\n    this._starsZ = [];\n    this._starsOldX = [];\n    this._starsOldY = [];\n    this._starsNewX = [];\n    this._starsNewY = [];\n    this._starsEnabled = [];\n    this._starsLineWidth = [];\n  }\n\n  _getParameterList() {\n    return Object.assign({}, super._getParameterList(), {\n      // set image\n      count: 40,\n      // relative position\n      moveX: 0,\n      moveY: 0,\n      moveZ: 0,\n      lineWidth: undefined,\n      highScale: true,\n      color: \"#FFF\" // here default color is white\n    });\n  }\n\n  init(context, additionalModifier) {\n    this.width = this.width || additionalModifier.width;\n    this.height = this.height || additionalModifier.height;\n    this.x = this.x === undefined ? additionalModifier.x : this.x;\n    this.y = this.y === undefined ? additionalModifier.y : this.y;\n    this.lineWidth =\n      this.lineWidth ||\n      Math.min(\n        additionalModifier.height / additionalModifier.heightInPixel,\n        additionalModifier.width / additionalModifier.widthInPixel\n      ) / 2;\n    this._centerX = this.width / 2 + this.x;\n    this._centerY = this.height / 2 + this.y;\n    this._scaleZ = Math.max(this.width, this.height) / 2;\n    function clampOrRandom(val, min, max = -min) {\n      return val === undefined || val < min || val >= max\n        ? Math.random() * (max - min) + min\n        : val;\n    }\n    for (let i = 0; i < this.count; i++) {\n      this._starsX[i] = clampOrRandom(this._starsX[i], -this.width / 2);\n      this._starsY[i] = clampOrRandom(this._starsY[i], -this.height / 2);\n      this._starsZ[i] = clampOrRandom(this._starsZ[i], 0, this._scaleZ);\n    }\n  }\n\n  moveStar(i, scaled_timepassed, firstPass) {\n    if (firstPass) {\n      this._starsEnabled[i] = true;\n    }\n    const hw = this.width / 2;\n    const hh = this.height / 2;\n    let x = this._starsX[i] + this.moveX * scaled_timepassed,\n      y = this._starsY[i] + this.moveY * scaled_timepassed,\n      z = this._starsZ[i] + this.moveZ * scaled_timepassed;\n    while (x < -hw) {\n      x += this.width;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n    while (x > hw) {\n      x -= this.width;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n\n    while (y < -hh) {\n      y += this.height;\n      x = Math.random() * this.width - hw;\n      this._starsEnabled[i] = false;\n    }\n    while (y > hh) {\n      y -= this.height;\n      x = Math.random() * this.width - hw;\n      this._starsEnabled[i] = false;\n    }\n\n    while (z <= 0) {\n      z += this._scaleZ;\n      x = Math.random() * this.width - hw;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n    while (z > this._scaleZ) {\n      z -= this._scaleZ;\n      x = Math.random() * this.width - hw;\n      y = Math.random() * this.height - hh;\n      this._starsEnabled[i] = false;\n    }\n\n    const projectX = this._centerX + (x / z) * hw;\n    const projectY = this._centerY + (y / z) * hh;\n    this._starsEnabled[i] =\n      this._starsEnabled[i] &&\n      projectX >= this.x &&\n      projectY >= this.y &&\n      projectX < this.x + this.width &&\n      projectY < this.y + this.height;\n    if (firstPass) {\n      this._starsX[i] = x;\n      this._starsY[i] = y;\n      this._starsZ[i] = z;\n      this._starsNewX[i] = projectX;\n      this._starsNewY[i] = projectY;\n    } else {\n      this._starsOldX[i] = projectX;\n      this._starsOldY[i] = projectY;\n      let lw = (1 - this._starsZ[i] / this._scaleZ) * 4;\n      if (!this.highScale) {\n        lw = Math.ceil(lw);\n      }\n      this._starsLineWidth[i] = lw;\n    }\n  }\n\n  animate(timepassed) {\n    let ret = super.animate(timepassed);\n    if (this.enabled && this._centerX !== undefined) {\n      let i = this.count;\n      while (i--) {\n        this.moveStar(i, timepassed / 16, true);\n        if (this._starsEnabled[i]) {\n          this.moveStar(i, -5, false);\n        }\n      }\n    }\n    return ret;\n  }\n\n  resize(output, additionalModifier) {\n    this._needInit = true;\n  }\n\n  detect(context, x, y) {\n    return this._detectHelper(context, x, y, false);\n  }\n\n  // Draw-Funktion\n  draw(context, additionalModifier) {\n    if (this.enabled) {\n      context.globalCompositeOperation = this.compositeOperation;\n      context.globalAlpha = this.alpha * additionalModifier.alpha;\n\n      if (this.moveY == 0 && this.moveZ == 0 && this.moveX < 0) {\n        context.fillStyle = this.color;\n        let i = this.count;\n        while (i--) {\n          if (this._starsEnabled[i]) {\n            context.fillRect(\n              this._starsNewX[i],\n              this._starsNewY[i] -\n                (this._starsLineWidth[i] * this.lineWidth) / 2,\n              this._starsOldX[i] - this._starsNewX[i],\n              this._starsLineWidth[i] * this.lineWidth\n            );\n          }\n        }\n      } else {\n        context.strokeStyle = this.color;\n        if (this.highScale) {\n          let i = this.count;\n          while (i--) {\n            if (this._starsEnabled[i]) {\n              context.beginPath();\n              context.lineWidth = this._starsLineWidth[i] * this.lineWidth;\n              context.moveTo(this._starsOldX[i], this._starsOldY[i]);\n              context.lineTo(this._starsNewX[i], this._starsNewY[i]);\n              context.stroke();\n              context.closePath();\n            }\n          }\n        } else {\n          let lw = 5,\n            i;\n          while (--lw) {\n            context.beginPath();\n            context.lineWidth = lw * this.lineWidth;\n            i = this.count;\n            while (i--) {\n              if (this._starsEnabled[i] && this._starsLineWidth[i] === lw) {\n                context.moveTo(this._starsOldX[i], this._starsOldY[i]);\n                context.lineTo(this._starsNewX[i], this._starsNewY[i]);\n              }\n            }\n            context.stroke();\n            context.closePath();\n          }\n        }\n      }\n    }\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class Callback {\n\n    constructor(callback, duration) {\n      this.callback = callback;\n      this.duration = ifNull(calc(duration), undefined);\n      this.initialized = false;\n    }\n\n    reset() {\n      this.initialized = false;\n    }\n\n    run(sprite, time) {\n      let result;\n\n      if (this.duration !== undefined) {\n        this.callback(sprite, Math.min(time, this.duration), !this.initialized);\n        this.initialized = true;\n        return time - this.duration;\n      } else {\n        result = this.callback(sprite, time, !this.initialized);\n        this.initialized = true;\n        return result;\n      }\n    };\n}","import calc from \"../func/calc.mjs\";\r\nimport ifNull from \"../func/ifNull.mjs\";\r\nimport tinycolor from \"@ctrl/tinycolor\";\r\nconst tinycolorf =  typeof(tinycolor) === 'function' ? tinycolor : tinycolor.tinycolor\r\n\r\nconst degToRad = 0.017453292519943295; //Math.PI / 180;\r\n\r\nfunction moveDefault(progress, data) {\r\n  return data.from + progress * data.delta;\r\n}\r\n\r\nfunction moveBezier(progress, data) {\r\n  var copy = [...data.values],\r\n    copyLength = copy.length,\r\n    i;\r\n\r\n  while (copyLength > 1) {\r\n    copyLength--;\r\n    for (i = 0; i < copyLength; i++) {\r\n      copy[i] = copy[i] + progress * (copy[i + 1] - copy[i]);\r\n    }\r\n  }\r\n  return copy[0];\r\n}\r\n\r\nfunction moveColor(progress, data, sprite) {\r\n  return data.colorFrom.mix(data.colorTo, progress * 100).toString();\r\n}\r\n\r\nfunction movePath(progress, data, sprite) {\r\n  return sprite.changeToPath(progress, data, sprite);\r\n}\r\n\r\n// to values of a object\r\nexport default class ChangeTo {\r\n  constructor(changeValues, duration, ease) {\r\n    this.initialized = false;\r\n    this.changeValues = [];\r\n    for (let k in changeValues) {\r\n      const orgValue = changeValues[k];\r\n      const value = k === \"rotationInDegree\" ? orgValue * degToRad : orgValue;\r\n      const isColor = k === \"color\" || k === \"borderColor\";\r\n      const isPath = k === \"path\";\r\n      const isFunction = typeof value === \"function\";\r\n      const isBezier = !isColor && Array.isArray(value);\r\n      const names =\r\n        k === \"scale\"\r\n          ? [\"scaleX\", \"scaleY\"]\r\n          : k === \"rotationInRadian\" || k === \"rotationInDegree\"\r\n          ? [\"rotation\"]\r\n          : [k];\r\n      for (const name of names) {\r\n        this.changeValues.push({\r\n          name,\r\n          to: isBezier ? value[value.length - 1] : calc(value, 1, {}),\r\n          bezier: isBezier ? value : false,\r\n          isColor,\r\n          isPath,\r\n          isFunction: isFunction ? value : false,\r\n          moveAlgorithm: isColor\r\n            ? moveColor\r\n            : isPath\r\n            ? movePath\r\n            : isBezier\r\n            ? moveBezier\r\n            : moveDefault\r\n        });\r\n      }\r\n    }\r\n    this.duration = ifNull(calc(duration), 0);\r\n    this.ease = ifNull(ease, t => t);\r\n  }\r\n\r\n  reset() {\r\n    this.initialized = false;\r\n  }\r\n\r\n  init(sprite, time) {\r\n    var l = this.changeValues.length,\r\n      data;\r\n    while (l--) {\r\n      data = this.changeValues[l];\r\n      if (data.isFunction) {\r\n        data.from = sprite[data.name];\r\n        data.to = data.isFunction(data.from);\r\n        if (data.isColor) {\r\n          data.colorFrom = tinycolorf(data.from);\r\n          data.colorTo = tinycolorf(data.to);\r\n          data.moveAlgorithm = moveColor;\r\n        } else if (data.isPath) {\r\n          [data.pathFrom, data.pathTo] = sprite.changeToPathInit(\r\n            data.from,\r\n            data.to\r\n          );\r\n          data.moveAlgorithm = movePath;\r\n        } else if (Array.isArray(data.to)) {\r\n          data.values = [sprite[data.name], ...data.to];\r\n          data.moveAlgorithm = moveBezier;\r\n        } else {\r\n          data.delta = data.to - data.from;\r\n          data.moveAlgorithm = moveDefault;\r\n        }\r\n      } else if (data.isColor) {\r\n        data.colorFrom = tinycolorf(sprite[data.name]);\r\n        data.colorTo = tinycolorf(data.to);\r\n      } else if (data.isPath) {\r\n        [data.pathFrom, data.pathTo] = sprite.changeToPathInit(\r\n          sprite[data.name],\r\n          data.to\r\n        );\r\n      } else if (data.bezier) {\r\n        data.values = [sprite[data.name], ...data.bezier];\r\n      } else {\r\n        data.from = sprite[data.name];\r\n        data.delta = data.to - data.from;\r\n      }\r\n    }\r\n  }\r\n\r\n  run(sprite, time) {\r\n    if (!this.initialized) {\r\n      this.initialized = true;\r\n      this.init(sprite, time);\r\n    }\r\n\r\n    // return time left\r\n    if (this.duration <= time) {\r\n      let l = this.changeValues.length;\r\n      let data;\r\n\r\n      // prevent round errors by applying end-data\r\n      while (l--) {\r\n        data = this.changeValues[l];\r\n        sprite[data.name] = data.to;\r\n      }\r\n    } else {\r\n      let l = this.changeValues.length;\r\n      let data;\r\n      const progress = this.ease(time / this.duration);\r\n\r\n      while (l--) {\r\n        data = this.changeValues[l];\r\n        sprite[data.name] = data.moveAlgorithm(progress, data, sprite);\r\n      }\r\n    }\r\n    return time - this.duration;\r\n  }\r\n}\r\n","import Sequence from './Sequence.mjs';\n\nexport default class End {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_FORCE_DISABLE;\n\t}\n}","import Sequence from './Sequence.mjs';\n\nexport default class EndDisabled {\n\n    constructor() {\n    }\n\n    run(sprite, time) {\n        sprite.enabled = false;\n        return Sequence._TIMELAPSE_TO_FORCE_DISABLE;\n    };\n}","import Sequence from \"./Sequence.mjs\";\n\nexport default class Forever {\n  constructor(...Aniobject) {\n    this.Aniobject =\n      Aniobject[0] instanceof Sequence\n        ? Aniobject[0]\n        : new Sequence(...Aniobject);\n  }\n\n  reset(timelapsed = 0) {\n    this.Aniobject.reset && this.Aniobject.reset(timelapsed);\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.Aniobject.play && this.Aniobject.play(label, timelapsed);\n  }\n\n  run(sprite, time, isDifference) {\n    let t = time;\n    while (t >= 0) {\n      t = this.Aniobject.run(sprite, t, isDifference);\n      isDifference = true;\n      if (t === true) {\n        return true;\n      }\n      if (t >= 0) {\n        this.Aniobject.reset && this.Aniobject.reset();\n      }\n    }\n    return t;\n  }\n}\n","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\n\nexport default class If {\n  constructor(ifCallback, Aniobject, AniobjectElse) {\n    this.ifCallback = ifCallback;\n    this.Aniobject = Aniobject;\n    this.AniobjectElse = ifNull(AniobjectElse, () => 0);\n  }\n\n  run(sprite, time) {\n    const AniObject = calc(this.ifCallback)\n      ? this.Aniobject\n      : this.AniobjectElse;\n    return AniObject.run\n      ? AniObject.run(sprite, time)\n      : AniObject(sprite, time);\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\nimport ImageManager from '../ImageManager.mjs';\n\nexport default class Image {\n\n  constructor(image, durationBetweenFrames) {\n    this.initialized = false;\n    this.image = calc(image);\n    this.durationBetweenFrames = ifNull(calc(durationBetweenFrames), 0);\n    if (Array.isArray(this.image)) {\n      this.count = this.image.length;\n    } else {\n      this.image = [this.image];\n      this.count = 1;\n    }\n    this.duration = this.count * this.durationBetweenFrames;\n  }\n\n  reset() {\n    this.initialized = false;\n  };\n\n  run(sprite, time) {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.current = -1;\n    }\n\n    // return time left\n    if (time >= this.duration) {\n      sprite.image = ImageManager.getImage(this.image[this.image.length - 1]);\n    } else {\n      let currentFrame = Math.floor(time / this.durationBetweenFrames);\n      if (currentFrame !== this.current) {\n        this.current = currentFrame;\n        sprite.image = ImageManager.getImage(this.image[this.current]);\n      }\n    }\n    return time - this.duration;\n  }\n}","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class ImageFrame {\n\n    constructor(frameNumber, framesToRight, durationBetweenFrames) {\n        this.initialized = false;\n        this.frameNumber = calc(frameNumber);\n        this.framesToRight = ifNull(calc(framesToRight), true);\n        this.durationBetweenFrames = ifNull(calc(durationBetweenFrames), 0);\n        if (!Array.isArray(this.frameNumber)) {\n            this.frameNumber = [this.frameNumber];\n        }\n        this.duration = this.frameNumber.length * this.durationBetweenFrames;\n    }\n\n    run(sprite, time) {\n        let currentFrame = 0;\n        if (time >= this.duration) {\n            currentFrame = this.frameNumber[this.frameNumber.length - 1];\n        } else {\n            currentFrame = this.frameNumber[Math.floor(time / this.durationBetweenFrames)];\n        }\n        if (this.framesToRight) {\n            sprite.frameX = sprite.frameWidth * currentFrame;\n        } else {\n            sprite.frameY = sprite.frameHeight * currentFrame;\n        }\n\n        return time - this.duration;\n    }\n}","import calc from \"../func/calc.mjs\";\nimport ifNull from \"../func/ifNull.mjs\";\nimport Sequence from \"./Sequence.mjs\";\n\nexport default class Loop {\n  constructor(times, ...Aniobject) {\n    this.Aniobject =\n      Aniobject[0] instanceof Sequence\n        ? Aniobject[0]\n        : new Sequence(...Aniobject);\n    this.times = this.timesOrg = ifNull(calc(times), 1);\n  }\n\n  reset(timelapsed = 0) {\n    this.times = this.timesOrg;\n    this.Aniobject.reset && this.Aniobject.reset(timelapsed);\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.times = this.timesOrg;\n    this.Aniobject.play && this.Aniobject.play(label, timelapsed);\n  }\n\n  run(sprite, time, isDifference) {\n    let t = time;\n    while (t >= 0 && this.times > 0) {\n      t = this.Aniobject.run(sprite, t, isDifference);\n      isDifference = true;\n      if (t === true) {\n        return true;\n      }\n      if (t >= 0) {\n        this.times--;\n        this.Aniobject.reset && this.Aniobject.reset();\n      }\n    }\n    return t;\n  }\n}\n","import calc from '../func/calc.mjs';\nimport ChangeTo from './ChangeTo.mjs';\n\nconst DURATION_FOR_1PX = 10;\n\nexport default class Move extends ChangeTo {\n  constructor(x, y, speed, ease) {\n    super({\n      x,\n      y\n    }, 0, ease);\n    this.speed = calc(speed) || 1;\n  }\n\n  init(sprite, time) {\n    if (this.speed == 0 || (this.targetX === sprite.x && this.targetY === sprite.y)) {\n      this.duration = 0;\n    }\n    else {\n      let x = this.changeValues[0],\n        y = this.changeValues[1];\n\n      x.from = sprite.x;\n      y.from = sprite.y;\n\n      x.delta = x.to - x.from;\n      y.delta = y.to - y.from;\n\n      const hypotenuse = Math.sqrt(x.delta * x.delta + y.delta * y.delta);\n\n      this.duration = hypotenuse * DURATION_FOR_1PX / this.speed;\n    }\n\n    super.init(sprite, time);\n  };\n}\n","import Sequence from './Sequence.mjs';\n\nexport default class Remove {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_REMOVE;\n\t}\n}","import calc from '../func/calc.mjs';\nimport ifNull from '../func/ifNull.mjs';\n\nexport default class Once {\n  constructor(Aniobject, times) {\n    this.Aniobject = Aniobject;\n    this.times = ifNull(calc(times), 1);\n  }\n\n  run(sprite, time) {\n    if (this.times <= 0) {\n      return time;\n    }\n    else {\n      let t = this.Aniobject.run(sprite, time);\n      if (t >= 0) {\n        this.times--;\n      }\n      return t;\n    }\n  };\n}","import calc from '../func/calc.mjs';\n\nexport default class Shake {\n\n  constructor(shakediff, duration) {\n    this.initialized = false;\n    this.duration = calc(duration);\n    this.shakeDiff = calc(shakediff);\n    this.shakeDiffHalf = this.shakeDiff / 2;\n  }\n\n  reset() {\n    this.initialized = false;\n  }\n\n  run(sprite, time) {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.x = sprite.x;\n      this.y = sprite.y;\n    }\n\n    // return time left\n    if (time >= this.duration) {\n      // prevent round errors\n      sprite.x = this.x;\n      sprite.y = this.y;\n    } else {\n      // shake sprite\n      sprite.x = this.x + Math.random() * this.shakeDiff - this.shakeDiffHalf;\n      sprite.y = this.y + Math.random() * this.shakeDiff - this.shakeDiffHalf;\n    }\n    return time - this.duration;\n  }\n}","export default class ShowOnce {\n\n    constructor() {\n        this.showOnce = true;\n    }\n\n    run(sprite, time) {\n        sprite.enabled = sprite.enabled && this.showOnce;\n        this.showOnce = false;\n        return 0;\n    }\n}","import Sequence from './Sequence.mjs';\n\nclass State {\n  constructor({\n    states = {},\n    transitions = {},\n    default: defaultState = undefined,\n    delegateTo = undefined\n  } = {}) {\n    // save possible states\n    this.states = states;\n    Object.keys(this.states).forEach(i => {\n      if (Array.isArray(this.states[i])) {\n        this.states[i] = new Sequence(this.states[i])\n      }\n    });\n    // save transitions\n    this.transitions = transitions;\n    // save delegateTo\n    this.delegateTo = delegateTo;\n    // set start state\n    this.currentStateName = defaultState;\n    this.currentState = this.states[defaultState];\n    this.isTransitioningToStateName = undefined;\n  }\n\n  setState(name, options) {\n    if (name !== this.currentStateName) {\n      this.isTransitioningToStateName = name;\n      const UCFirstName = `${name.charAt(0).toUpperCase()}${name.slice(1)}`;\n      const possibleTransitionNames = [\n        `${this.currentStateName}To${UCFirstName}`,\n        `${this.currentStateName}To`,\n        `to${UCFirstName}`\n      ];\n      const transitionName = possibleTransitionNames.find(\n        name => this.transitions[name]\n      );\n      if (transitionName) {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.transitions[transitionName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n      } else {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.states[this.currentStateName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n        this.isTransitioningToStateName = undefined;\n      }\n    }\n    // search through transitions\n    // delegateTo - search through list\n  }\n\n  play(label = \"\", timelapsed = 0) {\n    this.currentState.play && this.currentState.play(label, timelapsed);\n  }\n\n  run(sprite, time, is_difference) {\n    let timeLeft = time;\n    let isDifference = is_difference;\n    if (this.currentState) {\n      timeLeft = this.currentState.run(sprite, timeLeft, isDifference);\n      if (timeLeft === true) {\n        return true\n      }\n      isDifference = true;\n    }\n    if (timeLeft >= 0 || !this.currentState) {\n      if (this.isTransitioningToStateName) {\n        this.currentStateName = this.isTransitioningToStateName;\n        this.currentState = this.states[this.currentStateName];\n        this.currentState && this.currentState.reset && this.currentState.reset();\n        this.isTransitioningToStateName = undefined;\n        timeLeft = this.currentState.run(sprite, timeLeft, isDifference);\n        if (timeLeft === true) {\n          return true\n        }\n      } else {\n        this.currentState = undefined;\n      }\n    }\n    return -1;\n  }\n}\n\nexport default State;\n","import Sequence from './Sequence.mjs';\n\nexport default class End {\n\n\tconstructor() {\n\t}\n\n\trun(sprite, time){\n\t\treturn Sequence._TIMELAPSE_TO_STOP;\n\t}\n}","import Sequence from './Sequence.mjs';\n\nexport default class EndDisabled {\n\n    constructor() {\n    }\n\n    run(sprite, time) {\n        sprite.enabled = false;\n        return Sequence._TIMELAPSE_TO_STOP;\n    };\n}","import Callback from './Animations/Callback.mjs';\nimport ChangeTo from './Animations/ChangeTo.mjs';\nimport End from './Animations/End.mjs';\nimport EndDisabled from './Animations/EndDisabled.mjs';\nimport Forever from './Animations/Forever.mjs';\nimport If from './Animations/If.mjs';\nimport Image from './Animations/Image.mjs';\nimport ImageFrame from './Animations/ImageFrame.mjs';\nimport Loop from './Animations/Loop.mjs';\nimport Move from './Animations/Move.mjs';\nimport Remove from './Animations/Remove.mjs';\nimport Sequence from './Animations/Sequence.mjs';\nimport Once from './Animations/Once.mjs';\nimport Shake from './Animations/Shake.mjs';\nimport ShowOnce from './Animations/ShowOnce.mjs';\nimport State from './Animations/State.mjs';\nimport Stop from './Animations/Stop.mjs';\nimport StopDisabled from './Animations/StopDisabled.mjs';\nimport Wait from './Animations/Wait.mjs';\nimport WaitDisabled from './Animations/WaitDisabled.mjs';\n\nexport default {\n  Callback,\n  ChangeTo,\n  End,\n  EndDisabled,\n  Forever,\n  If,\n  Image,\n  ImageFrame,\n  Loop,\n  Move,\n  Once,\n  Remove,\n  Sequence,\n  Shake,\n  ShowOnce,\n  State,\n  Stop,\n  StopDisabled,\n  Wait,\n  WaitDisabled\n};\n","import calc from '../func/calc.mjs';\nimport ifNull from \"../func/ifNull.mjs\";\n\nexport default class WaitDisabled {\n\n  constructor(duration) {\n    this.duration = ifNull(calc(duration), 0);\n  }\n\n  run(sprite, time) {\n    // return time left\n    sprite.enabled = (time >= this.duration);\n    return time - this.duration;\n  }\n}","// https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js\n// Last updated November 2011\n// By Simon Sarris\n// www.simonsarris.com\n// sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    var t = new Transform();\n//    t.rotate(5);\n//    var m = t.m;\n//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n// Remember that this does not account for any CSS transforms applied to the canvas\n//https://www.npmjs.com/package/canvas-get-transform\nfunction Transform() {\n  this.reset();\n}\n\nTransform.prototype.reset = function() {\n  this.m = [1,0,0,1,0,0];\n  return this;\n};\n\nTransform.prototype.multiply = function(matrix) {\n  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  this.m[4] = dx;\n  this.m[5] = dy;\n  return this;\n};\n\nTransform.prototype.invert = function() {\n  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n  var m0 = this.m[3] * d;\n  var m1 = -this.m[1] * d;\n  var m2 = -this.m[2] * d;\n  var m3 = this.m[0] * d;\n  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n  this.m[0] = m0;\n  this.m[1] = m1;\n  this.m[2] = m2;\n  this.m[3] = m3;\n  this.m[4] = m4;\n  this.m[5] = m5;\n  return this;\n};\n\nTransform.prototype.rotate = function(rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  return this;\n};\n\nTransform.prototype.translate = function(x, y) {\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n  return this;\n};\n\nTransform.prototype.scale = function(sx, sy) {\n  this.m[0] *= sx;\n  this.m[1] *= sx;\n  this.m[2] *= sy;\n  this.m[3] *= sy;\n  return this;\n};\n\nTransform.prototype.transformPoint = function(px, py) {\n  var x = px;\n  var y = py;\n  px = x * this.m[0] + y * this.m[2] + this.m[4];\n  py = x * this.m[1] + y * this.m[3] + this.m[5];\n  return [px, py];\n};\n\nTransform.prototype.clone = function() {\n  var n = new Transform();\n  n.m = this.m.slice(0);\n  return n;\n}\n\nexport default Transform;\n","import Transform from \"../func/Transform.mjs\";\r\n\r\nexport default class Camera {\r\n  constructor() {\r\n    this.type = \"camera\";\r\n    this.cam = {\r\n      zoom: 1,\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n  }\r\n\r\n  viewport({}, matrix) {\r\n    return matrix\r\n      .scale(this.cam.zoom, this.cam.zoom)\r\n      .translate(-this.cam.x, -this.cam.y);\r\n  }\r\n\r\n  viewportByCam({ engine }, cam) {\r\n    const hw = engine.getWidth() / 2;\r\n    const hh = engine.getHeight() / 2;\r\n    const scale = engine.getRatio() > 1 ? hw : hh;\r\n    return new Transform()\r\n      .translate(hw, hh)\r\n      .scale(scale, scale)\r\n      .scale(cam.zoom, cam.zoom)\r\n      .translate(-cam.x, -cam.y);\r\n  }\r\n\r\n  additionalModifier({}, additionalModifier) {\r\n    additionalModifier.cam = {...this.cam};\r\n    return additionalModifier;\r\n  }\r\n\r\n  clampView({ engine, scene, clampLimits }, cam) {\r\n    const cl = clampLimits || {\r\n      x1: scene.additionalModifier.x,\r\n      y1: scene.additionalModifier.y,\r\n      x2: scene.additionalModifier.x + scene.additionalModifier.width,\r\n      y2: scene.additionalModifier.y + scene.additionalModifier.height,\r\n    };\r\n    const invert = this.viewportByCam({ engine }, cam).invert();\r\n    const [x1, y1] = invert.transformPoint(0, 0);\r\n    const [x2, y2] = invert.transformPoint(\r\n      engine.getWidth(),\r\n      engine.getHeight()\r\n    );\r\n\r\n    // check for x\r\n    // is there a zoom in?\r\n    if (x2 - x1 <= cl.x2 - cl.x1) {\r\n      if (x1 < cl.x1) {\r\n        if (x2 <= cl.x2) {\r\n          cam.x += cl.x1 - x1;\r\n        }\r\n      } else {\r\n        if (x2 > cl.x2) {\r\n          cam.x += cl.x2 - x2;\r\n        }\r\n      }\r\n    } else {\r\n      if (x1 > cl.x1) {\r\n        cam.x += cl.x1 - x1;\r\n      } else {\r\n        if (x2 < cl.x2) {\r\n          cam.x += cl.x2 - x2;\r\n        }\r\n      }\r\n    }\r\n\r\n    // check for y\r\n    // zoom in?\r\n    if (y2 - y1 <= cl.y2 - cl.y1) {\r\n      if (y1 < cl.y1) {\r\n        if (y2 <= cl.y2) {\r\n          cam.y += cl.y1 - y1;\r\n        }\r\n      } else {\r\n        if (y2 > cl.y2) {\r\n          cam.y += cl.y2 - y2;\r\n        }\r\n      }\r\n    } else {\r\n      if (y1 > cl.y1) {\r\n        cam.y += cl.y1 - y1;\r\n      } else {\r\n        if (y2 < cl.y2) {\r\n          cam.y += cl.y2 - y2;\r\n        }\r\n      }\r\n    }\r\n    return cam;\r\n  }\r\n\r\n  set zoom(value) {\r\n    this.cam.zoom = value;\r\n  }\r\n\r\n  set camX(v) {\r\n    this.cam.x = v;\r\n  }\r\n\r\n  set camY(v) {\r\n    this.cam.y = v;\r\n  }\r\n\r\n  get zoom() {\r\n    return this.cam.zoom;\r\n  }\r\n\r\n  get camX() {\r\n    return this.cam.x;\r\n  }\r\n\r\n  get camY() {\r\n    return this.cam.y;\r\n  }\r\n\r\n  zoomToFullScreen({ scene }) {\r\n    return Math.min(\r\n      scene.additionalModifier.fullScreen.width /\r\n        scene.additionalModifier.width,\r\n      scene.additionalModifier.fullScreen.height /\r\n        scene.additionalModifier.height\r\n    );\r\n  }\r\n\r\n  zoomTo({ scene, engine, cam, x1, y1, x2, y2 }) {\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    const invert = this.viewportByCam({ engine }, cam || this.cam).invert();\r\n    const [sx1, sy1] = invert.transformPoint(0, 0);\r\n    const [sx2, sy2] = invert.transformPoint(\r\n      engine.getWidth() * scale,\r\n      engine.getHeight() * scale\r\n    );\r\n    const sw = sx2 - sx1;\r\n    const sh = sy2 - sy1;\r\n    const w = x2 - x1;\r\n    const h = y2 - y1;\r\n    const mx = x1 + w / 2;\r\n    const my = y1 + h / 2;\r\n    const zoomX = sw / w;\r\n    const zoomY = sh / h;\r\n    const ret = {\r\n      x: mx,\r\n      y: my,\r\n      zoom: cam.zoom * Math.max(Math.min(zoomX, zoomY), Number.MIN_VALUE),\r\n    };\r\n    if (cam) {\r\n      cam.x = ret.x;\r\n      cam.y = ret.y;\r\n      cam.zoom = ret.zoom;\r\n    } else {\r\n      this.cam = ret;\r\n    }\r\n  }\r\n}\r\n","const clickTime = 300;\r\nexport default class CameraControl {\r\n  constructor(config = {}) {\r\n    this.type = \"control\";\r\n    this._mousePos = {};\r\n    this.toCam = {};\r\n    this.config = Object.assign(\r\n      {\r\n        zoomMax: 10,\r\n        zoomMin: 0.5,\r\n        zoomFactor: 1.2,\r\n        tween: 2,\r\n        callResize: true,\r\n      },\r\n      config\r\n    );\r\n  }\r\n\r\n  init({ scene }) {\r\n    this._scene = scene;\r\n    this.toCam = Object.assign({}, scene.camera.cam);\r\n  }\r\n\r\n  mouseDown({ event: e, position: [mx, my], button: i }) {\r\n    this._mousePos[i] = Object.assign({}, this._mousePos[i], {\r\n      x: mx,\r\n      y: my,\r\n      _cx: this.toCam.x,\r\n      _cy: this.toCam.y,\r\n      _isDown: true,\r\n      _numOfFingers: (e.touches && e.touches.length) || 1,\r\n      _distance: undefined,\r\n      _timestamp: Date.now(),\r\n    });\r\n  }\r\n\r\n  mouseUp({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (!this._mousePos[i]) {\r\n      this._mousePos[i] = {};\r\n    }\r\n    const down = this._mousePos[i]._isDown;\r\n    const numCurrentFingers =\r\n      (e.changedTouches && e.changedTouches.length) || 1;\r\n    const numOfFingers = Math.max(\r\n      this._mousePos[i]._numOfFingers,\r\n      numCurrentFingers\r\n    );\r\n    this._mousePos[i]._isDown = false;\r\n    this._mousePos[i]._numOfFingers -= numCurrentFingers;\r\n\r\n    if (!down || numOfFingers > 1) {\r\n      scene.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !(\r\n        (\r\n          Date.now() - this._mousePos[i]._timestamp < clickTime &&\r\n          Math.abs(this._mousePos[i].x - mx) < 5 &&\r\n          Math.abs(this._mousePos[i].y - my) < 5 &&\r\n          i === 1\r\n        ) // i === 0\r\n      )\r\n    ) {\r\n      scene.stopPropagation();\r\n    }\r\n  }\r\n\r\n  mouseOut({ button: i }) {\r\n    if (this._mousePos[i]) this._mousePos[i]._isDown = false;\r\n  }\r\n\r\n  mouseMove({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (\r\n      !this._mousePos[i] ||\r\n      !this._mousePos[i]._isDown ||\r\n      (e.which === 0 && !e.touches)\r\n    ) {\r\n      return;\r\n    }\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    if (e.touches && e.touches.length >= 2) {\r\n      const t = e.touches;\r\n      // get distance of two finger\r\n      const distance = Math.sqrt(\r\n        (t[0].pageX - t[1].pageX) * (t[0].pageX - t[1].pageX) +\r\n          (t[0].pageY - t[1].pageY) * (t[0].pageY - t[1].pageY)\r\n      );\r\n      if (this._mousePos[i]._distance === undefined) {\r\n        if (distance > 0) {\r\n          this._mousePos[i]._distance = distance;\r\n          this._mousePos[i]._czoom = this.toCam.zoom;\r\n        }\r\n      } else {\r\n        this.toCam.zoom = Math.max(\r\n          this.config.zoomMin,\r\n          Math.min(\r\n            this.config.zoomMax,\r\n            (this._mousePos[i]._czoom * distance) / this._mousePos[i]._distance\r\n          )\r\n        );\r\n\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n      return;\r\n    } else {\r\n      this._mousePos[i]._distance = undefined;\r\n      const viewMatrix = scene.camera\r\n        .viewportByCam(arguments[0], this.toCam)\r\n        .invert();\r\n      const [ox, oy] = viewMatrix.transformPoint(\r\n        this._mousePos[i].x * scale,\r\n        this._mousePos[i].y * scale\r\n      );\r\n      const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n      this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n      this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n      this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n    }\r\n  }\r\n\r\n  mouseWheel({ event: e, position: [mx, my], scene }) {\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    const [ox, oy] = scene.camera\r\n      .viewportByCam(arguments[0], this.toCam)\r\n      .invert()\r\n      .transformPoint(mx * scale, my * scale);\r\n    const wheelData = e.wheelDelta || e.deltaY * -1;\r\n    if (wheelData / 120 > 0) {\r\n      this.zoomIn();\r\n      const [nx, ny] = scene.camera\r\n        .viewportByCam(arguments[0], this.toCam)\r\n        .invert()\r\n        .transformPoint(mx * scale, my * scale);\r\n      this.toCam.x -= nx - ox;\r\n      this.toCam.y -= ny - oy;\r\n      this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n    } else {\r\n      this.zoomOut(arguments[0]);\r\n    }\r\n  }\r\n\r\n  hasCamChanged() {\r\n    const t = this.config.tween || 1;\r\n    return (\r\n      Math.abs(this.toCam.x - this._scene.camera.cam.x) >= Number.EPSILON * t ||\r\n      Math.abs(this.toCam.y - this._scene.camera.cam.y) >= Number.EPSILON * t ||\r\n      Math.abs(this.toCam.zoom - this._scene.camera.cam.zoom) >=\r\n        Number.EPSILON * t\r\n    );\r\n  }\r\n\r\n  fixedUpdate({ scene, lastCall }) {\r\n    if (this.config.tween && !this._instant && this.hasCamChanged()) {\r\n      scene.camera.cam.x +=\r\n        (this.toCam.x - scene.camera.cam.x) / this.config.tween;\r\n      scene.camera.cam.y +=\r\n        (this.toCam.y - scene.camera.cam.y) / this.config.tween;\r\n      scene.camera.cam.zoom +=\r\n        (this.toCam.zoom - scene.camera.cam.zoom) / this.config.tween;\r\n      if (lastCall) {\r\n        scene.additionalModifier.cam = this.cam;\r\n        if (this.config.callResize) {\r\n          scene.resize();\r\n        } else {\r\n          scene.cacheClear();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  update({ scene }) {\r\n    if ((!this.config.tween || this._instant) && this.hasCamChanged()) {\r\n      this._instant = false;\r\n      scene.camera.cam = Object.assign({}, this.toCam);\r\n      if (this.config.callResize) {\r\n        scene.resize();\r\n      } else {\r\n        scene.cacheClear();\r\n      }\r\n    }\r\n  }\r\n\r\n  camInstant() {\r\n    this._instant = true;\r\n  }\r\n\r\n  resize(args) {\r\n    this.toCam = args.scene.camera.clampView(args, this.toCam);\r\n  }\r\n\r\n  zoomToNorm() {\r\n    this.toCam.zoom = 1;\r\n    return this;\r\n  }\r\n  zoomIn() {\r\n    this.toCam.zoom = Math.min(\r\n      this.config.zoomMax,\r\n      this.toCam.zoom * this.config.zoomFactor\r\n    );\r\n    return this;\r\n  }\r\n  zoomOut(args) {\r\n    this.toCam.zoom = Math.max(\r\n      this.config.zoomMin,\r\n      this.toCam.zoom / this.config.zoomFactor\r\n    );\r\n    if (args) this.toCam = this._scene.camera.clampView(args, this.toCam);\r\n    return this;\r\n  }\r\n\r\n  zoomTo(params) {\r\n    params.cam = this.toCam;\r\n    params.scene.camera.zoomTo(params);\r\n  }\r\n}\r\n","import Callback from \"./Middleware/Camera.mjs\";\r\nimport Camera from \"./Middleware/Camera.mjs\";\r\nimport CameraControl from \"./Middleware/CameraControl.mjs\";\r\nimport CameraControlSecondButton from \"./Middleware/CameraControlSecondButton.mjs\";\r\nimport Click from \"./Middleware/Click.mjs\";\r\nimport Element from \"./Middleware/Element.mjs\";\r\nimport Event from \"./Middleware/Event.mjs\";\r\nimport LoadingScreen from \"./Middleware/LoadingScreen.mjs\";\r\nimport Norm from \"./Middleware/Norm.mjs\";\r\nimport TimingAudio from \"./Middleware/TimingAudio.mjs\";\r\nimport TimingDefault from \"./Middleware/TimingDefault.mjs\";\r\n\r\nexport default {\r\n  Callback,\r\n  Camera,\r\n  CameraControl,\r\n  CameraControlSecondButton,\r\n  Click,\r\n  Element,\r\n  Event,\r\n  LoadingScreen,\r\n  Norm,\r\n  TimingAudio,\r\n  TimingDefault,\r\n};\r\n","import CameraControl from \"./CameraControl.mjs\";\r\nconst clickTime = 300;\r\n\r\nexport default class CameraControlSecondButton extends CameraControl {\r\n  mouseUp({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (!this._mousePos[i]) {\r\n      this._mousePos[i] = {};\r\n    }\r\n    const down = this._mousePos[i]._isDown;\r\n    const numCurrentFingers =\r\n      (e.changedTouches && e.changedTouches.length) || 1;\r\n    const numOfFingers = Math.max(\r\n      this._mousePos[i]._numOfFingers,\r\n      numCurrentFingers\r\n    );\r\n    this._mousePos[i]._isDown = false;\r\n    this._mousePos[i]._numOfFingers -= numCurrentFingers;\r\n\r\n    if (!down || numOfFingers > 1) {\r\n      scene.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    if (\r\n      (Date.now() - this._mousePos[i]._timestamp > clickTime ||\r\n        Math.abs(this._mousePos[i].x - mx) >= 5 ||\r\n        Math.abs(this._mousePos[i].y - my) >= 5) &&\r\n        i === 1\r\n    ) {\r\n      scene.stopPropagation();\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n      const [ox, oy] = scene.transformPoint(\r\n        this._mousePos[i].x,\r\n        this._mousePos[i].y\r\n      );\r\n      scene.map(\"region\", {\r\n        event: e,\r\n        x1: Math.min(ox, x),\r\n        y1: Math.min(oy, y),\r\n        x2: Math.max(ox, x),\r\n        y2: Math.max(oy, y),\r\n        fromX: ox,\r\n        fromY: oy,\r\n        toX: x,\r\n        toY: y,\r\n      });\r\n    }\r\n  }\r\n\r\n  mouseMove({ event: e, position: [mx, my], button: i, scene }) {\r\n    if (\r\n      !this._mousePos[i] ||\r\n      !this._mousePos[i]._isDown ||\r\n      (e.which === 0 && !e.touches)\r\n    ) {\r\n      return;\r\n    }\r\n    const scale = scene.additionalModifier.scaleCanvas;\r\n    if (e.touches && e.touches.length >= 2) {\r\n      const t = e.touches;\r\n      // get distance of two finger\r\n      const distance = Math.sqrt(\r\n        (t[0].pageX - t[1].pageX) * (t[0].pageX - t[1].pageX) +\r\n          (t[0].pageY - t[1].pageY) * (t[0].pageY - t[1].pageY)\r\n      );\r\n      if (this._mousePos[i]._distance === undefined) {\r\n        if (distance > 0) {\r\n          this._mousePos[i]._distance = distance;\r\n          this._mousePos[i]._czoom = this.toCam.zoom;\r\n        }\r\n      } else {\r\n        this.toCam.zoom = Math.max(\r\n          this.config.zoomMin,\r\n          Math.min(\r\n            this.config.zoomMax,\r\n            (this._mousePos[i]._czoom * distance) / this._mousePos[i]._distance\r\n          )\r\n        );\r\n\r\n        const viewMatrix = scene.camera\r\n          .viewportByCam(arguments[0], this.toCam)\r\n          .invert();\r\n        const [ox, oy] = viewMatrix.transformPoint(\r\n          this._mousePos[i].x * scale,\r\n          this._mousePos[i].y * scale\r\n        );\r\n        const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n        this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n        this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n      return;\r\n    } else {\r\n      this._mousePos[i]._distance = undefined;\r\n      if (i === 2) {\r\n        const viewMatrix = scene.camera\r\n          .viewportByCam(arguments[0], this.toCam)\r\n          .invert();\r\n        const [ox, oy] = viewMatrix.transformPoint(\r\n          this._mousePos[i].x * scale,\r\n          this._mousePos[i].y * scale\r\n        );\r\n        const [nx, ny] = viewMatrix.transformPoint(mx * scale, my * scale);\r\n        this.toCam.x = this._mousePos[i]._cx + ox - nx;\r\n        this.toCam.y = this._mousePos[i]._cy + oy - ny;\r\n\r\n        this.toCam = scene.camera.clampView(arguments[0], this.toCam);\r\n      }\r\n    }\r\n\r\n    if (\r\n      i === 1 &&\r\n      scene.has(\"regionMove\") &&\r\n      !(\r\n        Date.now() - this._mousePos[i]._timestamp < clickTime &&\r\n        Math.abs(this._mousePos[i].x - mx) < 5 &&\r\n        Math.abs(this._mousePos[i].y - my) < 5\r\n      ) &&\r\n      (!e.touches || e.touches.length === 1)\r\n    ) {\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n      const [ox, oy] = scene.transformPoint(\r\n        this._mousePos[i].x,\r\n        this._mousePos[i].y\r\n      );\r\n      scene.map(\"regionMove\", {\r\n        event: e,\r\n        x1: Math.min(ox, x),\r\n        y1: Math.min(oy, y),\r\n        x2: Math.max(ox, x),\r\n        y2: Math.max(oy, y),\r\n        fromX: ox,\r\n        fromY: oy,\r\n        toX: x,\r\n        toY: y,\r\n      });\r\n    }\r\n  }\r\n}\r\n","export default class Click {\r\n  /*\r\n    _doubleClickElementTimer = undefined;\r\n  */\r\n  constructor({ doubleClickDetectInterval = 350 } = {}) {\r\n    this._doubleClickDetectInterval = doubleClickDetectInterval;\r\n  }\r\n\r\n  mouseUp(param) {\r\n    const { scene, button } = param;\r\n    if (button === 1) {\r\n      if (scene.has(\"doubleClick\")) {\r\n        if (this._doubleClickElementTimer) {\r\n          clearTimeout(this._doubleClickElementTimer);\r\n          this._doubleClickElementTimer = 0;\r\n          scene.map(\"doubleClick\", param);\r\n        } else {\r\n          this._doubleClickElementTimer = setTimeout(() => {\r\n            this._doubleClickElementTimer = 0;\r\n            scene.map(\"click\", param);\r\n          }, this._doubleClickDetectInterval);\r\n        }\r\n      } else {\r\n        scene.map(\"click\", param);\r\n      }\r\n    }\r\n  }\r\n}\r\n","export default class Element {\r\n  /*\r\n  _clickIntend = false;\r\n  _hoverIntend = false;\r\n  _hasDetectImage = false;\r\n  _doubleClickElementTimer = undefined;\r\n  */\r\n  constructor({ doubleClickDetectInterval = 350 } = {}) {\r\n    this._doubleClickDetectInterval = doubleClickDetectInterval;\r\n  }\r\n\r\n  isDrawFrame() {\r\n    return this._hasDetectImage ? 1 : 0;\r\n  }\r\n\r\n  _dispatchEvent(scene, isClick, param) {\r\n    if (isClick) {\r\n      if (scene.has(\"doubleClickElement\")) {\r\n        if (this._doubleClickElementTimer) {\r\n          clearTimeout(this._doubleClickElementTimer);\r\n          this._doubleClickElementTimer = 0;\r\n          scene.map(\"doubleClickElement\", param);\r\n        } else {\r\n          this._doubleClickElementTimer = setTimeout(() => {\r\n            this._doubleClickElementTimer = 0;\r\n            scene.map(\"clickElement\", param);\r\n          }, this._doubleClickDetectInterval);\r\n        }\r\n      } else {\r\n        scene.map(\"clickElement\", param);\r\n      }\r\n    } else {\r\n      scene.map(\"hoverElement\", param);\r\n    }\r\n  }\r\n\r\n  _dispatchNonEvent(scene, isClick, param) {\r\n    if (isClick) {\r\n      if (scene.has(\"doubleClickNonElement\")) {\r\n        if (this._doubleClickElementTimer) {\r\n          clearTimeout(this._doubleClickElementTimer);\r\n          this._doubleClickElementTimer = undefined;\r\n          scene.map(\"doubleClickNonElement\", param);\r\n        } else {\r\n          this._doubleClickElementTimer = setTimeout(() => {\r\n            this._doubleClickElementTimer = undefined;\r\n            scene.map(\"clickNonElement\", param);\r\n          }, this._doubleClickDetectInterval);\r\n        }\r\n      } else {\r\n        scene.map(\"clickNonElement\", param);\r\n      }\r\n    } else {\r\n      scene.map(\"hoverNonElement\", param);\r\n    }\r\n  }\r\n\r\n  initSprites({ scene, output, layerManager, canvasId }) {\r\n    this._hasDetectImage = false;\r\n    if (this._clickIntend || this._hoverIntend) {\r\n      const isClick = !!this._clickIntend;\r\n      const { mx, my } = this._clickIntend || this._hoverIntend;\r\n      const scale = scene.additionalModifier.scaleCanvas;\r\n      const ctx = output.context[canvasId];\r\n      const cx = Math.round(mx / scale);\r\n      const cy = Math.round(my / scale);\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n\r\n      ctx.save();\r\n      ctx.setTransform(...scene.viewport().m);\r\n      let found = 0;\r\n      layerManager.forEach(({ layerId, element, isFunction, elementId }) => {\r\n        if (!isFunction) {\r\n          const a = element.detect(ctx, cx, cy);\r\n          if (a === \"c\") {\r\n            found = \"c\";\r\n          } else if (a) {\r\n            found = { layerId, element: a, elementId };\r\n            return false;\r\n          }\r\n        }\r\n      });\r\n      ctx.restore();\r\n\r\n      if (found === \"c\") {\r\n        this._hasDetectImage = true;\r\n      } else {\r\n        this._clickIntend = false;\r\n        this._hoverIntend = false;\r\n        const param = {\r\n          mx,\r\n          my,\r\n          x,\r\n          y,\r\n        };\r\n        if (found) {\r\n          Object.assign(param, found);\r\n          this._dispatchEvent(scene, isClick, param);\r\n        } else {\r\n          this._dispatchNonEvent(scene, isClick, param);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  draw({ engine, scene, layerManager, output, canvasId }) {\r\n    if (!canvasId && this._hasDetectImage) {\r\n      const isClick = !!this._clickIntend;\r\n      const { mx, my } = this._clickIntend || this._hoverIntend;\r\n      const scale = scene.additionalModifier.scaleCanvas;\r\n      const ctx = output.context[canvasId];\r\n      const cx = Math.round(mx / scale);\r\n      const cy = Math.round(my / scale);\r\n      const [x, y] = scene.transformPoint(mx, my);\r\n      const param = {\r\n        mx,\r\n        my,\r\n        x,\r\n        y,\r\n      };\r\n\r\n      const oldISE = ctx.imageSmoothingEnabled;\r\n      ctx.imageSmoothingEnabled = false;\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n      ctx.save();\r\n\r\n      ctx.setTransform(...scene.viewport().m);\r\n\r\n      layerManager.forEach(({ layerId, element, isFunction, elementId }) => {\r\n        if (!isFunction) {\r\n          const color = `rgb(${elementId & 0xff}, ${\r\n            (elementId & 0xff00) >> 8\r\n          }, ${layerId & 0xff})`;\r\n          element.detectDraw(ctx, color);\r\n        }\r\n      }, 0);\r\n      ctx.restore();\r\n      ctx.imageSmoothingEnabled = oldISE;\r\n      engine.normContext(ctx);\r\n\r\n      this._clickIntend = false;\r\n      this._hoverIntend = false;\r\n\r\n      const p = ctx.getImageData(cx, cy, 1, 1).data;\r\n      if (p[3]) {\r\n        param.layerId = p[2];\r\n        param.elementId = p[0] + (p[1] << 8);\r\n        param.element = layerManager\r\n          .getById(param.layerId)\r\n          .getById(param.elementId);\r\n        this._dispatchEvent(scene, isClick, param);\r\n      } else {\r\n        this._dispatchNonEvent(scene, isClick, param);\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseUp({ scene, position: [mx, my], button }) {\r\n    this._clickIntend = button === 1 && scene.has(\"clickElement\") && { mx, my };\r\n  }\r\n\r\n  mouseMove({ scene, position: [mx, my] }) {\r\n    this._hoverIntend = scene.has(\"hoverElement\") && { mx, my };\r\n  }\r\n}\r\n","export default class Events {\r\n  constructor() {\r\n    this.type = \"events\";\r\n  }\r\n\r\n  _pushEvent(command, event, scene) {\r\n    if (scene.value(\"preventDefault\") ?? true) event.preventDefault();\r\n    const [mx, my] = this.getMousePosition({ event });\r\n    const [x, y] = scene.transformPoint(mx, my);\r\n    scene.pipeBack(command, {\r\n      event,\r\n      position: [mx, my],\r\n      x,\r\n      y,\r\n      button: this.getMouseButton({ event }),\r\n    });\r\n  }\r\n\r\n  init({ output, scene }) {\r\n    const element = output.canvas[0];\r\n\r\n    const events = scene.map(\"events\");\r\n    events.push(\r\n      [\r\n        scene.has(\"mouseDown\") && [\r\n          [\"touchstart\", \"mousedown\"],\r\n          (event) => this._pushEvent(\"mouseDown\", event, scene),\r\n        ],\r\n        scene.has(\"mouseUp\") && [\r\n          [\"touchend\", \"mouseup\"],\r\n          (event) => this._pushEvent(\"mouseUp\", event, scene),\r\n        ],\r\n        scene.has(\"mouseOut\") && [\r\n          [\"touchendoutside\", \"mouseout\"],\r\n          (event) => this._pushEvent(\"mouseOut\", event, scene),\r\n        ],\r\n        scene.has(\"mouseMove\") && [\r\n          [\"touchmove\", \"mousemove\"],\r\n          (event) => this._pushEvent(\"mouseMove\", event, scene),\r\n        ],\r\n        scene.has(\"mouseWheel\") && [\r\n          [\"wheel\"],\r\n          (event) => this._pushEvent(\"mouseWheel\", event, scene),\r\n        ],\r\n        (scene.value(\"preventDefault\") ?? true) && [\r\n          [\"contextmenu\"],\r\n          (e) => e.preventDefault(),\r\n        ],\r\n      ].filter((v) => v)\r\n    );\r\n\r\n    this._events = events\r\n      .filter(Array.isArray)\r\n      .reduce((acc, cur) => {\r\n        acc.push.apply(acc, cur);\r\n        return acc;\r\n      }, [])\r\n      .map(([events, func]) =>\r\n        events.map((e) => ({\r\n          n: element,\r\n          e: e,\r\n          f: func,\r\n        }))\r\n      )\r\n      // workaround for .flat(1) for edge\r\n      .reduce((acc, cur) => {\r\n        if (Array.isArray(cur)) {\r\n          acc.push.apply(acc, cur);\r\n        } else {\r\n          acc.push(cur);\r\n        }\r\n        return acc;\r\n      }, []);\r\n\r\n    this._events.forEach((v) => {\r\n      v.n.addEventListener(v.e, v.f, true);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._events.forEach((v) => {\r\n      v.n.removeEventListener(v.e, v.f, true);\r\n    });\r\n    this._events = [];\r\n  }\r\n\r\n  getMousePosition({ event: e }) {\r\n    let touches;\r\n    if (e.touches && e.touches.length > 0) {\r\n      touches = e.targetTouches;\r\n    } else if (e.changedTouches && e.changedTouches.length > 0) {\r\n      touches = e.changedTouches;\r\n    }\r\n    if (touches) {\r\n      const rect = e.target.getBoundingClientRect();\r\n      const length = touches.length;\r\n      touches = Array.from(touches);\r\n      return [\r\n        touches.reduce((sum, v) => sum + v.pageX, 0) / length - rect.left,\r\n        touches.reduce((sum, v) => sum + v.pageY, 0) / length - rect.top,\r\n      ];\r\n    }\r\n    if (e.offsetX === undefined) {\r\n      const rect = e.target.getBoundingClientRect();\r\n      return [e.clientX - rect.left, e.clientY - rect.top];\r\n    }\r\n    return [e.offsetX, e.offsetY];\r\n  }\r\n\r\n  getMouseButton({ event: e }) {\r\n    return (\r\n      (e.touches\r\n        ? (e.touches.length || e.changedTouches.length)\r\n        : (e.buttons\r\n        ? e.buttons\r\n        : [0, 1, 4, 2][e.which]) ?? 1)\r\n    );\r\n  }\r\n}\r\n","export default class LoadingScreen {\r\n  loading({ output, progress }) {\r\n    const ctx = output.context[0];\r\n    const loadedHeight =\r\n      typeof progress === \"number\"\r\n        ? Math.max(1, progress * output.height)\r\n        : output.height;\r\n    ctx.globalCompositeOperation = \"source-over\";\r\n    ctx.globalAlpha = 1;\r\n    ctx.clearRect(0, 0, output.width, output.height);\r\n    ctx.fillStyle = \"#aaa\";\r\n    ctx.fillRect(\r\n      0,\r\n      output.height / 2 - loadedHeight / 2,\r\n      output.width,\r\n      loadedHeight\r\n    );\r\n    ctx.font = \"20px Georgia\";\r\n    ctx.fillStyle = \"#fff\";\r\n    ctx.textAlign = \"left\";\r\n    ctx.textBaseline = \"bottom\";\r\n\r\n    ctx.fillText(\r\n      isNaN(parseFloat(progress))\r\n        ? progress\r\n        : \"Loading \" + Math.round(100 * progress) + \"%\",\r\n      10 + Math.random() * 3,\r\n      output.height - 10 + Math.random() * 3\r\n    );\r\n  }\r\n}\r\n","import Transform from '../func/Transform.mjs'\r\n\r\nexport default class Norm {\r\n  viewport({ engine }, matrix) {\r\n    const hw = engine.getWidth() / 2;\r\n    const hh = engine.getHeight() / 2;\r\n    const scale = engine.getRatio() > 1 ? hw : hh;\r\n    return matrix.translate(hw, hh).scale(scale, scale);\r\n  }\r\n\r\n  additionalModifier({ engine, output, scene }) {\r\n    scene.cacheClear();\r\n    const additionalModifier = {\r\n      alpha: 1,\r\n      x: -1,\r\n      y: -1,\r\n      width: 2,\r\n      height: 2,\r\n      widthInPixel: output.width,\r\n      heightInPixel: output.height,\r\n      scaleCanvas: output.width / output.canvas[0].clientWidth,\r\n    };\r\n    const [x1, y1] = scene.transformPoint(0, 0, 1);\r\n    const [x2, y2] = scene.transformPoint(output.width, output.height, 1);\r\n    additionalModifier.visibleScreen = {\r\n      x: x1,\r\n      y: y1,\r\n      width: x2 - x1,\r\n      height: y2 - y1,\r\n    };\r\n    const hw = engine.getWidth() / 2;\r\n    const hh = engine.getHeight() / 2;\r\n    const scale = engine.getRatio() > 1 ? hw : hh;\r\n    const transformInvert = new Transform().translate(hw, hh).scale(scale, scale).invert();\r\n    const [sx1, sy1] = transformInvert.transformPoint(0, 0, 1);\r\n    const [sx2, sy2] = transformInvert.transformPoint(\r\n      output.width,\r\n      output.height,\r\n      1\r\n    );\r\n    additionalModifier.fullScreen = {\r\n      x: sx1,\r\n      y: sy1,\r\n      width: sx2 - sx1,\r\n      height: sy2 - sy1,\r\n    };\r\n\r\n    return additionalModifier;\r\n  }\r\n}\r\n","import TimingDefault from \"./TimingDefault.mjs\";\r\n\r\nexport default class TimingAudio extends TimingDefault {\r\n  constructor(configuration = {}) {\r\n    super(configuration);\r\n    this._maxSkippedTickChunk = Number.POSITIVE_INFINITY;\r\n    this._audioStartTime = null;\r\n    this._audioPosition = null;\r\n    this._enableAndroidHack = false;\r\n    this._audioElement = this._configuration.audioElement;\r\n  }\r\n\r\n  get audioElement() {\r\n    return this._audioElement;\r\n  }\r\n\r\n  init() {\r\n    if (this._audioElement) {\r\n      // Android hack\r\n      if (typeof MediaController === \"function\") {\r\n        this._audioElement.controller = new MediaController();\r\n        this._enableAndroidHack = true;\r\n      }\r\n      this._audioElement.preload = \"auto\";\r\n      return new Promise((resolve) => {\r\n        let canplaythrough = () => {\r\n          this._audioElement.removeEventListener(\r\n            \"canplaythrough\",\r\n            canplaythrough\r\n          );\r\n          let playPromise = this._audioElement.play();\r\n          if (playPromise) {\r\n            playPromise.catch((e) => {});\r\n          }\r\n          resolve();\r\n        };\r\n        this._audioElement.addEventListener(\"canplaythrough\", canplaythrough);\r\n        this._audioElement.load();\r\n      });\r\n    }\r\n  }\r\n\r\n  endTime() {\r\n    return this._audioElement.duration * 1000;\r\n  }\r\n\r\n  currentTime() {\r\n    let currentTime = super.currentTime();\r\n    if (this._audioElement) {\r\n      const currentAudioTime =\r\n        (this._audioElement.ended\r\n          ? this._audioElement.duration\r\n          : this._audioElement.currentTime) * 1000;\r\n      // Android workaround\r\n      if (this._enableAndroidHack) {\r\n        if (this._audioStartTime === null) {\r\n          this._audioStartTime = currentTime;\r\n          this._audioPosition = currentAudioTime;\r\n          return currentAudioTime;\r\n        } else {\r\n          if (this._audioElement.controller.playbackState === \"playing\") {\r\n            if (currentAudioTime === this._audioPosition) {\r\n              return (\r\n                this._audioPosition +\r\n                Math.min(260, currentTime - this._audioStartTime)\r\n              );\r\n            } else if (\r\n              currentAudioTime - this._audioPosition < 500 &&\r\n              currentAudioTime > this._audioPosition &&\r\n              currentTime - this._audioStartTime < 350\r\n            ) {\r\n              this._audioStartTime =\r\n                this._audioStartTime + (currentAudioTime - this._audioPosition);\r\n              this._audioPosition = currentAudioTime;\r\n              return this._audioPosition + currentTime - this._audioStartTime;\r\n            }\r\n          }\r\n          this._audioStartTime = currentTime;\r\n          this._audioPosition = currentAudioTime;\r\n          return this._audioPosition;\r\n        }\r\n      } else {\r\n        return currentAudioTime;\r\n      }\r\n    } else {\r\n      return currentTime;\r\n    }\r\n  }\r\n\r\n  clampTime({ timePassed }) {\r\n    return timePassed;\r\n  }\r\n\r\n  shiftTime() {\r\n    return 0;\r\n  }\r\n}\r\n"],"names":["_Pact","prototype","then","onFulfilled","onRejected","result","state","this","s","callback","_settle","v","e","o","_this","value","pact","bind","observer","_isSettledPact","thenable","_iteratorSymbol","Symbol","iterator","calc","c","obj","params","apply","toArray","Array","isArray","asyncIterator","Engine","canvasOrOptions","givenOptions","Error","getContext","canvas","options","Object","assign","_output","context","width","height","ratio","_events","_scene","_isSceneInitialized","_lastTimestamp","_recalculateCanvasIntend","_referenceRequestAnimationFrame","autoSize","defaultAutoSizeSettings","enabled","scaleLimitMin","scaleLimitMax","scaleFactor","referenceWidth","clientWidth","referenceHeight","clientHeight","currentScale","waitTime","currentWaitedTime","currentOffsetTime","offsetTimeLimitUp","offsetTimeLimitDown","registerResizeEvents","registerVisibilityEvents","setCanvasStyle","_autoSize","map","n","window","f","recalculateCanvas","push","document","handleVisibilityChange","_recalculateCanvas","forEach","index","_canvasCount","length","_drawFrame","from","clickToPlayAudio","playAudioOfScene","_reduceFramerate","reduceFramerate","addEventListener","switchScene","scene","sceneParameter","visibilityState","timing","audioElement","play","normContext","ctx","textBaseline","textAlign","globalAlpha","globalCompositeOperation","getWidth","getHeight","getRatio","getOutput","Math","round","_this2","style","resize","recalculateFPS","_this4","cancelAnimationFrame","Promise","resolve","requestAnimationFrame","timeBetweenFrames","_now","start","count","offsetTimeTarget","offsetTimeDelta","_realLastTimestamp","_mainLoop","i","test","update","body","stage","shouldContinue","reject","_resumeAfterTest","_resumeAfterBody","updateValue","_newScene","_sceneParameter","performance","now","Date","timestamp","isRecalculatedCanvas","_isOddFrame","max","_initializedStartTime","_promiseSceneDestroying","destroy","destroyParameterForNewScene","_this5","callInit","run","_runParameter","undefined","currentTime","timePassed","clampTime","shiftTime","moveFrame","_moveOnce","nowAutoSize","initSprites","drawFrame","isDrawFrame","move","draw","deltaTimestamp","targetTime","deltaFrame","delta","abs","min","callLoading","totalTimePassed","reset","runParameter","_this7","stop","_this11","removeEventListener","ImageManager","Images","loaded","add","Callbacks","self","Image","onload","isLoaded","substr","DOMURL","URL","webkitURL","svg","Blob","type","src","createObjectURL","onerror","img","crossOrigin","getLoaded","getCount","getImage","nameOrImage","isLoadedPromise","Layer","canvasIds","_layer","_isFunction","_start","_nextFree","_canvasIds","addElement","element","addElementForId","addElements","arrayOfElements","addElementsForIds","len","id","nextFree","concat","k","getById","elementId","getIdByElement","indexOf","deleteByElement","deleteById","isCanvasId","canvasId","includes","layerId","l","isFunction","layer","getElementsByTag","tag","ans","label","timelapsed","clear","LayerManager","_layers","addLayer","addLayers","numberOfLayer","newLayers","addLayerForId","addLayersForIds","Transform","ifNull","alternative","m","multiply","matrix","m12","m21","m22","dx","dy","invert","d","m1","m2","m3","m4","m5","rotate","rad","cos","sin","translate","x","y","scale","sx","sy","transformPoint","px","py","clone","slice","TimingDefault","configuration","_configuration","_tickChunk","tickChunk","_maxSkippedTickChunk","maxSkippedTickChunk","_tickChunkTolerance","tickChunkTolerance","init","maxTime","isChunked","hasOneChunkedFrame","calcFrames","floor","Scene","_layerManager","_totalTimePassed","_imageManager","configurationClassOrObjects","middlewares","middlewareByType","objs","_middleware","_all","filter","has","command","defaultValue","func","_param","fullParams","pipe","res","_stopPropagation","pipeBack","pipeMax","_this3","newRes","pipeAsync","target","check","step","_cycle","next","done","return","_fixup","TypeError","values","array","_forTo","stopPropagation","cacheClear","_transform","_transformInvert","viewport","_engine","_additionalModifier","scaleCanvas","parameter","engine","images","all","_initDone","updateAdditionalModifier","output","alpha","widthInPixel","heightInPixel","visibleScreen","fullScreen","_this6","_this8","additionalParameter","imageManager","layerManager","args","_endTime","progress","fixedUpdate","lastCall","_resetIntend","frames","calcFrame","animate","save","setTransform","_this9","restore","_this10","resetIntend","layers","configurationClassOrObject","reduce","middlewareCommandList","keys","additionalModifier","t_timing","t_camera","t_control","Wait","duration","sprite","time","Sequence","timeWait","sequences","shift","sequence","thisTimeWait","position","arr","lastTimestamp","sequencePosition","b","hasOwnProperty","find","seq","runSequence","timeLeft","_TIMELAPSE_TO_FORCE_DISABLE","_TIMELAPSE_TO_STOP","_TIMELAPSE_TO_REMOVE","is_difference","disableVote","restTime","Infinity","Circle","givenParameter","_parseParameterList","_getParameterList","_needInit","parameterList","name","_getBaseParameterList","animation","isClickable","rotation","rotationInRadian","rotationInDegree","scaleX","scaleY","compositeOperation","color","timepassed","_detectHelper","moveToCenter","a","hw","hh","beginPath","rect","closePath","isPointInPath","detectDraw","detect","arc","PI","fillStyle","fill","Callback","_timePassed","_deltaTime","Group","finished","spriteFinished","_Circle","detectImage","Canvas","_currentGridSize","canvasWidth","canvasHeight","gridSize","norm","setParameter","_generateTempCanvas","w","h","_temp_canvas","createElement","_tctx","normalizeFullScreen","oldTempCanvas","drawImage","_Group","wh","tw","th","cam","zoom","Emitter","classToEmit","call","FastBlur","darker","pixel","ceil","targetW","targetH","fillRect","additionalBlur","clearRect","oldValue","imageSmoothingEnabled","_currentTint","image","CENTER","frameX","frameY","frameWidth","frameHeight","normCover","normToScreen","clickExact","tint","_normScale","_tintCacheKey","join","_temp_context","sX","sY","isTopLeft","LEFT_TOP","tctx","Text","givenParameters","text","font","borderColor","lineWidth","fillText","strokeStyle","strokeText","tinycolorf","tinycolor","Particle","_currentScaleX","_currentPixelSmoothing","getGradientImage","r","g","cr","cg","cb","_Gradient","generateGradientImage","txtc","grad","createRadialGradient","gradientSize","addColorStop","toRgb","Path","oldPath","path2D","Path2D","polyfill","head","getElementsByTagName","script","appendChild","stroke","getImageData","data","path","clip","fixed","changeToPathInit","to","pasition","_preprocessing","path2shapes","changeToPath","_lerp","pathFrom","pathTo","isPath","curve","moveTo","points","bezierCurveTo","Number","EPSILON","Rect","imageDataRGBA","stackblur","Scroller","characterList","class","StackBlur","_currentRadiusPart","onCanvas","radius","radiusPart","radiusScale","_FastBlur","imageData","putImageData","StarField","_starsX","_starsY","_starsZ","_starsOldX","_starsOldY","_starsNewX","_starsNewY","_starsEnabled","_starsLineWidth","moveX","moveY","moveZ","highScale","clampOrRandom","val","random","_centerX","_centerY","_scaleZ","moveStar","scaled_timepassed","firstPass","z","projectX","projectY","lw","ret","lineTo","initialized","moveDefault","moveBezier","copy","copyLength","moveColor","colorFrom","mix","colorTo","toString","movePath","ChangeTo","changeValues","ease","orgValue","isColor","isBezier","bezier","moveAlgorithm","t","End","EndDisabled","Forever","Aniobject","isDifference","If","ifCallback","AniobjectElse","AniObject","durationBetweenFrames","current","currentFrame","ImageFrame","frameNumber","framesToRight","Loop","times","timesOrg","Move","speed","targetX","targetY","hypotenuse","sqrt","_ChangeTo","Remove","Once","Shake","shakediff","shakeDiff","shakeDiffHalf","ShowOnce","showOnce","State","states","transitions","defaultState","delegateTo","currentStateName","currentState","isTransitioningToStateName","setState","UCFirstName","charAt","toUpperCase","transitionName","Stop","StopDisabled","WaitDisabled","Camera","viewportByCam","clampView","cl","clampLimits","x1","y1","x2","y2","zoomToFullScreen","zoomTo","sx1","sy1","MIN_VALUE","CameraControl","config","_mousePos","toCam","zoomMax","zoomMin","zoomFactor","tween","callResize","camera","mouseDown","event","button","_cx","_cy","_isDown","_numOfFingers","touches","_distance","_timestamp","mouseUp","mx","my","down","numCurrentFingers","changedTouches","numOfFingers","mouseOut","mouseMove","which","distance","pageX","pageY","_czoom","arguments","viewMatrix","ox","oy","nx","ny","mouseWheel","wheelData","wheelDelta","deltaY","zoomIn","zoomOut","hasCamChanged","_instant","camInstant","zoomToNorm","CameraControlSecondButton","fromX","fromY","toX","toY","Click","doubleClickDetectInterval","_doubleClickDetectInterval","param","_doubleClickElementTimer","clearTimeout","setTimeout","Element","_hasDetectImage","_dispatchEvent","isClick","_dispatchNonEvent","_clickIntend","_hoverIntend","cx","cy","found","oldISE","p","Event","_pushEvent","preventDefault","getMousePosition","getMouseButton","events","acc","cur","targetTouches","getBoundingClientRect","sum","left","top","offsetX","clientX","clientY","offsetY","buttons","LoadingScreen","loading","loadedHeight","isNaN","parseFloat","Norm","transformInvert","TimingAudio","POSITIVE_INFINITY","_audioStartTime","_audioPosition","_enableAndroidHack","_audioElement","MediaController","controller","preload","canplaythrough","playPromise","load","endTime","currentAudioTime","ended","playbackState"],"mappings":"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"}